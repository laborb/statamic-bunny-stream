var nt=Object.defineProperty;var ot=(G,U,Y)=>U in G?nt(G,U,{enumerable:!0,configurable:!0,writable:!0,value:Y}):G[U]=Y;var st=(G,U,Y)=>(ot(G,typeof U!="symbol"?U+"":U,Y),Y);function bind(G,U){return function(){return G.apply(U,arguments)}}const{toString:toString$1}=Object.prototype,{getPrototypeOf}=Object,kindOf=(G=>U=>{const Y=toString$1.call(U);return G[Y]||(G[Y]=Y.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=G=>(G=G.toLowerCase(),U=>kindOf(U)===G),typeOfTest=G=>U=>typeof U===G,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(G){return G!==null&&!isUndefined(G)&&G.constructor!==null&&!isUndefined(G.constructor)&&isFunction(G.constructor.isBuffer)&&G.constructor.isBuffer(G)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(G){let U;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?U=ArrayBuffer.isView(G):U=G&&G.buffer&&isArrayBuffer(G.buffer),U}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject$4=G=>G!==null&&typeof G=="object",isBoolean=G=>G===!0||G===!1,isPlainObject=G=>{if(kindOf(G)!=="object")return!1;const U=getPrototypeOf(G);return(U===null||U===Object.prototype||Object.getPrototypeOf(U)===null)&&!(Symbol.toStringTag in G)&&!(Symbol.iterator in G)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=G=>isObject$4(G)&&isFunction(G.pipe),isFormData=G=>{let U;return G&&(typeof FormData=="function"&&G instanceof FormData||isFunction(G.append)&&((U=kindOf(G))==="formdata"||U==="object"&&isFunction(G.toString)&&G.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=G=>G.trim?G.trim():G.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(G,U,{allOwnKeys:Y=!1}={}){if(G===null||typeof G>"u")return;let re,oe;if(typeof G!="object"&&(G=[G]),isArray(G))for(re=0,oe=G.length;re<oe;re++)U.call(null,G[re],re,G);else{const le=Y?Object.getOwnPropertyNames(G):Object.keys(G),ue=le.length;let he;for(re=0;re<ue;re++)he=le[re],U.call(null,G[he],he,G)}}function findKey(G,U){U=U.toLowerCase();const Y=Object.keys(G);let re=Y.length,oe;for(;re-- >0;)if(oe=Y[re],U===oe.toLowerCase())return oe;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),isContextDefined=G=>!isUndefined(G)&&G!==_global;function merge(){const{caseless:G}=isContextDefined(this)&&this||{},U={},Y=(re,oe)=>{const le=G&&findKey(U,oe)||oe;isPlainObject(U[le])&&isPlainObject(re)?U[le]=merge(U[le],re):isPlainObject(re)?U[le]=merge({},re):isArray(re)?U[le]=re.slice():U[le]=re};for(let re=0,oe=arguments.length;re<oe;re++)arguments[re]&&forEach(arguments[re],Y);return U}const extend=(G,U,Y,{allOwnKeys:re}={})=>(forEach(U,(oe,le)=>{Y&&isFunction(oe)?G[le]=bind(oe,Y):G[le]=oe},{allOwnKeys:re}),G),stripBOM=G=>(G.charCodeAt(0)===65279&&(G=G.slice(1)),G),inherits=(G,U,Y,re)=>{G.prototype=Object.create(U.prototype,re),G.prototype.constructor=G,Object.defineProperty(G,"super",{value:U.prototype}),Y&&Object.assign(G.prototype,Y)},toFlatObject=(G,U,Y,re)=>{let oe,le,ue;const he={};if(U=U||{},G==null)return U;do{for(oe=Object.getOwnPropertyNames(G),le=oe.length;le-- >0;)ue=oe[le],(!re||re(ue,G,U))&&!he[ue]&&(U[ue]=G[ue],he[ue]=!0);G=Y!==!1&&getPrototypeOf(G)}while(G&&(!Y||Y(G,U))&&G!==Object.prototype);return U},endsWith=(G,U,Y)=>{G=String(G),(Y===void 0||Y>G.length)&&(Y=G.length),Y-=U.length;const re=G.indexOf(U,Y);return re!==-1&&re===Y},toArray$1=G=>{if(!G)return null;if(isArray(G))return G;let U=G.length;if(!isNumber(U))return null;const Y=new Array(U);for(;U-- >0;)Y[U]=G[U];return Y},isTypedArray=(G=>U=>G&&U instanceof G)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(G,U)=>{const re=(G&&G[Symbol.iterator]).call(G);let oe;for(;(oe=re.next())&&!oe.done;){const le=oe.value;U.call(G,le[0],le[1])}},matchAll=(G,U)=>{let Y;const re=[];for(;(Y=G.exec(U))!==null;)re.push(Y);return re},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=G=>G.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(Y,re,oe){return re.toUpperCase()+oe}),hasOwnProperty$1=(({hasOwnProperty:G})=>(U,Y)=>G.call(U,Y))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(G,U)=>{const Y=Object.getOwnPropertyDescriptors(G),re={};forEach(Y,(oe,le)=>{let ue;(ue=U(oe,le,G))!==!1&&(re[le]=ue||oe)}),Object.defineProperties(G,re)},freezeMethods=G=>{reduceDescriptors(G,(U,Y)=>{if(isFunction(G)&&["arguments","caller","callee"].indexOf(Y)!==-1)return!1;const re=G[Y];if(isFunction(re)){if(U.enumerable=!1,"writable"in U){U.writable=!1;return}U.set||(U.set=()=>{throw Error("Can not rewrite read-only method '"+Y+"'")})}})},toObjectSet=(G,U)=>{const Y={},re=oe=>{oe.forEach(le=>{Y[le]=!0})};return isArray(G)?re(G):re(String(G).split(U)),Y},noop=()=>{},toFiniteNumber=(G,U)=>G!=null&&Number.isFinite(G=+G)?G:U,ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(G=16,U=ALPHABET.ALPHA_DIGIT)=>{let Y="";const{length:re}=U;for(;G--;)Y+=U[Math.random()*re|0];return Y};function isSpecCompliantForm(G){return!!(G&&isFunction(G.append)&&G[Symbol.toStringTag]==="FormData"&&G[Symbol.iterator])}const toJSONObject=G=>{const U=new Array(10),Y=(re,oe)=>{if(isObject$4(re)){if(U.indexOf(re)>=0)return;if(!("toJSON"in re)){U[oe]=re;const le=isArray(re)?[]:{};return forEach(re,(ue,he)=>{const fe=Y(ue,oe+1);!isUndefined(fe)&&(le[he]=fe)}),U[oe]=void 0,le}}return re};return Y(G,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=G=>G&&(isObject$4(G)||isFunction(G))&&isFunction(G.then)&&isFunction(G.catch),_setImmediate=((G,U)=>G?setImmediate:U?((Y,re)=>(_global.addEventListener("message",({source:oe,data:le})=>{oe===_global&&le===Y&&re.length&&re.shift()()},!1),oe=>{re.push(oe),_global.postMessage(Y,"*")}))(`axios@${Math.random()}`,[]):Y=>setTimeout(Y))(typeof setImmediate=="function",isFunction(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject:isObject$4,isPlainObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray:toArray$1,forEachEntry,matchAll,isHTMLForm,hasOwnProperty:hasOwnProperty$1,hasOwnProp:hasOwnProperty$1,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap};function AxiosError(G,U,Y,re,oe){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=G,this.name="AxiosError",U&&(this.code=U),Y&&(this.config=Y),re&&(this.request=re),oe&&(this.response=oe,this.status=oe.status?oe.status:null)}utils$1.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(G=>{descriptors[G]={value:G}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(G,U,Y,re,oe,le)=>{const ue=Object.create(prototype$1);return utils$1.toFlatObject(G,ue,function(fe){return fe!==Error.prototype},he=>he!=="isAxiosError"),AxiosError.call(ue,G.message,U,Y,re,oe),ue.cause=G,ue.name=G.name,le&&Object.assign(ue,le),ue};const httpAdapter=null;function isVisitable(G){return utils$1.isPlainObject(G)||utils$1.isArray(G)}function removeBrackets(G){return utils$1.endsWith(G,"[]")?G.slice(0,-2):G}function renderKey(G,U,Y){return G?G.concat(U).map(function(oe,le){return oe=removeBrackets(oe),!Y&&le?"["+oe+"]":oe}).join(Y?".":""):U}function isFlatArray(G){return utils$1.isArray(G)&&!G.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(U){return/^is[A-Z]/.test(U)});function toFormData(G,U,Y){if(!utils$1.isObject(G))throw new TypeError("target must be an object");U=U||new FormData,Y=utils$1.toFlatObject(Y,{metaTokens:!0,dots:!1,indexes:!1},!1,function(Ae,Te){return!utils$1.isUndefined(Te[Ae])});const re=Y.metaTokens,oe=Y.visitor||$e,le=Y.dots,ue=Y.indexes,fe=(Y.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(U);if(!utils$1.isFunction(oe))throw new TypeError("visitor must be a function");function ve(Se){if(Se===null)return"";if(utils$1.isDate(Se))return Se.toISOString();if(!fe&&utils$1.isBlob(Se))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(Se)||utils$1.isTypedArray(Se)?fe&&typeof Blob=="function"?new Blob([Se]):Buffer.from(Se):Se}function $e(Se,Ae,Te){let Re=Se;if(Se&&!Te&&typeof Se=="object"){if(utils$1.endsWith(Ae,"{}"))Ae=re?Ae:Ae.slice(0,-2),Se=JSON.stringify(Se);else if(utils$1.isArray(Se)&&isFlatArray(Se)||(utils$1.isFileList(Se)||utils$1.endsWith(Ae,"[]"))&&(Re=utils$1.toArray(Se)))return Ae=removeBrackets(Ae),Re.forEach(function(Le,Me){!(utils$1.isUndefined(Le)||Le===null)&&U.append(ue===!0?renderKey([Ae],Me,le):ue===null?Ae:Ae+"[]",ve(Le))}),!1}return isVisitable(Se)?!0:(U.append(renderKey(Te,Ae,le),ve(Se)),!1)}const _e=[],Fe=Object.assign(predicates,{defaultVisitor:$e,convertValue:ve,isVisitable});function Ee(Se,Ae){if(!utils$1.isUndefined(Se)){if(_e.indexOf(Se)!==-1)throw Error("Circular reference detected in "+Ae.join("."));_e.push(Se),utils$1.forEach(Se,function(Re,Ue){(!(utils$1.isUndefined(Re)||Re===null)&&oe.call(U,Re,utils$1.isString(Ue)?Ue.trim():Ue,Ae,Fe))===!0&&Ee(Re,Ae?Ae.concat(Ue):[Ue])}),_e.pop()}}if(!utils$1.isObject(G))throw new TypeError("data must be an object");return Ee(G),U}function encode$3(G){const U={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(G).replace(/[!'()~]|%20|%00/g,function(re){return U[re]})}function AxiosURLSearchParams(G,U){this._pairs=[],G&&toFormData(G,this,U)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(U,Y){this._pairs.push([U,Y])};prototype.toString=function(U){const Y=U?function(re){return U.call(this,re,encode$3)}:encode$3;return this._pairs.map(function(oe){return Y(oe[0])+"="+Y(oe[1])},"").join("&")};function encode$2(G){return encodeURIComponent(G).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(G,U,Y){if(!U)return G;const re=Y&&Y.encode||encode$2;utils$1.isFunction(Y)&&(Y={serialize:Y});const oe=Y&&Y.serialize;let le;if(oe?le=oe(U,Y):le=utils$1.isURLSearchParams(U)?U.toString():new AxiosURLSearchParams(U,Y).toString(re),le){const ue=G.indexOf("#");ue!==-1&&(G=G.slice(0,ue)),G+=(G.indexOf("?")===-1?"?":"&")+le}return G}class InterceptorManager{constructor(){this.handlers=[]}use(U,Y,re){return this.handlers.push({fulfilled:U,rejected:Y,synchronous:re?re.synchronous:!1,runWhen:re?re.runWhen:null}),this.handlers.length-1}eject(U){this.handlers[U]&&(this.handlers[U]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(U){utils$1.forEach(this.handlers,function(re){re!==null&&U(re)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(G,U){return toFormData(G,new platform.classes.URLSearchParams,Object.assign({visitor:function(Y,re,oe,le){return platform.isNode&&utils$1.isBuffer(Y)?(this.append(re,Y.toString("base64")),!1):le.defaultVisitor.apply(this,arguments)}},U))}function parsePropPath(G){return utils$1.matchAll(/\w+|\[(\w*)]/g,G).map(U=>U[0]==="[]"?"":U[1]||U[0])}function arrayToObject(G){const U={},Y=Object.keys(G);let re;const oe=Y.length;let le;for(re=0;re<oe;re++)le=Y[re],U[le]=G[le];return U}function formDataToJSON(G){function U(Y,re,oe,le){let ue=Y[le++];if(ue==="__proto__")return!0;const he=Number.isFinite(+ue),fe=le>=Y.length;return ue=!ue&&utils$1.isArray(oe)?oe.length:ue,fe?(utils$1.hasOwnProp(oe,ue)?oe[ue]=[oe[ue],re]:oe[ue]=re,!he):((!oe[ue]||!utils$1.isObject(oe[ue]))&&(oe[ue]=[]),U(Y,re,oe[ue],le)&&utils$1.isArray(oe[ue])&&(oe[ue]=arrayToObject(oe[ue])),!he)}if(utils$1.isFormData(G)&&utils$1.isFunction(G.entries)){const Y={};return utils$1.forEachEntry(G,(re,oe)=>{U(parsePropPath(re),oe,Y,0)}),Y}return null}function stringifySafely(G,U,Y){if(utils$1.isString(G))try{return(U||JSON.parse)(G),utils$1.trim(G)}catch(re){if(re.name!=="SyntaxError")throw re}return(Y||JSON.stringify)(G)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(U,Y){const re=Y.getContentType()||"",oe=re.indexOf("application/json")>-1,le=utils$1.isObject(U);if(le&&utils$1.isHTMLForm(U)&&(U=new FormData(U)),utils$1.isFormData(U))return oe?JSON.stringify(formDataToJSON(U)):U;if(utils$1.isArrayBuffer(U)||utils$1.isBuffer(U)||utils$1.isStream(U)||utils$1.isFile(U)||utils$1.isBlob(U)||utils$1.isReadableStream(U))return U;if(utils$1.isArrayBufferView(U))return U.buffer;if(utils$1.isURLSearchParams(U))return Y.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),U.toString();let he;if(le){if(re.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(U,this.formSerializer).toString();if((he=utils$1.isFileList(U))||re.indexOf("multipart/form-data")>-1){const fe=this.env&&this.env.FormData;return toFormData(he?{"files[]":U}:U,fe&&new fe,this.formSerializer)}}return le||oe?(Y.setContentType("application/json",!1),stringifySafely(U)):U}],transformResponse:[function(U){const Y=this.transitional||defaults.transitional,re=Y&&Y.forcedJSONParsing,oe=this.responseType==="json";if(utils$1.isResponse(U)||utils$1.isReadableStream(U))return U;if(U&&utils$1.isString(U)&&(re&&!this.responseType||oe)){const ue=!(Y&&Y.silentJSONParsing)&&oe;try{return JSON.parse(U)}catch(he){if(ue)throw he.name==="SyntaxError"?AxiosError.from(he,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):he}}return U}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(U){return U>=200&&U<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],G=>{defaults.headers[G]={}});const defaults$1=defaults,ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=G=>{const U={};let Y,re,oe;return G&&G.split(`
`).forEach(function(ue){oe=ue.indexOf(":"),Y=ue.substring(0,oe).trim().toLowerCase(),re=ue.substring(oe+1).trim(),!(!Y||U[Y]&&ignoreDuplicateOf[Y])&&(Y==="set-cookie"?U[Y]?U[Y].push(re):U[Y]=[re]:U[Y]=U[Y]?U[Y]+", "+re:re)}),U},$internals=Symbol("internals");function normalizeHeader(G){return G&&String(G).trim().toLowerCase()}function normalizeValue(G){return G===!1||G==null?G:utils$1.isArray(G)?G.map(normalizeValue):String(G)}function parseTokens(G){const U=Object.create(null),Y=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let re;for(;re=Y.exec(G);)U[re[1]]=re[2];return U}const isValidHeaderName=G=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(G.trim());function matchHeaderValue(G,U,Y,re,oe){if(utils$1.isFunction(re))return re.call(this,U,Y);if(oe&&(U=Y),!!utils$1.isString(U)){if(utils$1.isString(re))return U.indexOf(re)!==-1;if(utils$1.isRegExp(re))return re.test(U)}}function formatHeader(G){return G.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(U,Y,re)=>Y.toUpperCase()+re)}function buildAccessors(G,U){const Y=utils$1.toCamelCase(" "+U);["get","set","has"].forEach(re=>{Object.defineProperty(G,re+Y,{value:function(oe,le,ue){return this[re].call(this,U,oe,le,ue)},configurable:!0})})}class AxiosHeaders{constructor(U){U&&this.set(U)}set(U,Y,re){const oe=this;function le(he,fe,ve){const $e=normalizeHeader(fe);if(!$e)throw new Error("header name must be a non-empty string");const _e=utils$1.findKey(oe,$e);(!_e||oe[_e]===void 0||ve===!0||ve===void 0&&oe[_e]!==!1)&&(oe[_e||fe]=normalizeValue(he))}const ue=(he,fe)=>utils$1.forEach(he,(ve,$e)=>le(ve,$e,fe));if(utils$1.isPlainObject(U)||U instanceof this.constructor)ue(U,Y);else if(utils$1.isString(U)&&(U=U.trim())&&!isValidHeaderName(U))ue(parseHeaders(U),Y);else if(utils$1.isHeaders(U))for(const[he,fe]of U.entries())le(fe,he,re);else U!=null&&le(Y,U,re);return this}get(U,Y){if(U=normalizeHeader(U),U){const re=utils$1.findKey(this,U);if(re){const oe=this[re];if(!Y)return oe;if(Y===!0)return parseTokens(oe);if(utils$1.isFunction(Y))return Y.call(this,oe,re);if(utils$1.isRegExp(Y))return Y.exec(oe);throw new TypeError("parser must be boolean|regexp|function")}}}has(U,Y){if(U=normalizeHeader(U),U){const re=utils$1.findKey(this,U);return!!(re&&this[re]!==void 0&&(!Y||matchHeaderValue(this,this[re],re,Y)))}return!1}delete(U,Y){const re=this;let oe=!1;function le(ue){if(ue=normalizeHeader(ue),ue){const he=utils$1.findKey(re,ue);he&&(!Y||matchHeaderValue(re,re[he],he,Y))&&(delete re[he],oe=!0)}}return utils$1.isArray(U)?U.forEach(le):le(U),oe}clear(U){const Y=Object.keys(this);let re=Y.length,oe=!1;for(;re--;){const le=Y[re];(!U||matchHeaderValue(this,this[le],le,U,!0))&&(delete this[le],oe=!0)}return oe}normalize(U){const Y=this,re={};return utils$1.forEach(this,(oe,le)=>{const ue=utils$1.findKey(re,le);if(ue){Y[ue]=normalizeValue(oe),delete Y[le];return}const he=U?formatHeader(le):String(le).trim();he!==le&&delete Y[le],Y[he]=normalizeValue(oe),re[he]=!0}),this}concat(...U){return this.constructor.concat(this,...U)}toJSON(U){const Y=Object.create(null);return utils$1.forEach(this,(re,oe)=>{re!=null&&re!==!1&&(Y[oe]=U&&utils$1.isArray(re)?re.join(", "):re)}),Y}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([U,Y])=>U+": "+Y).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(U){return U instanceof this?U:new this(U)}static concat(U,...Y){const re=new this(U);return Y.forEach(oe=>re.set(oe)),re}static accessor(U){const re=(this[$internals]=this[$internals]={accessors:{}}).accessors,oe=this.prototype;function le(ue){const he=normalizeHeader(ue);re[he]||(buildAccessors(oe,ue),re[he]=!0)}return utils$1.isArray(U)?U.forEach(le):le(U),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:G},U)=>{let Y=U[0].toUpperCase()+U.slice(1);return{get:()=>G,set(re){this[Y]=re}}});utils$1.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(G,U){const Y=this||defaults$1,re=U||Y,oe=AxiosHeaders$1.from(re.headers);let le=re.data;return utils$1.forEach(G,function(he){le=he.call(Y,le,oe.normalize(),U?U.status:void 0)}),oe.normalize(),le}function isCancel(G){return!!(G&&G.__CANCEL__)}function CanceledError(G,U,Y){AxiosError.call(this,G??"canceled",AxiosError.ERR_CANCELED,U,Y),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(G,U,Y){const re=Y.config.validateStatus;!Y.status||!re||re(Y.status)?G(Y):U(new AxiosError("Request failed with status code "+Y.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(Y.status/100)-4],Y.config,Y.request,Y))}function parseProtocol(G){const U=/^([-+\w]{1,25})(:?\/\/|:)/.exec(G);return U&&U[1]||""}function speedometer(G,U){G=G||10;const Y=new Array(G),re=new Array(G);let oe=0,le=0,ue;return U=U!==void 0?U:1e3,function(fe){const ve=Date.now(),$e=re[le];ue||(ue=ve),Y[oe]=fe,re[oe]=ve;let _e=le,Fe=0;for(;_e!==oe;)Fe+=Y[_e++],_e=_e%G;if(oe=(oe+1)%G,oe===le&&(le=(le+1)%G),ve-ue<U)return;const Ee=$e&&ve-$e;return Ee?Math.round(Fe*1e3/Ee):void 0}}function throttle$2(G,U){let Y=0,re=1e3/U,oe,le;const ue=(ve,$e=Date.now())=>{Y=$e,oe=null,le&&(clearTimeout(le),le=null),G.apply(null,ve)};return[(...ve)=>{const $e=Date.now(),_e=$e-Y;_e>=re?ue(ve,$e):(oe=ve,le||(le=setTimeout(()=>{le=null,ue(oe)},re-_e)))},()=>oe&&ue(oe)]}const progressEventReducer=(G,U,Y=3)=>{let re=0;const oe=speedometer(50,250);return throttle$2(le=>{const ue=le.loaded,he=le.lengthComputable?le.total:void 0,fe=ue-re,ve=oe(fe),$e=ue<=he;re=ue;const _e={loaded:ue,total:he,progress:he?ue/he:void 0,bytes:fe,rate:ve||void 0,estimated:ve&&he&&$e?(he-ue)/ve:void 0,event:le,lengthComputable:he!=null,[U?"download":"upload"]:!0};G(_e)},Y)},progressEventDecorator=(G,U)=>{const Y=G!=null;return[re=>U[0]({lengthComputable:Y,total:G,loaded:re}),U[1]]},asyncDecorator=G=>(...U)=>utils$1.asap(()=>G(...U)),isURLSameOrigin=platform.hasStandardBrowserEnv?((G,U)=>Y=>(Y=new URL(Y,platform.origin),G.protocol===Y.protocol&&G.host===Y.host&&(U||G.port===Y.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(G,U,Y,re,oe,le){const ue=[G+"="+encodeURIComponent(U)];utils$1.isNumber(Y)&&ue.push("expires="+new Date(Y).toGMTString()),utils$1.isString(re)&&ue.push("path="+re),utils$1.isString(oe)&&ue.push("domain="+oe),le===!0&&ue.push("secure"),document.cookie=ue.join("; ")},read(G){const U=document.cookie.match(new RegExp("(^|;\\s*)("+G+")=([^;]*)"));return U?decodeURIComponent(U[3]):null},remove(G){this.write(G,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(G){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(G)}function combineURLs(G,U){return U?G.replace(/\/?\/$/,"")+"/"+U.replace(/^\/+/,""):G}function buildFullPath(G,U){return G&&!isAbsoluteURL(U)?combineURLs(G,U):U}const headersToObject=G=>G instanceof AxiosHeaders$1?{...G}:G;function mergeConfig(G,U){U=U||{};const Y={};function re(ve,$e,_e,Fe){return utils$1.isPlainObject(ve)&&utils$1.isPlainObject($e)?utils$1.merge.call({caseless:Fe},ve,$e):utils$1.isPlainObject($e)?utils$1.merge({},$e):utils$1.isArray($e)?$e.slice():$e}function oe(ve,$e,_e,Fe){if(utils$1.isUndefined($e)){if(!utils$1.isUndefined(ve))return re(void 0,ve,_e,Fe)}else return re(ve,$e,_e,Fe)}function le(ve,$e){if(!utils$1.isUndefined($e))return re(void 0,$e)}function ue(ve,$e){if(utils$1.isUndefined($e)){if(!utils$1.isUndefined(ve))return re(void 0,ve)}else return re(void 0,$e)}function he(ve,$e,_e){if(_e in U)return re(ve,$e);if(_e in G)return re(void 0,ve)}const fe={url:le,method:le,data:le,baseURL:ue,transformRequest:ue,transformResponse:ue,paramsSerializer:ue,timeout:ue,timeoutMessage:ue,withCredentials:ue,withXSRFToken:ue,adapter:ue,responseType:ue,xsrfCookieName:ue,xsrfHeaderName:ue,onUploadProgress:ue,onDownloadProgress:ue,decompress:ue,maxContentLength:ue,maxBodyLength:ue,beforeRedirect:ue,transport:ue,httpAgent:ue,httpsAgent:ue,cancelToken:ue,socketPath:ue,responseEncoding:ue,validateStatus:he,headers:(ve,$e,_e)=>oe(headersToObject(ve),headersToObject($e),_e,!0)};return utils$1.forEach(Object.keys(Object.assign({},G,U)),function($e){const _e=fe[$e]||oe,Fe=_e(G[$e],U[$e],$e);utils$1.isUndefined(Fe)&&_e!==he||(Y[$e]=Fe)}),Y}const resolveConfig=G=>{const U=mergeConfig({},G);let{data:Y,withXSRFToken:re,xsrfHeaderName:oe,xsrfCookieName:le,headers:ue,auth:he}=U;U.headers=ue=AxiosHeaders$1.from(ue),U.url=buildURL(buildFullPath(U.baseURL,U.url),G.params,G.paramsSerializer),he&&ue.set("Authorization","Basic "+btoa((he.username||"")+":"+(he.password?unescape(encodeURIComponent(he.password)):"")));let fe;if(utils$1.isFormData(Y)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)ue.setContentType(void 0);else if((fe=ue.getContentType())!==!1){const[ve,...$e]=fe?fe.split(";").map(_e=>_e.trim()).filter(Boolean):[];ue.setContentType([ve||"multipart/form-data",...$e].join("; "))}}if(platform.hasStandardBrowserEnv&&(re&&utils$1.isFunction(re)&&(re=re(U)),re||re!==!1&&isURLSameOrigin(U.url))){const ve=oe&&le&&cookies.read(le);ve&&ue.set(oe,ve)}return U},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(G){return new Promise(function(Y,re){const oe=resolveConfig(G);let le=oe.data;const ue=AxiosHeaders$1.from(oe.headers).normalize();let{responseType:he,onUploadProgress:fe,onDownloadProgress:ve}=oe,$e,_e,Fe,Ee,Se;function Ae(){Ee&&Ee(),Se&&Se(),oe.cancelToken&&oe.cancelToken.unsubscribe($e),oe.signal&&oe.signal.removeEventListener("abort",$e)}let Te=new XMLHttpRequest;Te.open(oe.method.toUpperCase(),oe.url,!0),Te.timeout=oe.timeout;function Re(){if(!Te)return;const Le=AxiosHeaders$1.from("getAllResponseHeaders"in Te&&Te.getAllResponseHeaders()),De={data:!he||he==="text"||he==="json"?Te.responseText:Te.response,status:Te.status,statusText:Te.statusText,headers:Le,config:G,request:Te};settle(function(He){Y(He),Ae()},function(He){re(He),Ae()},De),Te=null}"onloadend"in Te?Te.onloadend=Re:Te.onreadystatechange=function(){!Te||Te.readyState!==4||Te.status===0&&!(Te.responseURL&&Te.responseURL.indexOf("file:")===0)||setTimeout(Re)},Te.onabort=function(){Te&&(re(new AxiosError("Request aborted",AxiosError.ECONNABORTED,G,Te)),Te=null)},Te.onerror=function(){re(new AxiosError("Network Error",AxiosError.ERR_NETWORK,G,Te)),Te=null},Te.ontimeout=function(){let Me=oe.timeout?"timeout of "+oe.timeout+"ms exceeded":"timeout exceeded";const De=oe.transitional||transitionalDefaults;oe.timeoutErrorMessage&&(Me=oe.timeoutErrorMessage),re(new AxiosError(Me,De.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,G,Te)),Te=null},le===void 0&&ue.setContentType(null),"setRequestHeader"in Te&&utils$1.forEach(ue.toJSON(),function(Me,De){Te.setRequestHeader(De,Me)}),utils$1.isUndefined(oe.withCredentials)||(Te.withCredentials=!!oe.withCredentials),he&&he!=="json"&&(Te.responseType=oe.responseType),ve&&([Fe,Se]=progressEventReducer(ve,!0),Te.addEventListener("progress",Fe)),fe&&Te.upload&&([_e,Ee]=progressEventReducer(fe),Te.upload.addEventListener("progress",_e),Te.upload.addEventListener("loadend",Ee)),(oe.cancelToken||oe.signal)&&($e=Le=>{Te&&(re(!Le||Le.type?new CanceledError(null,G,Te):Le),Te.abort(),Te=null)},oe.cancelToken&&oe.cancelToken.subscribe($e),oe.signal&&(oe.signal.aborted?$e():oe.signal.addEventListener("abort",$e)));const Ue=parseProtocol(oe.url);if(Ue&&platform.protocols.indexOf(Ue)===-1){re(new AxiosError("Unsupported protocol "+Ue+":",AxiosError.ERR_BAD_REQUEST,G));return}Te.send(le||null)})},composeSignals=(G,U)=>{const{length:Y}=G=G?G.filter(Boolean):[];if(U||Y){let re=new AbortController,oe;const le=function(ve){if(!oe){oe=!0,he();const $e=ve instanceof Error?ve:this.reason;re.abort($e instanceof AxiosError?$e:new CanceledError($e instanceof Error?$e.message:$e))}};let ue=U&&setTimeout(()=>{ue=null,le(new AxiosError(`timeout ${U} of ms exceeded`,AxiosError.ETIMEDOUT))},U);const he=()=>{G&&(ue&&clearTimeout(ue),ue=null,G.forEach(ve=>{ve.unsubscribe?ve.unsubscribe(le):ve.removeEventListener("abort",le)}),G=null)};G.forEach(ve=>ve.addEventListener("abort",le));const{signal:fe}=re;return fe.unsubscribe=()=>utils$1.asap(he),fe}},composeSignals$1=composeSignals,streamChunk=function*(G,U){let Y=G.byteLength;if(!U||Y<U){yield G;return}let re=0,oe;for(;re<Y;)oe=re+U,yield G.slice(re,oe),re=oe},readBytes=async function*(G,U){for await(const Y of readStream(G))yield*streamChunk(Y,U)},readStream=async function*(G){if(G[Symbol.asyncIterator]){yield*G;return}const U=G.getReader();try{for(;;){const{done:Y,value:re}=await U.read();if(Y)break;yield re}}finally{await U.cancel()}},trackStream=(G,U,Y,re)=>{const oe=readBytes(G,U);let le=0,ue,he=fe=>{ue||(ue=!0,re&&re(fe))};return new ReadableStream({async pull(fe){try{const{done:ve,value:$e}=await oe.next();if(ve){he(),fe.close();return}let _e=$e.byteLength;if(Y){let Fe=le+=_e;Y(Fe)}fe.enqueue(new Uint8Array($e))}catch(ve){throw he(ve),ve}},cancel(fe){return he(fe),oe.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(G=>U=>G.encode(U))(new TextEncoder):async G=>new Uint8Array(await new Response(G).arrayBuffer())),test=(G,...U)=>{try{return!!G(...U)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let G=!1;const U=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return G=!0,"half"}}).headers.has("Content-Type");return G&&!U}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$1.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(G=>G.body)};isFetchSupported&&(G=>{["text","arrayBuffer","blob","formData","stream"].forEach(U=>{!resolvers[U]&&(resolvers[U]=utils$1.isFunction(G[U])?Y=>Y[U]():(Y,re)=>{throw new AxiosError(`Response type '${U}' is not supported`,AxiosError.ERR_NOT_SUPPORT,re)})})})(new Response);const getBodyLength=async G=>{if(G==null)return 0;if(utils$1.isBlob(G))return G.size;if(utils$1.isSpecCompliantForm(G))return(await new Request(platform.origin,{method:"POST",body:G}).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(G)||utils$1.isArrayBuffer(G))return G.byteLength;if(utils$1.isURLSearchParams(G)&&(G=G+""),utils$1.isString(G))return(await encodeText(G)).byteLength},resolveBodyLength=async(G,U)=>{const Y=utils$1.toFiniteNumber(G.getContentLength());return Y??getBodyLength(U)},fetchAdapter=isFetchSupported&&(async G=>{let{url:U,method:Y,data:re,signal:oe,cancelToken:le,timeout:ue,onDownloadProgress:he,onUploadProgress:fe,responseType:ve,headers:$e,withCredentials:_e="same-origin",fetchOptions:Fe}=resolveConfig(G);ve=ve?(ve+"").toLowerCase():"text";let Ee=composeSignals$1([oe,le&&le.toAbortSignal()],ue),Se;const Ae=Ee&&Ee.unsubscribe&&(()=>{Ee.unsubscribe()});let Te;try{if(fe&&supportsRequestStream&&Y!=="get"&&Y!=="head"&&(Te=await resolveBodyLength($e,re))!==0){let De=new Request(U,{method:"POST",body:re,duplex:"half"}),je;if(utils$1.isFormData(re)&&(je=De.headers.get("content-type"))&&$e.setContentType(je),De.body){const[He,Ve]=progressEventDecorator(Te,progressEventReducer(asyncDecorator(fe)));re=trackStream(De.body,DEFAULT_CHUNK_SIZE,He,Ve)}}utils$1.isString(_e)||(_e=_e?"include":"omit");const Re="credentials"in Request.prototype;Se=new Request(U,{...Fe,signal:Ee,method:Y.toUpperCase(),headers:$e.normalize().toJSON(),body:re,duplex:"half",credentials:Re?_e:void 0});let Ue=await fetch(Se);const Le=supportsResponseStream&&(ve==="stream"||ve==="response");if(supportsResponseStream&&(he||Le&&Ae)){const De={};["status","statusText","headers"].forEach(ze=>{De[ze]=Ue[ze]});const je=utils$1.toFiniteNumber(Ue.headers.get("content-length")),[He,Ve]=he&&progressEventDecorator(je,progressEventReducer(asyncDecorator(he),!0))||[];Ue=new Response(trackStream(Ue.body,DEFAULT_CHUNK_SIZE,He,()=>{Ve&&Ve(),Ae&&Ae()}),De)}ve=ve||"text";let Me=await resolvers[utils$1.findKey(resolvers,ve)||"text"](Ue,G);return!Le&&Ae&&Ae(),await new Promise((De,je)=>{settle(De,je,{data:Me,headers:AxiosHeaders$1.from(Ue.headers),status:Ue.status,statusText:Ue.statusText,config:G,request:Se})})}catch(Re){throw Ae&&Ae(),Re&&Re.name==="TypeError"&&/fetch/i.test(Re.message)?Object.assign(new AxiosError("Network Error",AxiosError.ERR_NETWORK,G,Se),{cause:Re.cause||Re}):AxiosError.from(Re,Re&&Re.code,G,Se)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1.forEach(knownAdapters,(G,U)=>{if(G){try{Object.defineProperty(G,"name",{value:U})}catch{}Object.defineProperty(G,"adapterName",{value:U})}});const renderReason=G=>`- ${G}`,isResolvedHandle=G=>utils$1.isFunction(G)||G===null||G===!1,adapters={getAdapter:G=>{G=utils$1.isArray(G)?G:[G];const{length:U}=G;let Y,re;const oe={};for(let le=0;le<U;le++){Y=G[le];let ue;if(re=Y,!isResolvedHandle(Y)&&(re=knownAdapters[(ue=String(Y)).toLowerCase()],re===void 0))throw new AxiosError(`Unknown adapter '${ue}'`);if(re)break;oe[ue||"#"+le]=re}if(!re){const le=Object.entries(oe).map(([he,fe])=>`adapter ${he} `+(fe===!1?"is not supported by the environment":"is not available in the build"));let ue=U?le.length>1?`since :
`+le.map(renderReason).join(`
`):" "+renderReason(le[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+ue,"ERR_NOT_SUPPORT")}return re},adapters:knownAdapters};function throwIfCancellationRequested(G){if(G.cancelToken&&G.cancelToken.throwIfRequested(),G.signal&&G.signal.aborted)throw new CanceledError(null,G)}function dispatchRequest(G){return throwIfCancellationRequested(G),G.headers=AxiosHeaders$1.from(G.headers),G.data=transformData.call(G,G.transformRequest),["post","put","patch"].indexOf(G.method)!==-1&&G.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(G.adapter||defaults$1.adapter)(G).then(function(re){return throwIfCancellationRequested(G),re.data=transformData.call(G,G.transformResponse,re),re.headers=AxiosHeaders$1.from(re.headers),re},function(re){return isCancel(re)||(throwIfCancellationRequested(G),re&&re.response&&(re.response.data=transformData.call(G,G.transformResponse,re.response),re.response.headers=AxiosHeaders$1.from(re.response.headers))),Promise.reject(re)})}const VERSION$1="1.7.9",validators$1={};["object","boolean","number","function","string","symbol"].forEach((G,U)=>{validators$1[G]=function(re){return typeof re===G||"a"+(U<1?"n ":" ")+G}});const deprecatedWarnings={};validators$1.transitional=function(U,Y,re){function oe(le,ue){return"[Axios v"+VERSION$1+"] Transitional option '"+le+"'"+ue+(re?". "+re:"")}return(le,ue,he)=>{if(U===!1)throw new AxiosError(oe(ue," has been removed"+(Y?" in "+Y:"")),AxiosError.ERR_DEPRECATED);return Y&&!deprecatedWarnings[ue]&&(deprecatedWarnings[ue]=!0,console.warn(oe(ue," has been deprecated since v"+Y+" and will be removed in the near future"))),U?U(le,ue,he):!0}};validators$1.spelling=function(U){return(Y,re)=>(console.warn(`${re} is likely a misspelling of ${U}`),!0)};function assertOptions(G,U,Y){if(typeof G!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const re=Object.keys(G);let oe=re.length;for(;oe-- >0;){const le=re[oe],ue=U[le];if(ue){const he=G[le],fe=he===void 0||ue(he,le,G);if(fe!==!0)throw new AxiosError("option "+le+" must be "+fe,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(Y!==!0)throw new AxiosError("Unknown option "+le,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(U){this.defaults=U,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}async request(U,Y){try{return await this._request(U,Y)}catch(re){if(re instanceof Error){let oe={};Error.captureStackTrace?Error.captureStackTrace(oe):oe=new Error;const le=oe.stack?oe.stack.replace(/^.+\n/,""):"";try{re.stack?le&&!String(re.stack).endsWith(le.replace(/^.+\n.+\n/,""))&&(re.stack+=`
`+le):re.stack=le}catch{}}throw re}}_request(U,Y){typeof U=="string"?(Y=Y||{},Y.url=U):Y=U||{},Y=mergeConfig(this.defaults,Y);const{transitional:re,paramsSerializer:oe,headers:le}=Y;re!==void 0&&validator.assertOptions(re,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),oe!=null&&(utils$1.isFunction(oe)?Y.paramsSerializer={serialize:oe}:validator.assertOptions(oe,{encode:validators.function,serialize:validators.function},!0)),validator.assertOptions(Y,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),Y.method=(Y.method||this.defaults.method||"get").toLowerCase();let ue=le&&utils$1.merge(le.common,le[Y.method]);le&&utils$1.forEach(["delete","get","head","post","put","patch","common"],Se=>{delete le[Se]}),Y.headers=AxiosHeaders$1.concat(ue,le);const he=[];let fe=!0;this.interceptors.request.forEach(function(Ae){typeof Ae.runWhen=="function"&&Ae.runWhen(Y)===!1||(fe=fe&&Ae.synchronous,he.unshift(Ae.fulfilled,Ae.rejected))});const ve=[];this.interceptors.response.forEach(function(Ae){ve.push(Ae.fulfilled,Ae.rejected)});let $e,_e=0,Fe;if(!fe){const Se=[dispatchRequest.bind(this),void 0];for(Se.unshift.apply(Se,he),Se.push.apply(Se,ve),Fe=Se.length,$e=Promise.resolve(Y);_e<Fe;)$e=$e.then(Se[_e++],Se[_e++]);return $e}Fe=he.length;let Ee=Y;for(_e=0;_e<Fe;){const Se=he[_e++],Ae=he[_e++];try{Ee=Se(Ee)}catch(Te){Ae.call(this,Te);break}}try{$e=dispatchRequest.call(this,Ee)}catch(Se){return Promise.reject(Se)}for(_e=0,Fe=ve.length;_e<Fe;)$e=$e.then(ve[_e++],ve[_e++]);return $e}getUri(U){U=mergeConfig(this.defaults,U);const Y=buildFullPath(U.baseURL,U.url);return buildURL(Y,U.params,U.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function(U){Axios.prototype[U]=function(Y,re){return this.request(mergeConfig(re||{},{method:U,url:Y,data:(re||{}).data}))}});utils$1.forEach(["post","put","patch"],function(U){function Y(re){return function(le,ue,he){return this.request(mergeConfig(he||{},{method:U,headers:re?{"Content-Type":"multipart/form-data"}:{},url:le,data:ue}))}}Axios.prototype[U]=Y(),Axios.prototype[U+"Form"]=Y(!0)});const Axios$1=Axios;class CancelToken{constructor(U){if(typeof U!="function")throw new TypeError("executor must be a function.");let Y;this.promise=new Promise(function(le){Y=le});const re=this;this.promise.then(oe=>{if(!re._listeners)return;let le=re._listeners.length;for(;le-- >0;)re._listeners[le](oe);re._listeners=null}),this.promise.then=oe=>{let le;const ue=new Promise(he=>{re.subscribe(he),le=he}).then(oe);return ue.cancel=function(){re.unsubscribe(le)},ue},U(function(le,ue,he){re.reason||(re.reason=new CanceledError(le,ue,he),Y(re.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(U){if(this.reason){U(this.reason);return}this._listeners?this._listeners.push(U):this._listeners=[U]}unsubscribe(U){if(!this._listeners)return;const Y=this._listeners.indexOf(U);Y!==-1&&this._listeners.splice(Y,1)}toAbortSignal(){const U=new AbortController,Y=re=>{U.abort(re)};return this.subscribe(Y),U.signal.unsubscribe=()=>this.unsubscribe(Y),U.signal}static source(){let U;return{token:new CancelToken(function(oe){U=oe}),cancel:U}}}const CancelToken$1=CancelToken;function spread(G){return function(Y){return G.apply(null,Y)}}function isAxiosError(G){return utils$1.isObject(G)&&G.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([G,U])=>{HttpStatusCode[U]=G});const HttpStatusCode$1=HttpStatusCode;function createInstance(G){const U=new Axios$1(G),Y=bind(Axios$1.prototype.request,U);return utils$1.extend(Y,Axios$1.prototype,U,{allOwnKeys:!0}),utils$1.extend(Y,U,null,{allOwnKeys:!0}),Y.create=function(oe){return createInstance(mergeConfig(G,oe))},Y}const axios=createInstance(defaults$1);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION$1;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(U){return Promise.all(U)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=G=>formDataToJSON(utils$1.isHTMLForm(G)?new FormData(G):G);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const axios$1=axios;function normalizeComponent(G,U,Y,re,oe,le,ue,he){var fe=typeof G=="function"?G.options:G;U&&(fe.render=U,fe.staticRenderFns=Y,fe._compiled=!0),re&&(fe.functional=!0),le&&(fe._scopeId="data-v-"+le);var ve;if(ue?(ve=function(Fe){Fe=Fe||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!Fe&&typeof __VUE_SSR_CONTEXT__<"u"&&(Fe=__VUE_SSR_CONTEXT__),oe&&oe.call(this,Fe),Fe&&Fe._registeredComponents&&Fe._registeredComponents.add(ue)},fe._ssrRegister=ve):oe&&(ve=he?function(){oe.call(this,(fe.functional?this.parent:this).$root.$options.shadowRoot)}:oe),ve)if(fe.functional){fe._injectStyles=ve;var $e=fe.render;fe.render=function(Ee,Se){return ve.call(Se),$e(Ee,Se)}}else{var _e=fe.beforeCreate;fe.beforeCreate=_e?[].concat(_e,ve):[ve]}return{exports:G,options:fe}}const _sfc_main$e={mixins:[Fieldtype],data(){return{loading:!0,videos:[],options:[]}},computed:{selectedOptions(){let G=this.value||[];return(typeof G=="string"||typeof G=="number")&&(G=[G]),G.map(U=>_.findWhere(this.options,{value:U})||{value:U,label:U})}},created(){this.getVideos()},methods:{getVideos(){const G={method:"GET",url:"https://video.bunnycdn.com/library/"+this.meta.library+"/videos?page=1&itemsPerPage=100&orderBy=date",headers:{accept:"application/json",AccessKey:this.meta.api}};axios$1.request(G).then(U=>{this.videos=U.data,this.loading=!1,this.arrangeVideos()}).catch(function(U){console.error(U)})},arrangeVideos(){this.videos.items.forEach(G=>{this.options.push({value:G.guid,label:G.title+" ("+new Date(G.dateUploaded).toLocaleString()+")"})})},focus(){this.$refs.input.focus()},vueSelectUpdated(G){G?this.update(G.value):this.update(null)}}};var _sfc_render$e=function(){var U=this,Y=U._self._c;return Y("div",[Y("v-select",{ref:"input",staticClass:"flex-1",attrs:{"input-id":U.fieldId,"append-to-body":"",name:U.name,clearable:!1,disabled:!1,options:U.options,placeholder:U.__("Select Video..."),searchable:!0,multiple:!1,"reset-on-options-change":!1,"close-on-select":!0,value:U.selectedOptions},on:{input:U.vueSelectUpdated,focus:function(re){return U.$emit("focus")},"search:focus":function(re){return U.$emit("focus")},"search:blur":function(re){return U.$emit("blur")}},scopedSlots:U._u([{key:"option",fn:function({label:re}){return[void 0]}},{key:"selected-option",fn:function({label:re}){return[void 0]}},{key:"no-options",fn:function(){return[Y("div",{staticClass:"text-sm text-gray-700 text-left py-2 px-4",domProps:{textContent:U._s(U.__("No options to choose from."))}})]},proxy:!0}])})],1)},_sfc_staticRenderFns$e=[],__component__$e=normalizeComponent(_sfc_main$e,_sfc_render$e,_sfc_staticRenderFns$e,!1,null,null,null,null);const Field=__component__$e.exports,_sfc_main$d={};var _sfc_render$d=function(){var U=this,Y=U._self._c;return Y("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"}},[Y("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}})])},_sfc_staticRenderFns$d=[],__component__$d=normalizeComponent(_sfc_main$d,_sfc_render$d,_sfc_staticRenderFns$d,!1,null,null,null,null);const PlusCircleIcon=__component__$d.exports,_sfc_main$c={};var _sfc_render$c=function(){var U=this,Y=U._self._c;return Y("svg",{staticStyle:{color:"#eef2f6"},attrs:{"aria-hidden":"true",viewBox:"0 0 100 101",fill:"#2D9EFC",xmlns:"http://www.w3.org/2000/svg"}},[Y("path",{attrs:{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}}),Y("path",{attrs:{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"}})])},_sfc_staticRenderFns$c=[],__component__$c=normalizeComponent(_sfc_main$c,_sfc_render$c,_sfc_staticRenderFns$c,!1,null,null,null,null);const SpinnerIcon=__component__$c.exports,_sfc_main$b={};var _sfc_render$b=function(){var U=this,Y=U._self._c;return Y("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"}},[Y("path",{attrs:{"fill-rule":"evenodd",d:"M10.5 3.75a6 6 0 00-5.98 6.496A5.25 5.25 0 006.75 20.25H18a4.5 4.5 0 002.206-8.423 3.75 3.75 0 00-4.133-4.303A6.001 6.001 0 0010.5 3.75zm2.03 5.47a.75.75 0 00-1.06 0l-3 3a.75.75 0 101.06 1.06l1.72-1.72v4.94a.75.75 0 001.5 0v-4.94l1.72 1.72a.75.75 0 101.06-1.06l-3-3z","clip-rule":"evenodd"}})])},_sfc_staticRenderFns$b=[],__component__$b=normalizeComponent(_sfc_main$b,_sfc_render$b,_sfc_staticRenderFns$b,!1,null,null,null,null);const CloudIcon=__component__$b.exports,_sfc_main$a={};var _sfc_render$a=function(){var U=this,Y=U._self._c;return Y("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"}},[Y("path",{attrs:{d:"M12 15a3 3 0 100-6 3 3 0 000 6z"}}),Y("path",{attrs:{"fill-rule":"evenodd",d:"M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 010-1.113zM17.25 12a5.25 5.25 0 11-10.5 0 5.25 5.25 0 0110.5 0z","clip-rule":"evenodd"}})])},_sfc_staticRenderFns$a=[],__component__$a=normalizeComponent(_sfc_main$a,_sfc_render$a,_sfc_staticRenderFns$a,!1,null,null,null,null);const EyeIcon=__component__$a.exports,_sfc_main$9={};var _sfc_render$9=function(){var U=this,Y=U._self._c;return Y("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"}},[Y("path",{attrs:{"fill-rule":"evenodd",d:"M4.25 5.5a.75.75 0 00-.75.75v8.5c0 .414.336.75.75.75h8.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0112.75 17h-8.5A2.25 2.25 0 012 14.75v-8.5A2.25 2.25 0 014.25 4h5a.75.75 0 010 1.5h-5z","clip-rule":"evenodd"}}),Y("path",{attrs:{"fill-rule":"evenodd",d:"M6.194 12.753a.75.75 0 001.06.053L16.5 4.44v2.81a.75.75 0 001.5 0v-4.5a.75.75 0 00-.75-.75h-4.5a.75.75 0 000 1.5h2.553l-9.056 8.194a.75.75 0 00-.053 1.06z","clip-rule":"evenodd"}})])},_sfc_staticRenderFns$9=[],__component__$9=normalizeComponent(_sfc_main$9,_sfc_render$9,_sfc_staticRenderFns$9,!1,null,null,null,null);const LinkIcon=__component__$9.exports,_sfc_main$8={};var _sfc_render$8=function(){var U=this,Y=U._self._c;return Y("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"}},[Y("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}})])},_sfc_staticRenderFns$8=[],__component__$8=normalizeComponent(_sfc_main$8,_sfc_render$8,_sfc_staticRenderFns$8,!1,null,null,null,null);const TrashIcon=__component__$8.exports,_sfc_main$7={};var _sfc_render$7=function(){var U=this,Y=U._self._c;return Y("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"}},[Y("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}}),Y("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}})])},_sfc_staticRenderFns$7=[],__component__$7=normalizeComponent(_sfc_main$7,_sfc_render$7,_sfc_staticRenderFns$7,!1,null,null,null,null);const CogIcon=__component__$7.exports;function mitt(G){return{all:G=G||new Map,on:function(U,Y){var re=G.get(U);re?re.push(Y):G.set(U,[Y])},off:function(U,Y){var re=G.get(U);re&&(Y?re.splice(re.indexOf(Y)>>>0,1):G.set(U,[]))},emit:function(U,Y){var re=G.get(U);re&&re.slice().map(function(oe){oe(Y)}),(re=G.get("*"))&&re.slice().map(function(oe){oe(U,Y)})}}}const emitter=mitt(),_sfc_main$6={components:{CogIcon},inject:["bunnyApiKey","bunnyHostname","bunnyLibrary"],props:{id:String,title:String,assetOptions:[]},data(){return{isOpen:!1,videoTitle:this.title,selectedThumbnails:[]}},methods:{save(){this.title!==this.videoTitle&&(this.$progress.start("title"),this.changeTitle()),this.selectedThumbnails.length>0&&(this.$progress.start("thumbnail"),this.changeThumbnail()),this.isOpen=!1},changeTitle(){const G={method:"POST",url:`https://video.bunnycdn.com/library/${this.bunnyLibrary}/videos/${this.id}`,headers:{Accept:"application/json","content-type":"application/*+json",AccessKey:this.bunnyApiKey},data:'{"title":"'+this.videoTitle+'"}'};axios$1.request(G).then(()=>{this.$toast.success(__("Video title has been updated!")),this.$progress.complete("title"),emitter.emit("load")}).catch(U=>{this.$toast.error(__("An error occured while trying to update the video title.")),this.$progress.complete("title"),console.error(U)})},changeThumbnail(){const G={method:"POST",url:`https://video.bunnycdn.com/library/${this.bunnyLibrary}/videos/${this.id}/thumbnail?thumbnailUrl=${this.selectedThumbnails[0].url}`,headers:{Accept:"application/json",AccessKey:this.bunnyApiKey}};axios$1.request(G).then(()=>{this.$toast.success(__("Thumbnail has been updated!")),this.thumbnailUrl=null,this.$progress.complete("thumbnail"),emitter.emit("load")}).catch(U=>{this.$toast.error(__("An error occured while trying to update the thumbnail.")),this.$progress.complete("thumbnail"),console.error(U)})},selectThumbnail(G){this.selectedThumbnails=[G]}}};var _sfc_render$6=function(){var U=this,Y=U._self._c;return Y("div",[Y("button",{on:{click:function(re){U.isOpen=!0}}},[Y("CogIcon",{staticClass:"size-5"})],1),U.isOpen?Y("modal",{attrs:{name:"settings"},on:{closed:function(re){U.isOpen=!1}}},[Y("div",{staticClass:"flex flex-col h-full"},[Y("header",{staticClass:"text-lg font-semibold px-5 py-3 bg-gray-200 rounded-t-lg flex items-center justify-between border-b"},[U._v(" "+U._s(U.__("Video Settings"))+" ")]),Y("div",{staticClass:"flex-1 px-5 py-6 text-gray"},[Y("div",{staticClass:"px-2 m-0 @container form-group publish-field text-fieldtype w-full"},[Y("label",{staticClass:"block",attrs:{for:"title"}},[U._v(" "+U._s(U.__("Title"))+" ")]),Y("div",{staticClass:"input-group"},[Y("input",{directives:[{name:"model",rawName:"v-model",value:U.videoTitle,expression:"videoTitle"}],staticClass:"input-text",attrs:{type:"text",id:"title",name:"title"},domProps:{value:U.videoTitle},on:{input:function(re){re.target.composing||(U.videoTitle=re.target.value)}}})])]),Y("div",{staticClass:"px-2 m-0 @container form-group publish-field text-fieldtype w-full"},[Y("label",{staticClass:"block",attrs:{for:"thumbnail"}},[U._v(" "+U._s(U.__("Thumbnail"))+" ")]),Y("div",{staticClass:"input-group"},[Y("v-select",{ref:"input",staticClass:"flex-1",attrs:{"input-id":U.fieldId,"append-to-body":"",clearable:!1,disabled:!1,options:U.assetOptions,placeholder:U.__("Select new thumbnail"),searchable:!0,multiple:!1,"reset-on-options-change":!1,"close-on-select":!0,value:U.selectedThumbnails},on:{input:U.selectThumbnail,focus:function(re){return U.$emit("focus")},"search:focus":function(re){return U.$emit("focus")},"search:blur":function(re){return U.$emit("blur")}},scopedSlots:U._u([{key:"option",fn:function({label:re}){return[void 0]}},{key:"selected-option",fn:function({label:re}){return[void 0]}},{key:"no-options",fn:function(){return[Y("div",{staticClass:"text-sm text-gray-700 text-left py-2 px-4",domProps:{textContent:U._s(U.__("No options to choose from."))}})]},proxy:!0}],null,!1,578649661)})],1)])]),Y("div",{staticClass:"px-5 py-3 bg-gray-200 rounded-b-lg border-t flex items-center justify-end text-sm"},[Y("button",{staticClass:"text-gray hover:text-gray-900",domProps:{textContent:U._s(U.__("Cancel"))},on:{click:function(re){U.isOpen=!1}}}),Y("button",{staticClass:"ml-4 btn-primary",class:U.buttonClass,domProps:{textContent:U._s(U.__("Save"))},on:{click:U.save}})])])]):U._e()],1)},_sfc_staticRenderFns$6=[],__component__$6=normalizeComponent(_sfc_main$6,_sfc_render$6,_sfc_staticRenderFns$6,!1,null,null,null,null);const VideoSettings=__component__$6.exports,_sfc_main$5={components:{VideoSettings,CloudIcon,LinkIcon,TrashIcon,SpinnerIcon,EyeIcon},inject:["bunnyApiKey","bunnyHostname","bunnyLibrary","routeEmbed","routeView"],props:{video:Object,assetOptions:Array},data(){return{embedUrl:this.routeEmbed?this.routeEmbed.replace(":video:",this.video.guid):null,viewUrl:this.routeView?this.routeView.replace(":video:",this.video.guid):null,thumbnailUrl:`https://${this.bunnyHostname}/${this.video.guid}/${this.video.thumbnailFileName}`,videoUrl:`https://iframe.mediadelivery.net/play/${this.video.videoLibraryId}/${this.video.guid}`,triggerDeletion:!1}},methods:{confirmDeletion(){this.triggerDeletion=!0},deleteVideo(){this.loading=!0;const G={method:"DELETE",url:`https://video.bunnycdn.com/library/${this.bunnyLibrary}/videos/${this.video.guid}`,headers:{Accept:"application/json",AccessKey:this.bunnyApiKey}};axios$1.request(G).then(()=>{this.cancelDeletion(),this.loading=!1,this.$toast.success(__("Video has been deleted!")),this.getVideos()}).catch(function(U){console.error(U)})},cancelDeletion(){this.triggerDeletion=!1}}};var _sfc_render$5=function(){var U=this,Y=U._self._c;return Y("div",[U.video.status>=4?Y("div",{staticClass:"sm:grid sm:grid-cols-3 overflow-hidden bg-white rounded shadow-xl w-full mb-4"},[Y("a",{attrs:{href:U.videoUrl,target:"_blank"}},[Y("img",{staticClass:"aspect-video inset-0 h-full object-cover w-full",attrs:{src:U.thumbnailUrl}})]),Y("div",{staticClass:"sm:col-span-2 py-2 sm:py-4 px-2 sm:px-6 text-gray-800 flex flex-col justify-between gap-1 sm:shrink"},[Y("div",{staticClass:"flex sm:flex-grow items-start justify-between gap-4 w-full"},[Y("a",{staticClass:"flex-grow font-semibold text-base sm:text-lg leading-tight truncate",attrs:{href:U.videoUrl,target:"_blank"}},[U._v(" "+U._s(U.video.title)+" ")]),Y("div",{staticClass:"flex gap-1"},[Y("VideoSettings",{staticClass:"size-5",attrs:{id:U.video.guid,title:U.video.title,assetOptions:U.assetOptions}}),Y("button",{staticClass:"size-5",on:{click:function(re){return U.confirmDeletion()}}},[Y("TrashIcon",{staticClass:"size-5"})],1)],1)]),Y("p",{staticClass:"flex gap-2 md:gap-4 items-center justify-start text-xs md:text-sm whitespace-nowrap"},[U.viewUrl?Y("a",{staticClass:"flex gap-1 items-center",attrs:{href:U.viewUrl,target:"_blank"}},[U._v(" "+U._s(U.__("Direct Play"))+" "),Y("LinkIcon",{staticClass:"size-4"})],1):U._e(),U.embedUrl?Y("a",{staticClass:"flex gap-1 items-center",attrs:{href:U.embedUrl,target:"_blank"}},[U._v(" "+U._s(U.__("Embed URL"))+" "),Y("LinkIcon",{staticClass:"size-4"})],1):U._e(),Y("a",{staticClass:"flex gap-1 items-center",attrs:{href:U.thumbnailUrl,target:"_blank"}},[U._v(" "+U._s(U.__("Thumbnail"))+" "),Y("LinkIcon",{staticClass:"size-4"})],1)]),Y("div",{staticClass:"text-xs md:text-sm text-gray-600 flex justify-between"},[Y("div",{staticClass:"flex gap-2 items-center"},[Y("CloudIcon",{staticClass:"text-gray-500 size-4"}),U._v(" "+U._s(new Date(U.video.dateUploaded).toLocaleString())+" ")],1),Y("div",{staticClass:"flex gap-2 items-center"},[Y("EyeIcon",{staticClass:"text-gray-500 size-4"}),U._v(" "+U._s(U.video.views)+" ")],1)])])]):Y("div",{staticClass:"flex flex-col overflow-hidden bg-white rounded shadow-xl w-full mb-4 p-6 items-center justify-center"},[Y("h2",{staticClass:"text-lg"},[U._v(" "+U._s(U.__("Video is being processed"))+" – "+U._s(U.video.encodeProgress*2)+"% ")]),Y("p",{staticClass:"text-xs text-gray-600"},[U._v(" "+U._s(U.__("This may take some time."))+" ")]),Y("button",{staticClass:"text-xs text-red-500",on:{click:function(re){return U.confirmDeletion()}}},[U._v(" "+U._s(U.__("Cancel and delete video"))+" ")]),Y("div",{staticClass:"mt-4 mx-auto",attrs:{role:"status"}},[Y("SpinnerIcon",{staticClass:"w-8 h-8 mr-2 animate-spin"}),Y("span",{staticClass:"sr-only"},[U._v(U._s(U.__("Loading...")))])],1)]),U.triggerDeletion?Y("confirmation-modal",{attrs:{title:U.__("Delete video :title",{title:this.video.title}),danger:"true"},on:{confirm:U.deleteVideo,cancel:U.cancelDeletion}}):U._e()],1)},_sfc_staticRenderFns$5=[],__component__$5=normalizeComponent(_sfc_main$5,_sfc_render$5,_sfc_staticRenderFns$5,!1,null,null,null,null);const VideoCard=__component__$5.exports;var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(G){return G&&G.__esModule&&Object.prototype.hasOwnProperty.call(G,"default")?G.default:G}var debounce$6={exports:{}};function debounce$4(G,U=100,Y={}){if(typeof G!="function")throw new TypeError(`Expected the first parameter to be a function, got \`${typeof G}\`.`);if(U<0)throw new RangeError("`wait` must not be negative.");const{immediate:re}=typeof Y=="boolean"?{immediate:Y}:Y;let oe,le,ue,he,fe;function ve(){const Fe=oe,Ee=le;return oe=void 0,le=void 0,fe=G.apply(Fe,Ee),fe}function $e(){const Fe=Date.now()-he;Fe<U&&Fe>=0?ue=setTimeout($e,U-Fe):(ue=void 0,re||(fe=ve()))}const _e=function(...Fe){if(oe&&this!==oe&&Object.getPrototypeOf(this)===Object.getPrototypeOf(oe))throw new Error("Debounced method called with different contexts of the same prototype.");oe=this,le=Fe,he=Date.now();const Ee=re&&!ue;return ue||(ue=setTimeout($e,U)),Ee&&(fe=ve()),fe};return Object.defineProperty(_e,"isPending",{get(){return ue!==void 0}}),_e.clear=()=>{ue&&(clearTimeout(ue),ue=void 0)},_e.flush=()=>{ue&&_e.trigger()},_e.trigger=()=>{fe=ve(),_e.clear()},_e}debounce$6.exports.debounce=debounce$4;debounce$6.exports=debounce$4;var debounceExports=debounce$6.exports;const debounce$5=getDefaultExportFromCjs(debounceExports),_sfc_main$4={components:{PlusCircleIcon,SpinnerIcon,VideoCard},inject:["bunnyApiKey","bunnyLibrary"],data(){return{search:"",loading:!0,polling:null,result:null,page:1,maxPage:1,itemsPerPage:10,assetOptions:[]}},created(){this.getVideos(),this.getAssets(),emitter.on("load",G=>{G&&G.page&&(this.page=G.page),this.getVideos()})},methods:{getAssets(){const G={method:"GET",url:"/cp/bunny/assets/",headers:{Accept:"application/json"}};axios$1.request(G).then(U=>{this.assetOptions=U.data.items}).catch(function(U){console.error(U)})},getVideos(){const G={method:"GET",url:`https://video.bunnycdn.com/library/${this.bunnyLibrary}/videos?page=${this.page}&itemsPerPage=${this.itemsPerPage}&orderBy=date`,headers:{Accept:"application/json",AccessKey:this.bunnyApiKey}};this.search!==""&&(G.url+="&search="+this.search),axios$1.request(G).then(U=>{this.maxPage=Math.ceil(U.data.totalItems/this.itemsPerPage),this.result=U.data,this.loading=!1}).catch(function(U){console.error(U)})},openUpload(){emitter.emit("upload")},debouncedSearch:debounce$5(()=>{emitter.emit("load",{page:1})},500),nextPage(){this.page++,this.page>this.maxPage&&(this.page=1),this.getVideos()},prevPage(){this.page--,this.page<=0&&(this.page=this.maxPage),this.getVideos()}}};var _sfc_render$4=function(){var U=this,Y=U._self._c;return Y("div",[Y("div",{staticClass:"container w-100 lg:w-4/5 mx-auto input-group mb-4"},[Y("input",{directives:[{name:"model",rawName:"v-model",value:U.search,expression:"search"}],staticClass:"input-text",attrs:{type:"text",placeholder:U.__("Search videos")},domProps:{value:U.search},on:{input:[function(re){re.target.composing||(U.search=re.target.value)},U.debouncedSearch]}})]),U.loading?Y("div",{staticClass:"flex items-center"},[Y("div",{staticClass:"mt-4 mx-auto",attrs:{role:"status"}},[Y("SpinnerIcon",{staticClass:"w-8 h-8 mr-2 animate-spin"}),Y("span",{staticClass:"sr-only"},[U._v(" "+U._s(U.__("Loading..."))+" ")])],1)]):!U.loading&&U.result.totalItems>=1?Y("div",[Y("div",{attrs:{id:"card"}},[Y("div",{staticClass:"container w-100 lg:w-4/5 mx-auto"},[Y("div",{staticClass:"flex flex-col"},U._l(U.result.items,function(re){return Y("VideoCard",{key:re.guid,attrs:{video:re,assetOptions:U.assetOptions}})}),1),U.result.totalItems>U.result.items.length?Y("div",{staticClass:"flex items-center justify-between"},[Y("button",{staticClass:"btn-primary",on:{click:U.prevPage}},[U._v(" « ")]),Y("div",[U._v(" "+U._s(U.page)+" / "+U._s(U.maxPage)+" ")]),Y("button",{staticClass:"btn-primary",on:{click:U.nextPage}},[U._v(" » ")])]):U._e()])])]):this.search.length>0?Y("div",{staticClass:"text-center text-sm"},[U._v(" "+U._s(U.__("No videos found."))+" ")]):Y("button",{staticClass:"flex flex-col overflow-hidden border-gray-600 border-dashed border-2 rounded shadow-xl w-full mb-4 p-6 items-center justify-center",on:{click:function(re){return U.openUpload()}}},[Y("h2",{staticClass:"text-xl"},[U._v(" "+U._s(U.__("Upload Video"))+" ")]),Y("PlusCircleIcon",{staticClass:"h-10 w-10"})],1)])},_sfc_staticRenderFns$4=[],__component__$4=normalizeComponent(_sfc_main$4,_sfc_render$4,_sfc_staticRenderFns$4,!1,null,null,null,null);const VideoBrowser=__component__$4.exports,_sfc_main$3={};var _sfc_render$3=function(){var U=this,Y=U._self._c;return Y("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"}},[Y("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v12m6-6H6"}})])},_sfc_staticRenderFns$3=[],__component__$3=normalizeComponent(_sfc_main$3,_sfc_render$3,_sfc_staticRenderFns$3,!1,null,null,null,null);const PlusIcon=__component__$3.exports;function _classPrivateFieldLooseBase$8(G,U){if(!Object.prototype.hasOwnProperty.call(G,U))throw new TypeError("attempted to use private field on non-instance");return G}var id$8=0;function _classPrivateFieldLooseKey$8(G){return"__private_"+id$8+++"_"+G}function insertReplacement(G,U,Y){const re=[];return G.forEach(oe=>typeof oe!="string"?re.push(oe):U[Symbol.split](oe).forEach((le,ue,he)=>{le!==""&&re.push(le),ue<he.length-1&&re.push(Y)})),re}/**
 * Takes a string with placeholder variables like `%{smart_count} file selected`
 * and replaces it with values from options `{smart_count: 5}`
 *
 * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
 * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
 *
 * @param phrase that needs interpolation, with placeholders
 * @param options with values that will be used to replace placeholders
 */function interpolate(G,U){const Y=/\$/g,re="$$$$";let oe=[G];if(U==null)return oe;for(const le of Object.keys(U))if(le!=="_"){let ue=U[le];typeof ue=="string"&&(ue=Y[Symbol.replace](ue,re)),oe=insertReplacement(oe,new RegExp(`%\\{${le}\\}`,"g"),ue)}return oe}const defaultOnMissingKey=G=>{throw new Error(`missing string: ${G}`)};var _onMissingKey=_classPrivateFieldLooseKey$8("onMissingKey"),_apply=_classPrivateFieldLooseKey$8("apply");class Translator{constructor(U,Y){let{onMissingKey:re=defaultOnMissingKey}=Y===void 0?{}:Y;Object.defineProperty(this,_apply,{value:_apply2}),Object.defineProperty(this,_onMissingKey,{writable:!0,value:void 0}),this.locale={strings:{},pluralize(oe){return oe===1?0:1}},Array.isArray(U)?U.forEach(_classPrivateFieldLooseBase$8(this,_apply)[_apply],this):_classPrivateFieldLooseBase$8(this,_apply)[_apply](U),_classPrivateFieldLooseBase$8(this,_onMissingKey)[_onMissingKey]=re}translate(U,Y){return this.translateArray(U,Y).join("")}translateArray(U,Y){let re=this.locale.strings[U];if(re==null&&(_classPrivateFieldLooseBase$8(this,_onMissingKey)[_onMissingKey](U),re=U),typeof re=="object"){if(Y&&typeof Y.smart_count<"u"){const le=this.locale.pluralize(Y.smart_count);return interpolate(re[le],Y)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if(typeof re!="string")throw new Error("string was not a string");return interpolate(re,Y)}}function _apply2(G){if(!(G!=null&&G.strings))return;const U=this.locale;Object.assign(this.locale,{strings:{...U.strings,...G.strings},pluralize:G.pluralize||U.pluralize})}var namespaceEmitter=function(){var U={},Y=U._fns={};U.emit=function(ue,he,fe,ve,$e,_e,Fe){var Ee=re(ue);Ee.length&&oe(ue,Ee,[he,fe,ve,$e,_e,Fe])},U.on=function(ue,he){Y[ue]||(Y[ue]=[]),Y[ue].push(he)},U.once=function(ue,he){function fe(){he.apply(this,arguments),U.off(ue,fe)}this.on(ue,fe)},U.off=function(ue,he){var fe=[];if(ue&&he){var ve=this._fns[ue],$e=0,_e=ve?ve.length:0;for($e;$e<_e;$e++)ve[$e]!==he&&fe.push(ve[$e])}fe.length?this._fns[ue]=fe:delete this._fns[ue]};function re(le){var ue=Y[le]?Y[le]:[],he=le.indexOf(":"),fe=he===-1?[le]:[le.substring(0,he),le.substring(he+1)],ve=Object.keys(Y),$e=0,_e=ve.length;for($e;$e<_e;$e++){var Fe=ve[$e];if(Fe==="*"&&(ue=ue.concat(Y[Fe])),fe.length===2&&fe[0]===Fe){ue=ue.concat(Y[Fe]);break}}return ue}function oe(le,ue,he){var fe=0,ve=ue.length;for(fe;fe<ve&&ue[fe];fe++)ue[fe].event=le,ue[fe].apply(ue[fe],he)}return U};const ee$1=getDefaultExportFromCjs(namespaceEmitter);let urlAlphabet="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",nanoid=(G=21)=>{let U="",Y=G;for(;Y--;)U+=urlAlphabet[Math.random()*64|0];return U};function isObject$3(G){var U=typeof G;return G!=null&&(U=="object"||U=="function")}var isObject_1=isObject$3,freeGlobal$1=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$2=freeGlobal||freeSelf||Function("return this")(),_root=root$2,root$1=_root,now$1=function(){return root$1.Date.now()},now_1=now$1,reWhitespace=/\s/;function trimmedEndIndex$1(G){for(var U=G.length;U--&&reWhitespace.test(G.charAt(U)););return U}var _trimmedEndIndex=trimmedEndIndex$1,trimmedEndIndex=_trimmedEndIndex,reTrimStart=/^\s+/;function baseTrim$1(G){return G&&G.slice(0,trimmedEndIndex(G)+1).replace(reTrimStart,"")}var _baseTrim=baseTrim$1,root=_root,Symbol$3=root.Symbol,_Symbol=Symbol$3,Symbol$2=_Symbol,objectProto$1=Object.prototype,hasOwnProperty=objectProto$1.hasOwnProperty,nativeObjectToString$1=objectProto$1.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag$1(G){var U=hasOwnProperty.call(G,symToStringTag$1),Y=G[symToStringTag$1];try{G[symToStringTag$1]=void 0;var re=!0}catch{}var oe=nativeObjectToString$1.call(G);return re&&(U?G[symToStringTag$1]=Y:delete G[symToStringTag$1]),oe}var _getRawTag=getRawTag$1,objectProto=Object.prototype,nativeObjectToString=objectProto.toString;function objectToString$1(G){return nativeObjectToString.call(G)}var _objectToString=objectToString$1,Symbol$1=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag$1(G){return G==null?G===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(G)?getRawTag(G):objectToString(G)}var _baseGetTag=baseGetTag$1;function isObjectLike$1(G){return G!=null&&typeof G=="object"}var isObjectLike_1=isObjectLike$1,baseGetTag=_baseGetTag,isObjectLike=isObjectLike_1,symbolTag="[object Symbol]";function isSymbol$1(G){return typeof G=="symbol"||isObjectLike(G)&&baseGetTag(G)==symbolTag}var isSymbol_1=isSymbol$1,baseTrim=_baseTrim,isObject$2=isObject_1,isSymbol=isSymbol_1,NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber$1(G){if(typeof G=="number")return G;if(isSymbol(G))return NAN;if(isObject$2(G)){var U=typeof G.valueOf=="function"?G.valueOf():G;G=isObject$2(U)?U+"":U}if(typeof G!="string")return G===0?G:+G;G=baseTrim(G);var Y=reIsBinary.test(G);return Y||reIsOctal.test(G)?freeParseInt(G.slice(2),Y?2:8):reIsBadHex.test(G)?NAN:+G}var toNumber_1=toNumber$1,isObject$1=isObject_1,now=now_1,toNumber=toNumber_1,FUNC_ERROR_TEXT$1="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce$2(G,U,Y){var re,oe,le,ue,he,fe,ve=0,$e=!1,_e=!1,Fe=!0;if(typeof G!="function")throw new TypeError(FUNC_ERROR_TEXT$1);U=toNumber(U)||0,isObject$1(Y)&&($e=!!Y.leading,_e="maxWait"in Y,le=_e?nativeMax(toNumber(Y.maxWait)||0,U):le,Fe="trailing"in Y?!!Y.trailing:Fe);function Ee(je){var He=re,Ve=oe;return re=oe=void 0,ve=je,ue=G.apply(Ve,He),ue}function Se(je){return ve=je,he=setTimeout(Re,U),$e?Ee(je):ue}function Ae(je){var He=je-fe,Ve=je-ve,ze=U-He;return _e?nativeMin(ze,le-Ve):ze}function Te(je){var He=je-fe,Ve=je-ve;return fe===void 0||He>=U||He<0||_e&&Ve>=le}function Re(){var je=now();if(Te(je))return Ue(je);he=setTimeout(Re,Ae(je))}function Ue(je){return he=void 0,Fe&&re?Ee(je):(re=oe=void 0,ue)}function Le(){he!==void 0&&clearTimeout(he),ve=0,re=fe=oe=he=void 0}function Me(){return he===void 0?ue:Ue(now())}function De(){var je=now(),He=Te(je);if(re=arguments,oe=this,fe=je,He){if(he===void 0)return Se(fe);if(_e)return clearTimeout(he),he=setTimeout(Re,U),Ee(fe)}return he===void 0&&(he=setTimeout(Re,U)),ue}return De.cancel=Le,De.flush=Me,De}var debounce_1=debounce$2;const debounce$3=getDefaultExportFromCjs(debounce_1);var debounce$1=debounce_1,isObject=isObject_1,FUNC_ERROR_TEXT="Expected a function";function throttle(G,U,Y){var re=!0,oe=!0;if(typeof G!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject(Y)&&(re="leading"in Y?!!Y.leading:re,oe="trailing"in Y?!!Y.trailing:oe),debounce$1(G,U,{leading:re,maxWait:U,trailing:oe})}var throttle_1=throttle;const throttle$1=getDefaultExportFromCjs(throttle_1);function _classPrivateFieldLooseBase$7(G,U){if(!Object.prototype.hasOwnProperty.call(G,U))throw new TypeError("attempted to use private field on non-instance");return G}var id$7=0;function _classPrivateFieldLooseKey$7(G){return"__private_"+id$7+++"_"+G}const packageJson$6={version:"3.2.2"};var _callbacks=_classPrivateFieldLooseKey$7("callbacks"),_publish=_classPrivateFieldLooseKey$7("publish");class DefaultStore{constructor(){Object.defineProperty(this,_publish,{value:_publish2}),this.state={},Object.defineProperty(this,_callbacks,{writable:!0,value:new Set})}getState(){return this.state}setState(U){const Y={...this.state},re={...this.state,...U};this.state=re,_classPrivateFieldLooseBase$7(this,_publish)[_publish](Y,re,U)}subscribe(U){return _classPrivateFieldLooseBase$7(this,_callbacks)[_callbacks].add(U),()=>{_classPrivateFieldLooseBase$7(this,_callbacks)[_callbacks].delete(U)}}}function _publish2(){for(var G=arguments.length,U=new Array(G),Y=0;Y<G;Y++)U[Y]=arguments[Y];_classPrivateFieldLooseBase$7(this,_callbacks)[_callbacks].forEach(re=>{re(...U)})}DefaultStore.VERSION=packageJson$6.version;function getFileNameAndExtension(G){const U=G.lastIndexOf(".");return U===-1||U===G.length-1?{name:G,extension:void 0}:{name:G.slice(0,U),extension:G.slice(U+1)}}const mimeTypes={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function getFileType(G){var U;if(G.type)return G.type;const Y=G.name?(U=getFileNameAndExtension(G.name).extension)==null?void 0:U.toLowerCase():null;return Y&&Y in mimeTypes?mimeTypes[Y]:"application/octet-stream"}function encodeCharacter(G){return G.charCodeAt(0).toString(32)}function encodeFilename(G){let U="";return G.replace(/[^A-Z0-9]/gi,Y=>(U+=`-${encodeCharacter(Y)}`,"/"))+U}function generateFileID(G,U){let Y=U||"uppy";return typeof G.name=="string"&&(Y+=`-${encodeFilename(G.name.toLowerCase())}`),G.type!==void 0&&(Y+=`-${G.type}`),G.meta&&typeof G.meta.relativePath=="string"&&(Y+=`-${encodeFilename(G.meta.relativePath.toLowerCase())}`),G.data.size!==void 0&&(Y+=`-${G.data.size}`),G.data.lastModified!==void 0&&(Y+=`-${G.data.lastModified}`),Y}function hasFileStableId(G){return!G.isRemote||!G.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(G.remote.provider)}function getSafeFileId(G,U){if(hasFileStableId(G))return G.id;const Y=getFileType(G);return generateFileID({...G,type:Y},U)}function supportsUploadProgress(G){if(G==null&&typeof navigator<"u"&&(G=navigator.userAgent),!G)return!0;const U=/Edge\/(\d+\.\d+)/.exec(G);if(!U)return!0;const re=U[1].split(".",2),oe=parseInt(re[0],10),le=parseInt(re[1],10);return oe<15||oe===15&&le<15063||oe>18||oe===18&&le>=18218}function getFileName(G,U){return U.name?U.name:G.split("/")[0]==="image"?`${G.split("/")[0]}.${G.split("/")[1]}`:"noname"}function pad(G){return G<10?`0${G}`:G.toString()}function getTimeStamp(){const G=new Date,U=pad(G.getHours()),Y=pad(G.getMinutes()),re=pad(G.getSeconds());return`${U}:${Y}:${re}`}const justErrorsLogger={debug:()=>{},warn:()=>{},error:function(){for(var G=arguments.length,U=new Array(G),Y=0;Y<G;Y++)U[Y]=arguments[Y];return console.error(`[Uppy] [${getTimeStamp()}]`,...U)}},debugLogger={debug:function(){for(var G=arguments.length,U=new Array(G),Y=0;Y<G;Y++)U[Y]=arguments[Y];return console.debug(`[Uppy] [${getTimeStamp()}]`,...U)},warn:function(){for(var G=arguments.length,U=new Array(G),Y=0;Y<G;Y++)U[Y]=arguments[Y];return console.warn(`[Uppy] [${getTimeStamp()}]`,...U)},error:function(){for(var G=arguments.length,U=new Array(G),Y=0;Y<G;Y++)U[Y]=arguments[Y];return console.error(`[Uppy] [${getTimeStamp()}]`,...U)}};var prettierBytes=function(U){if(typeof U!="number"||Number.isNaN(U))throw new TypeError(`Expected a number, got ${typeof U}`);const Y=U<0;let re=Math.abs(U);if(Y&&(re=-re),re===0)return"0 B";const oe=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],le=Math.min(Math.floor(Math.log(re)/Math.log(1024)),oe.length-1),ue=Number(re/1024**le),he=oe[le];return`${ue>=10||ue%1===0?Math.round(ue):ue.toFixed(1)} ${he}`};const prettierBytes$1=getDefaultExportFromCjs(prettierBytes);function WildcardMatcher(G,U){this.text=G=G||"",this.hasWild=~G.indexOf("*"),this.separator=U,this.parts=G.split(U)}WildcardMatcher.prototype.match=function(G){var U=!0,Y=this.parts,re,oe=Y.length,le;if(typeof G=="string"||G instanceof String)if(!this.hasWild&&this.text!=G)U=!1;else{for(le=(G||"").split(this.separator),re=0;U&&re<oe;re++)Y[re]!=="*"&&(re<le.length?U=Y[re]===le[re]:U=!1);U=U&&le}else if(typeof G.splice=="function")for(U=[],re=G.length;re--;)this.match(G[re])&&(U[U.length]=G[re]);else if(typeof G=="object"){U={};for(var ue in G)this.match(ue)&&(U[ue]=G[ue])}return U};var wildcard$1=function(G,U,Y){var re=new WildcardMatcher(G,Y||/[\/\.]/);return typeof U<"u"?re.match(U):re},wildcard=wildcard$1,reMimePartSplit=/[\/\+\.]/,mimeMatch=function(G,U){function Y(re){var oe=wildcard(re,G,reMimePartSplit);return oe&&oe.length>=2}return U?Y(U.split(";")[0]):Y};const match=getDefaultExportFromCjs(mimeMatch),defaultOptions$6={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]};class RestrictionError extends Error{constructor(U,Y){var re;super(U),this.isRestriction=!0,this.isUserFacing=(re=Y==null?void 0:Y.isUserFacing)!=null?re:!0,Y!=null&&Y.file&&(this.file=Y.file)}}class Restricter{constructor(U,Y){this.getI18n=Y,this.getOpts=()=>{var re;const oe=U();if(((re=oe.restrictions)==null?void 0:re.allowedFileTypes)!=null&&!Array.isArray(oe.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return oe}}validateAggregateRestrictions(U,Y){const{maxTotalFileSize:re,maxNumberOfFiles:oe}=this.getOpts().restrictions;if(oe&&U.filter(ue=>!ue.isGhost).length+Y.length>oe)throw new RestrictionError(`${this.getI18n()("youCanOnlyUploadX",{smart_count:oe})}`);if(re){const le=[...U,...Y].reduce((ue,he)=>{var fe;return ue+((fe=he.size)!=null?fe:0)},0);if(le>re)throw new RestrictionError(this.getI18n()("aggregateExceedsSize",{sizeAllowed:prettierBytes$1(re),size:prettierBytes$1(le)}))}}validateSingleFile(U){const{maxFileSize:Y,minFileSize:re,allowedFileTypes:oe}=this.getOpts().restrictions;if(oe&&!oe.some(ue=>ue.includes("/")?U.type?match(U.type.replace(/;.*?$/,""),ue):!1:ue[0]==="."&&U.extension?U.extension.toLowerCase()===ue.slice(1).toLowerCase():!1)){const ue=oe.join(", ");throw new RestrictionError(this.getI18n()("youCanOnlyUploadFileTypes",{types:ue}),{file:U})}if(Y&&U.size!=null&&U.size>Y)throw new RestrictionError(this.getI18n()("exceedsSize",{size:prettierBytes$1(Y),file:U.name}),{file:U});if(re&&U.size!=null&&U.size<re)throw new RestrictionError(this.getI18n()("inferiorSize",{size:prettierBytes$1(re)}),{file:U})}validate(U,Y){Y.forEach(re=>{this.validateSingleFile(re)}),this.validateAggregateRestrictions(U,Y)}validateMinNumberOfFiles(U){const{minNumberOfFiles:Y}=this.getOpts().restrictions;if(Y&&Object.keys(U).length<Y)throw new RestrictionError(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:Y}))}getMissingRequiredMetaFields(U){const Y=new RestrictionError(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:U.name})),{requiredMetaFields:re}=this.getOpts().restrictions,oe=[];for(const le of re)(!Object.hasOwn(U.meta,le)||U.meta[le]==="")&&oe.push(le);return{missingFields:oe,error:Y}}}const locale$3={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed"}};let _Symbol$for$1,_Symbol$for2;function _classPrivateFieldLooseBase$6(G,U){if(!Object.prototype.hasOwnProperty.call(G,U))throw new TypeError("attempted to use private field on non-instance");return G}var id$6=0;function _classPrivateFieldLooseKey$6(G){return"__private_"+id$6+++"_"+G}const packageJson$5={version:"3.13.1"},defaultUploadState={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null};var _plugins=_classPrivateFieldLooseKey$6("plugins"),_restricter=_classPrivateFieldLooseKey$6("restricter"),_storeUnsubscribe=_classPrivateFieldLooseKey$6("storeUnsubscribe"),_emitter=_classPrivateFieldLooseKey$6("emitter"),_preProcessors=_classPrivateFieldLooseKey$6("preProcessors"),_uploaders=_classPrivateFieldLooseKey$6("uploaders"),_postProcessors=_classPrivateFieldLooseKey$6("postProcessors"),_informAndEmit=_classPrivateFieldLooseKey$6("informAndEmit"),_checkRequiredMetaFieldsOnFile=_classPrivateFieldLooseKey$6("checkRequiredMetaFieldsOnFile"),_checkRequiredMetaFields=_classPrivateFieldLooseKey$6("checkRequiredMetaFields"),_assertNewUploadAllowed=_classPrivateFieldLooseKey$6("assertNewUploadAllowed"),_transformFile=_classPrivateFieldLooseKey$6("transformFile"),_startIfAutoProceed=_classPrivateFieldLooseKey$6("startIfAutoProceed"),_checkAndUpdateFileState=_classPrivateFieldLooseKey$6("checkAndUpdateFileState"),_addListeners=_classPrivateFieldLooseKey$6("addListeners"),_updateOnlineStatus=_classPrivateFieldLooseKey$6("updateOnlineStatus"),_requestClientById=_classPrivateFieldLooseKey$6("requestClientById"),_createUpload=_classPrivateFieldLooseKey$6("createUpload"),_getUpload=_classPrivateFieldLooseKey$6("getUpload"),_removeUpload=_classPrivateFieldLooseKey$6("removeUpload"),_runUpload=_classPrivateFieldLooseKey$6("runUpload");_Symbol$for$1=Symbol.for("uppy test: getPlugins");_Symbol$for2=Symbol.for("uppy test: createUpload");class Uppy{constructor(U){Object.defineProperty(this,_runUpload,{value:_runUpload2}),Object.defineProperty(this,_removeUpload,{value:_removeUpload2}),Object.defineProperty(this,_getUpload,{value:_getUpload2}),Object.defineProperty(this,_createUpload,{value:_createUpload2}),Object.defineProperty(this,_addListeners,{value:_addListeners2}),Object.defineProperty(this,_checkAndUpdateFileState,{value:_checkAndUpdateFileState2}),Object.defineProperty(this,_startIfAutoProceed,{value:_startIfAutoProceed2}),Object.defineProperty(this,_transformFile,{value:_transformFile2}),Object.defineProperty(this,_assertNewUploadAllowed,{value:_assertNewUploadAllowed2}),Object.defineProperty(this,_checkRequiredMetaFields,{value:_checkRequiredMetaFields2}),Object.defineProperty(this,_checkRequiredMetaFieldsOnFile,{value:_checkRequiredMetaFieldsOnFile2}),Object.defineProperty(this,_informAndEmit,{value:_informAndEmit2}),Object.defineProperty(this,_plugins,{writable:!0,value:Object.create(null)}),Object.defineProperty(this,_restricter,{writable:!0,value:void 0}),Object.defineProperty(this,_storeUnsubscribe,{writable:!0,value:void 0}),Object.defineProperty(this,_emitter,{writable:!0,value:ee$1()}),Object.defineProperty(this,_preProcessors,{writable:!0,value:new Set}),Object.defineProperty(this,_uploaders,{writable:!0,value:new Set}),Object.defineProperty(this,_postProcessors,{writable:!0,value:new Set}),this.scheduledAutoProceed=null,this.wasOffline=!1,this.calculateProgress=throttle$1((oe,le)=>{const ue=this.getFile(oe==null?void 0:oe.id);if(oe==null||!ue){this.log(`Not setting progress for a file that has been removed: ${oe==null?void 0:oe.id}`);return}if(ue.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${oe.id}`);return}const he=Number.isFinite(le.bytesTotal)&&le.bytesTotal>0;this.setFileState(oe.id,{progress:{...ue.progress,bytesUploaded:le.bytesUploaded,bytesTotal:le.bytesTotal,percentage:he?Math.round(le.bytesUploaded/le.bytesTotal*100):0}}),this.calculateTotalProgress()},500,{leading:!0,trailing:!0}),Object.defineProperty(this,_updateOnlineStatus,{writable:!0,value:this.updateOnlineStatus.bind(this)}),Object.defineProperty(this,_requestClientById,{writable:!0,value:new Map}),this.defaultLocale=locale$3;const Y={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:defaultOptions$6,meta:{},onBeforeFileAdded:(oe,le)=>!Object.hasOwn(le,oe.id),onBeforeUpload:oe=>oe,store:new DefaultStore,logger:justErrorsLogger,infoTimeout:5e3},re={...Y,...U};this.opts={...re,restrictions:{...Y.restrictions,...U&&U.restrictions}},U&&U.logger&&U.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):U&&U.debug&&(this.opts.logger=debugLogger),this.log(`Using Core v${Uppy.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({...defaultUploadState,plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:supportsUploadProgress(),individualCancellation:!0,resumableUploads:!1},meta:{...this.opts.meta},info:[]}),_classPrivateFieldLooseBase$6(this,_restricter)[_restricter]=new Restricter(()=>this.opts,()=>this.i18n),_classPrivateFieldLooseBase$6(this,_storeUnsubscribe)[_storeUnsubscribe]=this.store.subscribe((oe,le,ue)=>{this.emit("state-update",oe,le,ue),this.updateAll(le)}),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),_classPrivateFieldLooseBase$6(this,_addListeners)[_addListeners]()}emit(U){for(var Y=arguments.length,re=new Array(Y>1?Y-1:0),oe=1;oe<Y;oe++)re[oe-1]=arguments[oe];_classPrivateFieldLooseBase$6(this,_emitter)[_emitter].emit(U,...re)}on(U,Y){return _classPrivateFieldLooseBase$6(this,_emitter)[_emitter].on(U,Y),this}once(U,Y){return _classPrivateFieldLooseBase$6(this,_emitter)[_emitter].once(U,Y),this}off(U,Y){return _classPrivateFieldLooseBase$6(this,_emitter)[_emitter].off(U,Y),this}updateAll(U){this.iteratePlugins(Y=>{Y.update(U)})}setState(U){this.store.setState(U)}getState(){return this.store.getState()}patchFilesState(U){const Y=this.getState().files;this.setState({files:{...Y,...Object.fromEntries(Object.entries(U).map(re=>{let[oe,le]=re;return[oe,{...Y[oe],...le}]}))}})}setFileState(U,Y){if(!this.getState().files[U])throw new Error(`Can’t set state for ${U} (the file could have been removed)`);this.patchFilesState({[U]:Y})}i18nInit(){const U=re=>this.log(`Missing i18n string: ${re}`,"error"),Y=new Translator([this.defaultLocale,this.opts.locale],{onMissingKey:U});this.i18n=Y.translate.bind(Y),this.i18nArray=Y.translateArray.bind(Y),this.locale=Y.locale}setOptions(U){this.opts={...this.opts,...U,restrictions:{...this.opts.restrictions,...U==null?void 0:U.restrictions}},U.meta&&this.setMeta(U.meta),this.i18nInit(),U.locale&&this.iteratePlugins(Y=>{Y.setOptions(U)}),this.setState(void 0)}resetProgress(){const U={percentage:0,bytesUploaded:0,uploadComplete:!1,uploadStarted:null},Y={...this.getState().files},re={};Object.keys(Y).forEach(oe=>{re[oe]={...Y[oe],progress:{...Y[oe].progress,...U}}}),this.setState({files:re,...defaultUploadState}),this.emit("reset-progress")}clearUploadedFiles(){const{capabilities:U,currentUploads:Y}=this.getState();if(Object.keys(Y).length>0&&!U.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState({...defaultUploadState,files:{}})}addPreProcessor(U){_classPrivateFieldLooseBase$6(this,_preProcessors)[_preProcessors].add(U)}removePreProcessor(U){return _classPrivateFieldLooseBase$6(this,_preProcessors)[_preProcessors].delete(U)}addPostProcessor(U){_classPrivateFieldLooseBase$6(this,_postProcessors)[_postProcessors].add(U)}removePostProcessor(U){return _classPrivateFieldLooseBase$6(this,_postProcessors)[_postProcessors].delete(U)}addUploader(U){_classPrivateFieldLooseBase$6(this,_uploaders)[_uploaders].add(U)}removeUploader(U){return _classPrivateFieldLooseBase$6(this,_uploaders)[_uploaders].delete(U)}setMeta(U){const Y={...this.getState().meta,...U},re={...this.getState().files};Object.keys(re).forEach(oe=>{re[oe]={...re[oe],meta:{...re[oe].meta,...U}}}),this.log("Adding metadata:"),this.log(U),this.setState({meta:Y,files:re})}setFileMeta(U,Y){const re={...this.getState().files};if(!re[U]){this.log("Was trying to set metadata for a file that has been removed: ",U);return}const oe={...re[U].meta,...Y};re[U]={...re[U],meta:oe},this.setState({files:re})}getFile(U){return this.getState().files[U]}getFiles(){const{files:U}=this.getState();return Object.values(U)}getFilesByIds(U){return U.map(Y=>this.getFile(Y))}getObjectOfFilesPerState(){const{files:U,totalProgress:Y,error:re}=this.getState(),oe=Object.values(U),le=[],ue=[],he=[],fe=[],ve=[],$e=[],_e=[],Fe=[],Ee=[];for(const Se of oe){const{progress:Ae}=Se;!Ae.uploadComplete&&Ae.uploadStarted&&(le.push(Se),Se.isPaused||Fe.push(Se)),Ae.uploadStarted||ue.push(Se),(Ae.uploadStarted||Ae.preprocess||Ae.postprocess)&&he.push(Se),Ae.uploadStarted&&fe.push(Se),Se.isPaused&&ve.push(Se),Ae.uploadComplete&&$e.push(Se),Se.error&&_e.push(Se),(Ae.preprocess||Ae.postprocess)&&Ee.push(Se)}return{newFiles:ue,startedFiles:he,uploadStartedFiles:fe,pausedFiles:ve,completeFiles:$e,erroredFiles:_e,inProgressFiles:le,inProgressNotPausedFiles:Fe,processingFiles:Ee,isUploadStarted:fe.length>0,isAllComplete:Y===100&&$e.length===oe.length&&Ee.length===0,isAllErrored:!!re&&_e.length===oe.length,isAllPaused:le.length!==0&&ve.length===le.length,isUploadInProgress:le.length>0,isSomeGhost:oe.some(Se=>Se.isGhost)}}validateRestrictions(U,Y){Y===void 0&&(Y=this.getFiles());try{_classPrivateFieldLooseBase$6(this,_restricter)[_restricter].validate(Y,[U])}catch(re){return re}return null}checkIfFileAlreadyExists(U){const{files:Y}=this.getState();return!!(Y[U]&&!Y[U].isGhost)}addFile(U){_classPrivateFieldLooseBase$6(this,_assertNewUploadAllowed)[_assertNewUploadAllowed](U);const{nextFilesState:Y,validFilesToAdd:re,errors:oe}=_classPrivateFieldLooseBase$6(this,_checkAndUpdateFileState)[_checkAndUpdateFileState]([U]),le=oe.filter(he=>he.isRestriction);if(_classPrivateFieldLooseBase$6(this,_informAndEmit)[_informAndEmit](le),oe.length>0)throw oe[0];this.setState({files:Y});const[ue]=re;return this.emit("file-added",ue),this.emit("files-added",re),this.log(`Added file: ${ue.name}, ${ue.id}, mime type: ${ue.type}`),_classPrivateFieldLooseBase$6(this,_startIfAutoProceed)[_startIfAutoProceed](),ue.id}addFiles(U){_classPrivateFieldLooseBase$6(this,_assertNewUploadAllowed)[_assertNewUploadAllowed]();const{nextFilesState:Y,validFilesToAdd:re,errors:oe}=_classPrivateFieldLooseBase$6(this,_checkAndUpdateFileState)[_checkAndUpdateFileState](U),le=oe.filter(he=>he.isRestriction);_classPrivateFieldLooseBase$6(this,_informAndEmit)[_informAndEmit](le);const ue=oe.filter(he=>!he.isRestriction);if(ue.length>0){let he=`Multiple errors occurred while adding files:
`;if(ue.forEach(fe=>{he+=`
 * ${fe.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:ue.length}),details:he},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(ue,he);{const fe=new Error(he);throw fe.errors=ue,fe}}this.setState({files:Y}),re.forEach(he=>{this.emit("file-added",he)}),this.emit("files-added",re),re.length>5?this.log(`Added batch of ${re.length} files`):Object.values(re).forEach(he=>{this.log(`Added file: ${he.name}
 id: ${he.id}
 type: ${he.type}`)}),re.length>0&&_classPrivateFieldLooseBase$6(this,_startIfAutoProceed)[_startIfAutoProceed]()}removeFiles(U,Y){const{files:re,currentUploads:oe}=this.getState(),le={...re},ue={...oe},he=Object.create(null);U.forEach(_e=>{re[_e]&&(he[_e]=re[_e],delete le[_e])});function fe(_e){return he[_e]===void 0}Object.keys(ue).forEach(_e=>{const Fe=oe[_e].fileIDs.filter(fe);if(Fe.length===0){delete ue[_e];return}const{capabilities:Ee}=this.getState();if(Fe.length!==oe[_e].fileIDs.length&&!Ee.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");ue[_e]={...oe[_e],fileIDs:Fe}});const ve={currentUploads:ue,files:le};Object.keys(le).length===0&&(ve.allowNewUpload=!0,ve.error=null,ve.recoveredState=null),this.setState(ve),this.calculateTotalProgress();const $e=Object.keys(he);$e.forEach(_e=>{this.emit("file-removed",he[_e],Y)}),$e.length>5?this.log(`Removed ${$e.length} files`):this.log(`Removed files: ${$e.join(", ")}`)}removeFile(U,Y){this.removeFiles([U],Y)}pauseResume(U){if(!this.getState().capabilities.resumableUploads||this.getFile(U).progress.uploadComplete)return;const re=!(this.getFile(U).isPaused||!1);return this.setFileState(U,{isPaused:re}),this.emit("upload-pause",U,re),re}pauseAll(){const U={...this.getState().files};Object.keys(U).filter(re=>!U[re].progress.uploadComplete&&U[re].progress.uploadStarted).forEach(re=>{const oe={...U[re],isPaused:!0};U[re]=oe}),this.setState({files:U}),this.emit("pause-all")}resumeAll(){const U={...this.getState().files};Object.keys(U).filter(re=>!U[re].progress.uploadComplete&&U[re].progress.uploadStarted).forEach(re=>{const oe={...U[re],isPaused:!1,error:null};U[re]=oe}),this.setState({files:U}),this.emit("resume-all")}retryAll(){const U={...this.getState().files},Y=Object.keys(U).filter(oe=>U[oe].error);if(Y.forEach(oe=>{const le={...U[oe],isPaused:!1,error:null};U[oe]=le}),this.setState({files:U,error:null}),this.emit("retry-all",Y),Y.length===0)return Promise.resolve({successful:[],failed:[]});const re=_classPrivateFieldLooseBase$6(this,_createUpload)[_createUpload](Y,{forceAllowNewUpload:!0});return _classPrivateFieldLooseBase$6(this,_runUpload)[_runUpload](re)}cancelAll(U){let{reason:Y="user"}=U===void 0?{}:U;if(this.emit("cancel-all",{reason:Y}),Y==="user"){const{files:re}=this.getState(),oe=Object.keys(re);oe.length&&this.removeFiles(oe,"cancel-all"),this.setState(defaultUploadState)}}retryUpload(U){this.setFileState(U,{error:null,isPaused:!1}),this.emit("upload-retry",U);const Y=_classPrivateFieldLooseBase$6(this,_createUpload)[_createUpload]([U],{forceAllowNewUpload:!0});return _classPrivateFieldLooseBase$6(this,_runUpload)[_runUpload](Y)}logout(){this.iteratePlugins(U=>{var Y;(Y=U.provider)==null||Y.logout==null||Y.logout()})}calculateTotalProgress(){const Y=this.getFiles().filter(ve=>ve.progress.uploadStarted||ve.progress.preprocess||ve.progress.postprocess);if(Y.length===0){this.emit("progress",0),this.setState({totalProgress:0});return}const re=Y.filter(ve=>ve.progress.bytesTotal!=null),oe=Y.filter(ve=>ve.progress.bytesTotal==null);if(re.length===0){const ve=Y.length*100,$e=oe.reduce((Fe,Ee)=>Fe+Ee.progress.percentage,0),_e=Math.round($e/ve*100);this.setState({totalProgress:_e});return}let le=re.reduce((ve,$e)=>{var _e;return ve+((_e=$e.progress.bytesTotal)!=null?_e:0)},0);const ue=le/re.length;le+=ue*oe.length;let he=0;re.forEach(ve=>{he+=ve.progress.bytesUploaded}),oe.forEach(ve=>{he+=ue*(ve.progress.percentage||0)/100});let fe=le===0?0:Math.round(he/le*100);fe>100&&(fe=100),this.setState({totalProgress:fe}),this.emit("progress",fe)}updateOnlineStatus(){var U;((U=window.navigator.onLine)!=null?U:!0)?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(U,Y){if(typeof U!="function"){const ue=`Expected a plugin class, but got ${U===null?"null":typeof U}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(ue)}const re=new U(this,Y),oe=re.id;if(!oe)throw new Error("Your plugin must have an id");if(!re.type)throw new Error("Your plugin must have a type");const le=this.getPlugin(oe);if(le){const ue=`Already found a plugin named '${le.id}'. Tried to use: '${oe}'.
Uppy plugins must have unique \`id\` options. See https://uppy.io/docs/plugins/#id.`;throw new Error(ue)}return U.VERSION&&this.log(`Using ${oe} v${U.VERSION}`),re.type in _classPrivateFieldLooseBase$6(this,_plugins)[_plugins]?_classPrivateFieldLooseBase$6(this,_plugins)[_plugins][re.type].push(re):_classPrivateFieldLooseBase$6(this,_plugins)[_plugins][re.type]=[re],re.install(),this.emit("plugin-added",re),this}getPlugin(U){for(const Y of Object.values(_classPrivateFieldLooseBase$6(this,_plugins)[_plugins])){const re=Y.find(oe=>oe.id===U);if(re!=null)return re}}[_Symbol$for$1](U){return _classPrivateFieldLooseBase$6(this,_plugins)[_plugins][U]}iteratePlugins(U){Object.values(_classPrivateFieldLooseBase$6(this,_plugins)[_plugins]).flat(1).forEach(U)}removePlugin(U){this.log(`Removing plugin ${U.id}`),this.emit("plugin-remove",U),U.uninstall&&U.uninstall();const Y=_classPrivateFieldLooseBase$6(this,_plugins)[_plugins][U.type],re=Y.findIndex(ue=>ue.id===U.id);re!==-1&&Y.splice(re,1);const le={plugins:{...this.getState().plugins,[U.id]:void 0}};this.setState(le)}close(U){let{reason:Y}=U===void 0?{}:U;this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll({reason:Y}),_classPrivateFieldLooseBase$6(this,_storeUnsubscribe)[_storeUnsubscribe](),this.iteratePlugins(re=>{this.removePlugin(re)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",_classPrivateFieldLooseBase$6(this,_updateOnlineStatus)[_updateOnlineStatus]),window.removeEventListener("offline",_classPrivateFieldLooseBase$6(this,_updateOnlineStatus)[_updateOnlineStatus]))}hideInfo(){const{info:U}=this.getState();this.setState({info:U.slice(1)}),this.emit("info-hidden")}info(U,Y,re){Y===void 0&&(Y="info"),re===void 0&&(re=3e3);const oe=typeof U=="object";this.setState({info:[...this.getState().info,{type:Y,message:oe?U.message:U,details:oe?U.details:null}]}),setTimeout(()=>this.hideInfo(),re),this.emit("info-visible")}log(U,Y){const{logger:re}=this.opts;switch(Y){case"error":re.error(U);break;case"warning":re.warn(U);break;default:re.debug(U);break}}registerRequestClient(U,Y){_classPrivateFieldLooseBase$6(this,_requestClientById)[_requestClientById].set(U,Y)}getRequestClientForFile(U){if(!U.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${U.id}`);const Y=_classPrivateFieldLooseBase$6(this,_requestClientById)[_requestClientById].get(U.remote.requestClientId);if(Y==null)throw new Error(`requestClientId "${U.remote.requestClientId}" not registered for file "${U.id}"`);return Y}restore(U){return this.log(`Core: attempting to restore upload "${U}"`),this.getState().currentUploads[U]?_classPrivateFieldLooseBase$6(this,_runUpload)[_runUpload](U):(_classPrivateFieldLooseBase$6(this,_removeUpload)[_removeUpload](U),Promise.reject(new Error("Nonexistent upload")))}[_Symbol$for2](){return _classPrivateFieldLooseBase$6(this,_createUpload)[_createUpload](...arguments)}addResultData(U,Y){if(!_classPrivateFieldLooseBase$6(this,_getUpload)[_getUpload](U)){this.log(`Not setting result for an upload that has been removed: ${U}`);return}const{currentUploads:re}=this.getState(),oe={...re[U],result:{...re[U].result,...Y}};this.setState({currentUploads:{...re,[U]:oe}})}upload(){var U;(U=_classPrivateFieldLooseBase$6(this,_plugins)[_plugins].uploader)!=null&&U.length||this.log("No uploader type plugins are used","warning");let{files:Y}=this.getState();const re=this.opts.onBeforeUpload(Y);return re===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(re&&typeof re=="object"&&(Y=re,this.setState({files:Y})),Promise.resolve().then(()=>_classPrivateFieldLooseBase$6(this,_restricter)[_restricter].validateMinNumberOfFiles(Y)).catch(oe=>{throw _classPrivateFieldLooseBase$6(this,_informAndEmit)[_informAndEmit]([oe]),oe}).then(()=>{if(!_classPrivateFieldLooseBase$6(this,_checkRequiredMetaFields)[_checkRequiredMetaFields](Y))throw new RestrictionError(this.i18n("missingRequiredMetaField"))}).catch(oe=>{throw oe}).then(()=>{const{currentUploads:oe}=this.getState(),le=Object.values(oe).flatMap(fe=>fe.fileIDs),ue=[];Object.keys(Y).forEach(fe=>{const ve=this.getFile(fe);!ve.progress.uploadStarted&&le.indexOf(fe)===-1&&ue.push(ve.id)});const he=_classPrivateFieldLooseBase$6(this,_createUpload)[_createUpload](ue);return _classPrivateFieldLooseBase$6(this,_runUpload)[_runUpload](he)}).catch(oe=>{throw this.emit("error",oe),this.log(oe,"error"),oe}))}}function _informAndEmit2(G){for(const le of G)le.isRestriction?this.emit("restriction-failed",le.file,le):this.emit("error",le,le.file),this.log(le,"warning");const U=G.filter(le=>le.isUserFacing),Y=4,re=U.slice(0,Y),oe=U.slice(Y);re.forEach(le=>{let{message:ue,details:he=""}=le;this.info({message:ue,details:he},"error",this.opts.infoTimeout)}),oe.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:oe.length})})}function _checkRequiredMetaFieldsOnFile2(G){const{missingFields:U,error:Y}=_classPrivateFieldLooseBase$6(this,_restricter)[_restricter].getMissingRequiredMetaFields(G);return U.length>0?(this.setFileState(G.id,{missingRequiredMetaFields:U}),this.log(Y.message),this.emit("restriction-failed",G,Y),!1):!0}function _checkRequiredMetaFields2(G){let U=!0;for(const Y of Object.values(G))_classPrivateFieldLooseBase$6(this,_checkRequiredMetaFieldsOnFile)[_checkRequiredMetaFieldsOnFile](Y)||(U=!1);return U}function _assertNewUploadAllowed2(G){const{allowNewUpload:U}=this.getState();if(U===!1){const Y=new RestrictionError(this.i18n("noMoreFilesAllowed"),{file:G});throw _classPrivateFieldLooseBase$6(this,_informAndEmit)[_informAndEmit]([Y]),Y}}function _transformFile2(G){const U=G instanceof File?{name:G.name,type:G.type,size:G.size,data:G}:G,Y=getFileType(U),re=getFileName(Y,U),oe=getFileNameAndExtension(re).extension,le=getSafeFileId(U,this.getID()),ue=U.meta||{};ue.name=re,ue.type=Y;const he=Number.isFinite(U.data.size)?U.data.size:null;return{source:U.source||"",id:le,name:re,extension:oe||"",meta:{...this.getState().meta,...ue},type:Y,data:U.data,progress:{percentage:0,bytesUploaded:0,bytesTotal:he,uploadComplete:!1,uploadStarted:null},size:he,isGhost:!1,isRemote:U.isRemote||!1,remote:U.remote||"",preview:U.preview}}function _startIfAutoProceed2(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(G=>{G.isRestriction||this.log(G.stack||G.message||G)})},4))}function _checkAndUpdateFileState2(G){const{files:U}=this.getState(),Y={...U},re=[],oe=[];for(const ue of G)try{var le;let he=_classPrivateFieldLooseBase$6(this,_transformFile)[_transformFile](ue);const fe=(le=U[he.id])==null?void 0:le.isGhost;fe&&(he={...U[he.id],isGhost:!1,data:ue.data},this.log(`Replaced the blob in the restored ghost file: ${he.name}, ${he.id}`));const ve=this.opts.onBeforeFileAdded(he,Y);if(!ve&&this.checkIfFileAlreadyExists(he.id))throw new RestrictionError(this.i18n("noDuplicates",{fileName:he.name}),{file:ue});if(ve===!1&&!fe)throw new RestrictionError("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:ue});typeof ve=="object"&&ve!==null&&(he=ve),_classPrivateFieldLooseBase$6(this,_restricter)[_restricter].validateSingleFile(he),Y[he.id]=he,re.push(he)}catch(he){oe.push(he)}try{_classPrivateFieldLooseBase$6(this,_restricter)[_restricter].validateAggregateRestrictions(Object.values(U),re)}catch(ue){return oe.push(ue),{nextFilesState:U,validFilesToAdd:[],errors:oe}}return{nextFilesState:Y,validFilesToAdd:re,errors:oe}}function _addListeners2(){const G=(re,oe,le)=>{let ue=re.message||"Unknown error";re.details&&(ue+=` ${re.details}`),this.setState({error:ue}),oe!=null&&oe.id in this.getState().files&&this.setFileState(oe.id,{error:ue,response:le})};this.on("error",G),this.on("upload-error",(re,oe,le)=>{if(G(oe,re,le),typeof oe=="object"&&oe.message){var ue;this.log(oe.message,"error");const he=new Error(this.i18n("failedToUpload",{file:(ue=re==null?void 0:re.name)!=null?ue:""}));he.isUserFacing=!0,he.details=oe.message,oe.details&&(he.details+=` ${oe.details}`),_classPrivateFieldLooseBase$6(this,_informAndEmit)[_informAndEmit]([he])}else _classPrivateFieldLooseBase$6(this,_informAndEmit)[_informAndEmit]([oe])});let U=null;this.on("upload-stalled",(re,oe)=>{const{message:le}=re,ue=oe.map(he=>he.meta.name).join(", ");U||(this.info({message:le,details:ue},"warning",this.opts.infoTimeout),U=setTimeout(()=>{U=null},this.opts.infoTimeout)),this.log(`${le} ${ue}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});const Y=re=>{const oe=re.filter(ue=>{const he=ue!=null&&this.getFile(ue.id);return he||this.log(`Not setting progress for a file that has been removed: ${ue==null?void 0:ue.id}`),he}),le=Object.fromEntries(oe.map(ue=>[ue.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,percentage:0,bytesUploaded:0,bytesTotal:ue.size}}]));this.patchFilesState(le)};this.on("upload-start",re=>{re.forEach(oe=>{this.emit("upload-started",oe)}),Y(re)}),this.on("upload-progress",this.calculateProgress),this.on("upload-success",(re,oe)=>{if(re==null||!this.getFile(re.id)){this.log(`Not setting progress for a file that has been removed: ${re==null?void 0:re.id}`);return}const le=this.getFile(re.id).progress;this.setFileState(re.id,{progress:{...le,postprocess:_classPrivateFieldLooseBase$6(this,_postProcessors)[_postProcessors].size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:le.bytesTotal},response:oe,uploadURL:oe.uploadURL,isPaused:!1}),re.size==null&&this.setFileState(re.id,{size:oe.bytesUploaded||le.bytesTotal}),this.calculateTotalProgress()}),this.on("preprocess-progress",(re,oe)=>{if(re==null||!this.getFile(re.id)){this.log(`Not setting progress for a file that has been removed: ${re==null?void 0:re.id}`);return}this.setFileState(re.id,{progress:{...this.getFile(re.id).progress,preprocess:oe}})}),this.on("preprocess-complete",re=>{if(re==null||!this.getFile(re.id)){this.log(`Not setting progress for a file that has been removed: ${re==null?void 0:re.id}`);return}const oe={...this.getState().files};oe[re.id]={...oe[re.id],progress:{...oe[re.id].progress}},delete oe[re.id].progress.preprocess,this.setState({files:oe})}),this.on("postprocess-progress",(re,oe)=>{if(re==null||!this.getFile(re.id)){this.log(`Not setting progress for a file that has been removed: ${re==null?void 0:re.id}`);return}this.setFileState(re.id,{progress:{...this.getState().files[re.id].progress,postprocess:oe}})}),this.on("postprocess-complete",re=>{if(re==null||!this.getFile(re.id)){this.log(`Not setting progress for a file that has been removed: ${re==null?void 0:re.id}`);return}const oe={...this.getState().files};oe[re.id]={...oe[re.id],progress:{...oe[re.id].progress}},delete oe[re.id].progress.postprocess,this.setState({files:oe})}),this.on("restored",()=>{this.calculateTotalProgress()}),this.on("dashboard:file-edit-complete",re=>{re&&_classPrivateFieldLooseBase$6(this,_checkRequiredMetaFieldsOnFile)[_checkRequiredMetaFieldsOnFile](re)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",_classPrivateFieldLooseBase$6(this,_updateOnlineStatus)[_updateOnlineStatus]),window.addEventListener("offline",_classPrivateFieldLooseBase$6(this,_updateOnlineStatus)[_updateOnlineStatus]),setTimeout(_classPrivateFieldLooseBase$6(this,_updateOnlineStatus)[_updateOnlineStatus],3e3))}function _createUpload2(G,U){U===void 0&&(U={});const{forceAllowNewUpload:Y=!1}=U,{allowNewUpload:re,currentUploads:oe}=this.getState();if(!re&&!Y)throw new Error("Cannot create a new upload: already uploading.");const le=nanoid();return this.emit("upload",{id:le,fileIDs:G}),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:{...oe,[le]:{fileIDs:G,step:0,result:{}}}}),le}function _getUpload2(G){const{currentUploads:U}=this.getState();return U[G]}function _removeUpload2(G){const U={...this.getState().currentUploads};delete U[G],this.setState({currentUploads:U})}async function _runUpload2(G){const U=()=>{const{currentUploads:le}=this.getState();return le[G]};let Y=U();const re=[..._classPrivateFieldLooseBase$6(this,_preProcessors)[_preProcessors],..._classPrivateFieldLooseBase$6(this,_uploaders)[_uploaders],..._classPrivateFieldLooseBase$6(this,_postProcessors)[_postProcessors]];try{for(let le=Y.step||0;le<re.length&&Y;le++){const ue=re[le];this.setState({currentUploads:{...this.getState().currentUploads,[G]:{...Y,step:le}}});const{fileIDs:he}=Y;await ue(he,G),Y=U()}}catch(le){throw _classPrivateFieldLooseBase$6(this,_removeUpload)[_removeUpload](G),le}if(Y){Y.fileIDs.forEach(fe=>{const ve=this.getFile(fe);ve&&ve.progress.postprocess&&this.emit("postprocess-complete",ve)});const le=Y.fileIDs.map(fe=>this.getFile(fe)),ue=le.filter(fe=>!fe.error),he=le.filter(fe=>fe.error);this.addResultData(G,{successful:ue,failed:he,uploadID:G}),Y=U()}let oe;return Y&&(oe=Y.result,this.emit("complete",oe),_classPrivateFieldLooseBase$6(this,_removeUpload)[_removeUpload](G)),oe==null&&this.log(`Not setting result for an upload that has been removed: ${G}`),oe}Uppy.VERSION=packageJson$5.version;const Uppy$1=Uppy;var n$1,l$2,u$2,i$2,o$2,r$2,f$2,c$2={},s$2=[],a$2=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,h$2=Array.isArray;function v$2(G,U){for(var Y in U)G[Y]=U[Y];return G}function p$2(G){var U=G.parentNode;U&&U.removeChild(G)}function y$1(G,U,Y){var re,oe,le,ue={};for(le in U)le=="key"?re=U[le]:le=="ref"?oe=U[le]:ue[le]=U[le];if(arguments.length>2&&(ue.children=arguments.length>3?n$1.call(arguments,2):Y),typeof G=="function"&&G.defaultProps!=null)for(le in G.defaultProps)ue[le]===void 0&&(ue[le]=G.defaultProps[le]);return d$2(G,ue,re,oe,null)}function d$2(G,U,Y,re,oe){var le={type:G,props:U,key:Y,ref:re,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:oe??++u$2};return oe==null&&l$2.vnode!=null&&l$2.vnode(le),le}function _$3(){return{current:null}}function k$2(G){return G.children}function b$2(G,U){this.props=G,this.context=U}function g$2(G,U){if(U==null)return G.__?g$2(G.__,G.__.__k.indexOf(G)+1):null;for(var Y;U<G.__k.length;U++)if((Y=G.__k[U])!=null&&Y.__e!=null)return Y.__e;return typeof G.type=="function"?g$2(G):null}function m$2(G){var U,Y;if((G=G.__)!=null&&G.__c!=null){for(G.__e=G.__c.base=null,U=0;U<G.__k.length;U++)if((Y=G.__k[U])!=null&&Y.__e!=null){G.__e=G.__c.base=Y.__e;break}return m$2(G)}}function w$2(G){(!G.__d&&(G.__d=!0)&&i$2.push(G)&&!x.__r++||o$2!==l$2.debounceRendering)&&((o$2=l$2.debounceRendering)||r$2)(x)}function x(){var G,U,Y,re,oe,le,ue,he,fe;for(i$2.sort(f$2);G=i$2.shift();)G.__d&&(U=i$2.length,re=void 0,oe=void 0,le=void 0,he=(ue=(Y=G).__v).__e,(fe=Y.__P)&&(re=[],oe=[],(le=v$2({},ue)).__v=ue.__v+1,L$1(fe,ue,le,Y.__n,fe.ownerSVGElement!==void 0,ue.__h!=null?[he]:null,re,he??g$2(ue),ue.__h,oe),M$1(re,ue,oe),ue.__e!=he&&m$2(ue)),i$2.length>U&&i$2.sort(f$2));x.__r=0}function P$1(G,U,Y,re,oe,le,ue,he,fe,ve,$e){var _e,Fe,Ee,Se,Ae,Te,Re,Ue,Le,Me,De=0,je=re&&re.__k||s$2,He=je.length,Ve=He,ze=U.length;for(Y.__k=[],_e=0;_e<ze;_e++)(Se=Y.__k[_e]=(Se=U[_e])==null||typeof Se=="boolean"||typeof Se=="function"?null:typeof Se=="string"||typeof Se=="number"||typeof Se=="bigint"?d$2(null,Se,null,null,Se):h$2(Se)?d$2(k$2,{children:Se},null,null,null):Se.__b>0?d$2(Se.type,Se.props,Se.key,Se.ref?Se.ref:null,Se.__v):Se)!=null&&(Se.__=Y,Se.__b=Y.__b+1,(Ue=A$1(Se,je,Re=_e+De,Ve))===-1?Ee=c$2:(Ee=je[Ue]||c$2,je[Ue]=void 0,Ve--),L$1(G,Se,Ee,oe,le,ue,he,fe,ve,$e),Ae=Se.__e,(Fe=Se.ref)&&Ee.ref!=Fe&&(Ee.ref&&O$1(Ee.ref,null,Se),$e.push(Fe,Se.__c||Ae,Se)),Ae!=null&&(Te==null&&(Te=Ae),Me=!(Le=Ee===c$2||Ee.__v===null)&&Ue===Re,Le?Ue==-1&&De--:Ue!==Re&&(Ue===Re+1?(De++,Me=!0):Ue>Re?Ve>ze-Re?(De+=Ue-Re,Me=!0):De--:De=Ue<Re&&Ue==Re-1?Ue-Re:0),Re=_e+De,Me=Me||Ue==_e&&!Le,typeof Se.type!="function"||Ue===Re&&Ee.__k!==Se.__k?typeof Se.type=="function"||Me?Se.__d!==void 0?(fe=Se.__d,Se.__d=void 0):fe=Ae.nextSibling:fe=$$1(G,Ae,fe):fe=C(Se,fe,G),typeof Y.type=="function"&&(Y.__d=fe)));for(Y.__e=Te,_e=He;_e--;)je[_e]!=null&&(typeof Y.type=="function"&&je[_e].__e!=null&&je[_e].__e==Y.__d&&(Y.__d=je[_e].__e.nextSibling),q$1(je[_e],je[_e]))}function C(G,U,Y){for(var re,oe=G.__k,le=0;oe&&le<oe.length;le++)(re=oe[le])&&(re.__=G,U=typeof re.type=="function"?C(re,U,Y):$$1(Y,re.__e,U));return U}function S$1(G,U){return U=U||[],G==null||typeof G=="boolean"||(h$2(G)?G.some(function(Y){S$1(Y,U)}):U.push(G)),U}function $$1(G,U,Y){return Y==null||Y.parentNode!==G?G.insertBefore(U,null):U==Y&&U.parentNode!=null||G.insertBefore(U,Y),U.nextSibling}function A$1(G,U,Y,re){var oe=G.key,le=G.type,ue=Y-1,he=Y+1,fe=U[Y];if(fe===null||fe&&oe==fe.key&&le===fe.type)return Y;if(re>(fe!=null?1:0))for(;ue>=0||he<U.length;){if(ue>=0){if((fe=U[ue])&&oe==fe.key&&le===fe.type)return ue;ue--}if(he<U.length){if((fe=U[he])&&oe==fe.key&&le===fe.type)return he;he++}}return-1}function H$1(G,U,Y,re,oe){var le;for(le in Y)le==="children"||le==="key"||le in U||T$2(G,le,null,Y[le],re);for(le in U)oe&&typeof U[le]!="function"||le==="children"||le==="key"||le==="value"||le==="checked"||Y[le]===U[le]||T$2(G,le,U[le],Y[le],re)}function I$1(G,U,Y){U[0]==="-"?G.setProperty(U,Y??""):G[U]=Y==null?"":typeof Y!="number"||a$2.test(U)?Y:Y+"px"}function T$2(G,U,Y,re,oe){var le;e:if(U==="style")if(typeof Y=="string")G.style.cssText=Y;else{if(typeof re=="string"&&(G.style.cssText=re=""),re)for(U in re)Y&&U in Y||I$1(G.style,U,"");if(Y)for(U in Y)re&&Y[U]===re[U]||I$1(G.style,U,Y[U])}else if(U[0]==="o"&&U[1]==="n")le=U!==(U=U.replace(/Capture$/,"")),U=U.toLowerCase()in G?U.toLowerCase().slice(2):U.slice(2),G.l||(G.l={}),G.l[U+le]=Y,Y?re||G.addEventListener(U,le?z$2:j$2,le):G.removeEventListener(U,le?z$2:j$2,le);else if(U!=="dangerouslySetInnerHTML"){if(oe)U=U.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(U!=="width"&&U!=="height"&&U!=="href"&&U!=="list"&&U!=="form"&&U!=="tabIndex"&&U!=="download"&&U!=="rowSpan"&&U!=="colSpan"&&U in G)try{G[U]=Y??"";break e}catch{}typeof Y=="function"||(Y==null||Y===!1&&U[4]!=="-"?G.removeAttribute(U):G.setAttribute(U,Y))}}function j$2(G){return this.l[G.type+!1](l$2.event?l$2.event(G):G)}function z$2(G){return this.l[G.type+!0](l$2.event?l$2.event(G):G)}function L$1(G,U,Y,re,oe,le,ue,he,fe,ve){var $e,_e,Fe,Ee,Se,Ae,Te,Re,Ue,Le,Me,De,je,He,Ve,ze=U.type;if(U.constructor!==void 0)return null;Y.__h!=null&&(fe=Y.__h,he=U.__e=Y.__e,U.__h=null,le=[he]),($e=l$2.__b)&&$e(U);try{e:if(typeof ze=="function"){if(Re=U.props,Ue=($e=ze.contextType)&&re[$e.__c],Le=$e?Ue?Ue.props.value:$e.__:re,Y.__c?Te=(_e=U.__c=Y.__c).__=_e.__E:("prototype"in ze&&ze.prototype.render?U.__c=_e=new ze(Re,Le):(U.__c=_e=new b$2(Re,Le),_e.constructor=ze,_e.render=B$2),Ue&&Ue.sub(_e),_e.props=Re,_e.state||(_e.state={}),_e.context=Le,_e.__n=re,Fe=_e.__d=!0,_e.__h=[],_e._sb=[]),_e.__s==null&&(_e.__s=_e.state),ze.getDerivedStateFromProps!=null&&(_e.__s==_e.state&&(_e.__s=v$2({},_e.__s)),v$2(_e.__s,ze.getDerivedStateFromProps(Re,_e.__s))),Ee=_e.props,Se=_e.state,_e.__v=U,Fe)ze.getDerivedStateFromProps==null&&_e.componentWillMount!=null&&_e.componentWillMount(),_e.componentDidMount!=null&&_e.__h.push(_e.componentDidMount);else{if(ze.getDerivedStateFromProps==null&&Re!==Ee&&_e.componentWillReceiveProps!=null&&_e.componentWillReceiveProps(Re,Le),!_e.__e&&(_e.shouldComponentUpdate!=null&&_e.shouldComponentUpdate(Re,_e.__s,Le)===!1||U.__v===Y.__v)){for(U.__v!==Y.__v&&(_e.props=Re,_e.state=_e.__s,_e.__d=!1),U.__e=Y.__e,U.__k=Y.__k,U.__k.forEach(function(Qe){Qe&&(Qe.__=U)}),Me=0;Me<_e._sb.length;Me++)_e.__h.push(_e._sb[Me]);_e._sb=[],_e.__h.length&&ue.push(_e);break e}_e.componentWillUpdate!=null&&_e.componentWillUpdate(Re,_e.__s,Le),_e.componentDidUpdate!=null&&_e.__h.push(function(){_e.componentDidUpdate(Ee,Se,Ae)})}if(_e.context=Le,_e.props=Re,_e.__P=G,_e.__e=!1,De=l$2.__r,je=0,"prototype"in ze&&ze.prototype.render){for(_e.state=_e.__s,_e.__d=!1,De&&De(U),$e=_e.render(_e.props,_e.state,_e.context),He=0;He<_e._sb.length;He++)_e.__h.push(_e._sb[He]);_e._sb=[]}else do _e.__d=!1,De&&De(U),$e=_e.render(_e.props,_e.state,_e.context),_e.state=_e.__s;while(_e.__d&&++je<25);_e.state=_e.__s,_e.getChildContext!=null&&(re=v$2(v$2({},re),_e.getChildContext())),Fe||_e.getSnapshotBeforeUpdate==null||(Ae=_e.getSnapshotBeforeUpdate(Ee,Se)),P$1(G,h$2(Ve=$e!=null&&$e.type===k$2&&$e.key==null?$e.props.children:$e)?Ve:[Ve],U,Y,re,oe,le,ue,he,fe,ve),_e.base=U.__e,U.__h=null,_e.__h.length&&ue.push(_e),Te&&(_e.__E=_e.__=null)}else le==null&&U.__v===Y.__v?(U.__k=Y.__k,U.__e=Y.__e):U.__e=N$1(Y.__e,U,Y,re,oe,le,ue,fe,ve);($e=l$2.diffed)&&$e(U)}catch(Qe){U.__v=null,(fe||le!=null)&&(U.__e=he,U.__h=!!fe,le[le.indexOf(he)]=null),l$2.__e(Qe,U,Y)}}function M$1(G,U,Y){for(var re=0;re<Y.length;re++)O$1(Y[re],Y[++re],Y[++re]);l$2.__c&&l$2.__c(U,G),G.some(function(oe){try{G=oe.__h,oe.__h=[],G.some(function(le){le.call(oe)})}catch(le){l$2.__e(le,oe.__v)}})}function N$1(G,U,Y,re,oe,le,ue,he,fe){var ve,$e,_e,Fe=Y.props,Ee=U.props,Se=U.type,Ae=0;if(Se==="svg"&&(oe=!0),le!=null){for(;Ae<le.length;Ae++)if((ve=le[Ae])&&"setAttribute"in ve==!!Se&&(Se?ve.localName===Se:ve.nodeType===3)){G=ve,le[Ae]=null;break}}if(G==null){if(Se===null)return document.createTextNode(Ee);G=oe?document.createElementNS("http://www.w3.org/2000/svg",Se):document.createElement(Se,Ee.is&&Ee),le=null,he=!1}if(Se===null)Fe===Ee||he&&G.data===Ee||(G.data=Ee);else{if(le=le&&n$1.call(G.childNodes),$e=(Fe=Y.props||c$2).dangerouslySetInnerHTML,_e=Ee.dangerouslySetInnerHTML,!he){if(le!=null)for(Fe={},Ae=0;Ae<G.attributes.length;Ae++)Fe[G.attributes[Ae].name]=G.attributes[Ae].value;(_e||$e)&&(_e&&($e&&_e.__html==$e.__html||_e.__html===G.innerHTML)||(G.innerHTML=_e&&_e.__html||""))}if(H$1(G,Ee,Fe,oe,he),_e)U.__k=[];else if(P$1(G,h$2(Ae=U.props.children)?Ae:[Ae],U,Y,re,oe&&Se!=="foreignObject",le,ue,le?le[0]:Y.__k&&g$2(Y,0),he,fe),le!=null)for(Ae=le.length;Ae--;)le[Ae]!=null&&p$2(le[Ae]);he||("value"in Ee&&(Ae=Ee.value)!==void 0&&(Ae!==G.value||Se==="progress"&&!Ae||Se==="option"&&Ae!==Fe.value)&&T$2(G,"value",Ae,Fe.value,!1),"checked"in Ee&&(Ae=Ee.checked)!==void 0&&Ae!==G.checked&&T$2(G,"checked",Ae,Fe.checked,!1))}return G}function O$1(G,U,Y){try{typeof G=="function"?G(U):G.current=U}catch(re){l$2.__e(re,Y)}}function q$1(G,U,Y){var re,oe;if(l$2.unmount&&l$2.unmount(G),(re=G.ref)&&(re.current&&re.current!==G.__e||O$1(re,null,U)),(re=G.__c)!=null){if(re.componentWillUnmount)try{re.componentWillUnmount()}catch(le){l$2.__e(le,U)}re.base=re.__P=null,G.__c=void 0}if(re=G.__k)for(oe=0;oe<re.length;oe++)re[oe]&&q$1(re[oe],U,Y||typeof G.type!="function");Y||G.__e==null||p$2(G.__e),G.__=G.__e=G.__d=void 0}function B$2(G,U,Y){return this.constructor(G,Y)}function D$1(G,U,Y){var re,oe,le,ue;l$2.__&&l$2.__(G,U),oe=(re=typeof Y=="function")?null:Y&&Y.__k||U.__k,le=[],ue=[],L$1(U,G=(!re&&Y||U).__k=y$1(k$2,null,[G]),oe||c$2,c$2,U.ownerSVGElement!==void 0,!re&&Y?[Y]:oe?null:U.firstChild?n$1.call(U.childNodes):null,le,!re&&Y?Y:oe?oe.__e:U.firstChild,re,ue),M$1(le,G,ue)}function F$2(G,U,Y){var re,oe,le,ue,he=v$2({},G.props);for(le in G.type&&G.type.defaultProps&&(ue=G.type.defaultProps),U)le=="key"?re=U[le]:le=="ref"?oe=U[le]:he[le]=U[le]===void 0&&ue!==void 0?ue[le]:U[le];return arguments.length>2&&(he.children=arguments.length>3?n$1.call(arguments,2):Y),d$2(G.type,he,re||G.key,oe||G.ref,null)}n$1=s$2.slice,l$2={__e:function(G,U,Y,re){for(var oe,le,ue;U=U.__;)if((oe=U.__c)&&!oe.__)try{if((le=oe.constructor)&&le.getDerivedStateFromError!=null&&(oe.setState(le.getDerivedStateFromError(G)),ue=oe.__d),oe.componentDidCatch!=null&&(oe.componentDidCatch(G,re||{}),ue=oe.__d),ue)return oe.__E=oe}catch(he){G=he}throw G}},u$2=0,b$2.prototype.setState=function(G,U){var Y;Y=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=v$2({},this.state),typeof G=="function"&&(G=G(v$2({},Y),this.props)),G&&v$2(Y,G),G!=null&&this.__v&&(U&&this._sb.push(U),w$2(this))},b$2.prototype.forceUpdate=function(G){this.__v&&(this.__e=!0,G&&this.__h.push(G),w$2(this))},b$2.prototype.render=k$2,i$2=[],r$2=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,f$2=function(G,U){return G.__v.__b-U.__v.__b},x.__r=0;function isDOMElement(G){return typeof G!="object"||G===null||!("nodeType"in G)?!1:G.nodeType===Node.ELEMENT_NODE}function findDOMElement(G,U){return U===void 0&&(U=document),typeof G=="string"?U.querySelector(G):isDOMElement(G)?G:null}function getTextDirection(G){for(var U;G&&!G.dir;)G=G.parentNode;return(U=G)==null?void 0:U.dir}class BasePlugin{constructor(U,Y){this.uppy=U,this.opts=Y??{}}getPluginState(){const{plugins:U}=this.uppy.getState();return(U==null?void 0:U[this.id])||{}}setPluginState(U){const{plugins:Y}=this.uppy.getState();this.uppy.setState({plugins:{...Y,[this.id]:{...Y[this.id],...U}}})}setOptions(U){this.opts={...this.opts,...U},this.setPluginState(void 0),this.i18nInit()}i18nInit(){const U=new Translator([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=U.translate.bind(U),this.i18nArray=U.translateArray.bind(U),this.setPluginState(void 0)}addTarget(U){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(U){}afterUpdate(){}}function _classPrivateFieldLooseBase$5(G,U){if(!Object.prototype.hasOwnProperty.call(G,U))throw new TypeError("attempted to use private field on non-instance");return G}var id$5=0;function _classPrivateFieldLooseKey$5(G){return"__private_"+id$5+++"_"+G}function debounce(G){let U=null,Y;return function(){for(var re=arguments.length,oe=new Array(re),le=0;le<re;le++)oe[le]=arguments[le];return Y=oe,U||(U=Promise.resolve().then(()=>(U=null,G(...Y)))),U}}var _updateUI=_classPrivateFieldLooseKey$5("updateUI");class UIPlugin extends BasePlugin{constructor(){super(...arguments),Object.defineProperty(this,_updateUI,{writable:!0,value:void 0})}getTargetPlugin(U){let Y;if(typeof(U==null?void 0:U.addTarget)=="function")Y=U,Y instanceof UIPlugin||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:Y,UIPlugin}}));else if(typeof U=="function"){const re=U;this.uppy.iteratePlugins(oe=>{oe instanceof re&&(Y=oe)})}return Y}mount(U,Y){const re=Y.id,oe=findDOMElement(U);if(oe){this.isTargetDOMEl=!0;const he=document.createElement("div");return he.classList.add("uppy-Root"),_classPrivateFieldLooseBase$5(this,_updateUI)[_updateUI]=debounce(fe=>{this.uppy.getPlugin(this.id)&&(D$1(this.render(fe),he),this.afterUpdate())}),this.uppy.log(`Installing ${re} to a DOM element '${U}'`),this.opts.replaceTargetContent&&(oe.innerHTML=""),D$1(this.render(this.uppy.getState()),he),this.el=he,oe.appendChild(he),he.dir=this.opts.direction||getTextDirection(he)||"ltr",this.onMount(),this.el}const le=this.getTargetPlugin(U);if(le)return this.uppy.log(`Installing ${re} to ${le.id}`),this.parent=le,this.el=le.addTarget(Y),this.onMount(),this.el;this.uppy.log(`Not installing ${re}`);let ue=`Invalid target option given to ${re}.`;throw typeof U=="function"?ue+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":ue+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(ue)}render(U){throw new Error("Extend the render method to add your plugin to a DOM element")}update(U){if(this.el!=null){var Y,re;(Y=(re=_classPrivateFieldLooseBase$5(this,_updateUI))[_updateUI])==null||Y.call(re,U)}}unmount(){if(this.isTargetDOMEl){var U;(U=this.el)==null||U.remove()}this.onUnmount()}onMount(){}onUnmount(){}}const UIPlugin$1=UIPlugin;function emaFilter(G,U,Y,re){return Y===0||G===U?G:re===0?U:G+(U-G)*2**(-re/Y)}const statusBarStates={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"};var classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(G){(function(){var U={}.hasOwnProperty;function Y(){for(var re=[],oe=0;oe<arguments.length;oe++){var le=arguments[oe];if(le){var ue=typeof le;if(ue==="string"||ue==="number")re.push(le);else if(Array.isArray(le)){if(le.length){var he=Y.apply(null,le);he&&re.push(he)}}else if(ue==="object"){if(le.toString!==Object.prototype.toString&&!le.toString.toString().includes("[native code]")){re.push(le.toString());continue}for(var fe in le)U.call(le,fe)&&le[fe]&&re.push(fe)}}}return re.join(" ")}G.exports?(Y.default=Y,G.exports=Y):window.classNames=Y})()})(classnames);var classnamesExports=classnames.exports;const classNames=getDefaultExportFromCjs(classnamesExports);function calculateProcessingProgress(G){const U=[];let Y="indeterminate",re;for(const{progress:le}of Object.values(G)){const{preprocess:ue,postprocess:he}=le;re==null&&(ue||he)&&({mode:Y,message:re}=ue||he),(ue==null?void 0:ue.mode)==="determinate"&&U.push(ue.value),(he==null?void 0:he.mode)==="determinate"&&U.push(he.value)}const oe=U.reduce((le,ue)=>le+ue/U.length,0);return{mode:Y,message:re,value:oe}}function secondsToTime(G){const U=Math.floor(G/3600)%24,Y=Math.floor(G/60)%60,re=Math.floor(G%60);return{hours:U,minutes:Y,seconds:re}}function prettyETA(G){const U=secondsToTime(G),Y=U.hours===0?"":`${U.hours}h`,re=U.minutes===0?"":`${U.hours===0?U.minutes:` ${U.minutes.toString(10).padStart(2,"0")}`}m`,oe=U.hours!==0?"":`${U.minutes===0?U.seconds:` ${U.seconds.toString(10).padStart(2,"0")}`}s`;return`${Y}${re}${oe}`}const DOT="·",renderDot=()=>` ${DOT} `;function UploadBtn(G){const{newFiles:U,isUploadStarted:Y,recoveredState:re,i18n:oe,uploadState:le,isSomeGhost:ue,startUpload:he}=G,fe=classNames("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":le===statusBarStates.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":ue}),ve=U&&Y&&!re?oe("uploadXNewFiles",{smart_count:U}):oe("uploadXFiles",{smart_count:U});return y$1("button",{type:"button",className:fe,"aria-label":oe("uploadXFiles",{smart_count:U}),onClick:he,disabled:ue,"data-uppy-super-focusable":!0},ve)}function RetryBtn(G){const{i18n:U,uppy:Y}=G;return y$1("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":U("retryUpload"),onClick:()=>Y.retryAll().catch(()=>{}),"data-uppy-super-focusable":!0,"data-cy":"retry"},y$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10"},y$1("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})),U("retry"))}function CancelBtn(G){const{i18n:U,uppy:Y}=G;return y$1("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:U("cancel"),"aria-label":U("cancel"),onClick:()=>Y.cancelAll(),"data-cy":"cancel","data-uppy-super-focusable":!0},y$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},y$1("g",{fill:"none",fillRule:"evenodd"},y$1("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),y$1("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"}))))}function PauseResumeButton(G){const{isAllPaused:U,i18n:Y,isAllComplete:re,resumableUploads:oe,uppy:le}=G,ue=Y(U?"resume":"pause");function he(){if(!re){if(!oe){le.cancelAll();return}if(U){le.resumeAll();return}le.pauseAll()}}return y$1("button",{title:ue,"aria-label":ue,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:he,"data-cy":"togglePauseResume","data-uppy-super-focusable":!0},y$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},y$1("g",{fill:"none",fillRule:"evenodd"},y$1("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),y$1("path",{fill:"#FFF",d:U?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"}))))}function DoneBtn(G){const{i18n:U,doneButtonHandler:Y}=G;return y$1("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:Y,"data-uppy-super-focusable":!0},U("done"))}function LoadingSpinner(){return y$1("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14"},y$1("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"}))}function ProgressBarProcessing(G){const{progress:U}=G,{value:Y,mode:re,message:oe}=U,le="·";return y$1("div",{className:"uppy-StatusBar-content"},y$1(LoadingSpinner,null),re==="determinate"?`${Math.round(Y*100)}% ${le} `:"",oe)}function ProgressDetails(G){const{numUploads:U,complete:Y,totalUploadedSize:re,totalSize:oe,totalETA:le,i18n:ue}=G,he=U>1;return y$1("div",{className:"uppy-StatusBar-statusSecondary"},he&&ue("filesUploadedOfTotal",{complete:Y,smart_count:U}),y$1("span",{className:"uppy-StatusBar-additionalInfo"},he&&renderDot(),ue("dataUploadedOfTotal",{complete:prettierBytes$1(re),total:prettierBytes$1(oe)}),renderDot(),ue("xTimeLeft",{time:prettyETA(le)})))}function FileUploadCount(G){const{i18n:U,complete:Y,numUploads:re}=G;return y$1("div",{className:"uppy-StatusBar-statusSecondary"},U("filesUploadedOfTotal",{complete:Y,smart_count:re}))}function UploadNewlyAddedFiles(G){const{i18n:U,newFiles:Y,startUpload:re}=G,oe=classNames("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return y$1("div",{className:"uppy-StatusBar-statusSecondary"},y$1("div",{className:"uppy-StatusBar-statusSecondaryHint"},U("xMoreFilesAdded",{smart_count:Y})),y$1("button",{type:"button",className:oe,"aria-label":U("uploadXFiles",{smart_count:Y}),onClick:re},U("upload")))}function ProgressBarUploading(G){const{i18n:U,supportsUploadProgress:Y,totalProgress:re,showProgressDetails:oe,isUploadStarted:le,isAllComplete:ue,isAllPaused:he,newFiles:fe,numUploads:ve,complete:$e,totalUploadedSize:_e,totalSize:Fe,totalETA:Ee,startUpload:Se}=G,Ae=fe&&le;if(!le||ue)return null;const Te=U(he?"paused":"uploading");function Re(){return!he&&!Ae&&oe?Y?y$1(ProgressDetails,{numUploads:ve,complete:$e,totalUploadedSize:_e,totalSize:Fe,totalETA:Ee,i18n:U}):y$1(FileUploadCount,{i18n:U,complete:$e,numUploads:ve}):null}return y$1("div",{className:"uppy-StatusBar-content","aria-label":Te,title:Te},he?null:y$1(LoadingSpinner,null),y$1("div",{className:"uppy-StatusBar-status"},y$1("div",{className:"uppy-StatusBar-statusPrimary"},Y?`${Te}: ${re}%`:Te),Re(),Ae?y$1(UploadNewlyAddedFiles,{i18n:U,newFiles:fe,startUpload:Se}):null))}function ProgressBarComplete(G){const{i18n:U}=G;return y$1("div",{className:"uppy-StatusBar-content",role:"status",title:U("complete")},y$1("div",{className:"uppy-StatusBar-status"},y$1("div",{className:"uppy-StatusBar-statusPrimary"},y$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11"},y$1("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})),U("complete"))))}function ProgressBarError(G){const{error:U,i18n:Y,complete:re,numUploads:oe}=G;function le(){const ue=`${Y("uploadFailed")} 

 ${U}`;alert(ue)}return y$1("div",{className:"uppy-StatusBar-content",title:Y("uploadFailed")},y$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11"},y$1("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})),y$1("div",{className:"uppy-StatusBar-status"},y$1("div",{className:"uppy-StatusBar-statusPrimary"},Y("uploadFailed"),y$1("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":Y("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:le,type:"button"},"?")),y$1(FileUploadCount,{i18n:Y,complete:re,numUploads:oe})))}const{STATE_ERROR,STATE_WAITING,STATE_PREPROCESSING,STATE_UPLOADING,STATE_POSTPROCESSING,STATE_COMPLETE}=statusBarStates;function StatusBar$1(G){const{newFiles:U,allowNewUpload:Y,isUploadInProgress:re,isAllPaused:oe,resumableUploads:le,error:ue,hideUploadButton:he,hidePauseResumeButton:fe,hideCancelButton:ve,hideRetryButton:$e,recoveredState:_e,uploadState:Fe,totalProgress:Ee,files:Se,supportsUploadProgress:Ae,hideAfterFinish:Te,isSomeGhost:Re,doneButtonHandler:Ue,isUploadStarted:Le,i18n:Me,startUpload:De,uppy:je,isAllComplete:He,showProgressDetails:Ve,numUploads:ze,complete:Qe,totalSize:tt,totalETA:rt,totalUploadedSize:et}=G;function Ze(){switch(Fe){case STATE_POSTPROCESSING:case STATE_PREPROCESSING:{const Ge=calculateProcessingProgress(Se);return Ge.mode==="determinate"?Ge.value*100:Ee}case STATE_ERROR:return null;case STATE_UPLOADING:return Ae?Ee:null;default:return Ee}}function Ye(){switch(Fe){case STATE_POSTPROCESSING:case STATE_PREPROCESSING:{const{mode:Ge}=calculateProcessingProgress(Se);return Ge==="indeterminate"}case STATE_UPLOADING:return!Ae;default:return!1}}function Ce(){if(_e)return!1;switch(Fe){case STATE_WAITING:return he||U===0;case STATE_COMPLETE:return Te;default:return!1}}const Pe=Ze(),xe=Ce(),Be=Pe??100,Ie=!ue&&U&&!re&&!oe&&Y&&!he,Ne=!ve&&Fe!==STATE_WAITING&&Fe!==STATE_COMPLETE,qe=le&&!fe&&Fe===STATE_UPLOADING,Ke=ue&&!He&&!$e,We=Ue&&Fe===STATE_COMPLETE,Je=classNames("uppy-StatusBar-progress",{"is-indeterminate":Ye()}),Xe=classNames("uppy-StatusBar",`is-${Fe}`,{"has-ghosts":Re});return y$1("div",{className:Xe,"aria-hidden":xe},y$1("div",{className:Je,style:{width:`${Be}%`},role:"progressbar","aria-label":`${Be}%`,"aria-valuetext":`${Be}%`,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Pe}),(()=>{switch(Fe){case STATE_PREPROCESSING:case STATE_POSTPROCESSING:return y$1(ProgressBarProcessing,{progress:calculateProcessingProgress(Se)});case STATE_COMPLETE:return y$1(ProgressBarComplete,{i18n:Me});case STATE_ERROR:return y$1(ProgressBarError,{error:ue,i18n:Me,numUploads:ze,complete:Qe});case STATE_UPLOADING:return y$1(ProgressBarUploading,{i18n:Me,supportsUploadProgress:Ae,totalProgress:Ee,showProgressDetails:Ve,isUploadStarted:Le,isAllComplete:He,isAllPaused:oe,newFiles:U,numUploads:ze,complete:Qe,totalUploadedSize:et,totalSize:tt,totalETA:rt,startUpload:De});default:return null}})(),y$1("div",{className:"uppy-StatusBar-actions"},_e||Ie?y$1(UploadBtn,{newFiles:U,isUploadStarted:Le,recoveredState:_e,i18n:Me,isSomeGhost:Re,startUpload:De,uploadState:Fe}):null,Ke?y$1(RetryBtn,{i18n:Me,uppy:je}):null,qe?y$1(PauseResumeButton,{isAllPaused:oe,i18n:Me,isAllComplete:He,resumableUploads:le,uppy:je}):null,Ne?y$1(CancelBtn,{i18n:Me,uppy:je}):null,We?y$1(DoneBtn,{i18n:Me,doneButtonHandler:Ue}):null))}StatusBar$1.defaultProps={doneButtonHandler:void 0,hideAfterFinish:!1,hideCancelButton:!1,hidePauseResumeButton:!1,hideRetryButton:!1,hideUploadButton:void 0,showProgressDetails:void 0};const locale$2={strings:{uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",cancel:"Cancel",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",retryUpload:"Retry upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}};function _classPrivateFieldLooseBase$4(G,U){if(!Object.prototype.hasOwnProperty.call(G,U))throw new TypeError("attempted to use private field on non-instance");return G}var id$4=0;function _classPrivateFieldLooseKey$4(G){return"__private_"+id$4+++"_"+G}const packageJson$4={version:"3.3.3"},speedFilterHalfLife=2e3,ETAFilterHalfLife=2e3;function getUploadingState$1(G,U,Y,re){if(G)return statusBarStates.STATE_ERROR;if(U)return statusBarStates.STATE_COMPLETE;if(Y)return statusBarStates.STATE_WAITING;let oe=statusBarStates.STATE_WAITING;const le=Object.keys(re);for(let ue=0;ue<le.length;ue++){const{progress:he}=re[le[ue]];if(he.uploadStarted&&!he.uploadComplete)return statusBarStates.STATE_UPLOADING;he.preprocess&&(oe=statusBarStates.STATE_PREPROCESSING),he.postprocess&&oe!==statusBarStates.STATE_PREPROCESSING&&(oe=statusBarStates.STATE_POSTPROCESSING)}return oe}const defaultOptions$5={target:"body",hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null};var _lastUpdateTime=_classPrivateFieldLooseKey$4("lastUpdateTime"),_previousUploadedBytes=_classPrivateFieldLooseKey$4("previousUploadedBytes"),_previousSpeed=_classPrivateFieldLooseKey$4("previousSpeed"),_previousETA=_classPrivateFieldLooseKey$4("previousETA"),_computeSmoothETA=_classPrivateFieldLooseKey$4("computeSmoothETA"),_onUploadStart=_classPrivateFieldLooseKey$4("onUploadStart");class StatusBar extends UIPlugin$1{constructor(U,Y){super(U,{...defaultOptions$5,...Y}),Object.defineProperty(this,_computeSmoothETA,{value:_computeSmoothETA2}),Object.defineProperty(this,_lastUpdateTime,{writable:!0,value:void 0}),Object.defineProperty(this,_previousUploadedBytes,{writable:!0,value:void 0}),Object.defineProperty(this,_previousSpeed,{writable:!0,value:void 0}),Object.defineProperty(this,_previousETA,{writable:!0,value:void 0}),this.startUpload=()=>this.uppy.upload().catch(()=>{}),Object.defineProperty(this,_onUploadStart,{writable:!0,value:()=>{const{recoveredState:re}=this.uppy.getState();if(_classPrivateFieldLooseBase$4(this,_previousSpeed)[_previousSpeed]=null,_classPrivateFieldLooseBase$4(this,_previousETA)[_previousETA]=null,re){_classPrivateFieldLooseBase$4(this,_previousUploadedBytes)[_previousUploadedBytes]=Object.values(re.files).reduce((oe,le)=>{let{progress:ue}=le;return oe+ue.bytesUploaded},0),this.uppy.emit("restore-confirmed");return}_classPrivateFieldLooseBase$4(this,_lastUpdateTime)[_lastUpdateTime]=performance.now(),_classPrivateFieldLooseBase$4(this,_previousUploadedBytes)[_previousUploadedBytes]=0}}),this.id=this.opts.id||"StatusBar",this.title="StatusBar",this.type="progressindicator",this.defaultLocale=locale$2,this.i18nInit(),this.render=this.render.bind(this),this.install=this.install.bind(this)}render(U){const{capabilities:Y,files:re,allowNewUpload:oe,totalProgress:le,error:ue,recoveredState:he}=U,{newFiles:fe,startedFiles:ve,completeFiles:$e,isUploadStarted:_e,isAllComplete:Fe,isAllErrored:Ee,isAllPaused:Se,isUploadInProgress:Ae,isSomeGhost:Te}=this.uppy.getObjectOfFilesPerState(),Re=he?Object.values(re):fe,Ue=!!Y.resumableUploads,Le=Y.uploadProgress!==!1;let Me=0,De=0;ve.forEach(He=>{Me+=He.progress.bytesTotal||0,De+=He.progress.bytesUploaded||0});const je=_classPrivateFieldLooseBase$4(this,_computeSmoothETA)[_computeSmoothETA]({uploaded:De,total:Me,remaining:Me-De});return StatusBar$1({error:ue,uploadState:getUploadingState$1(ue,Fe,he,U.files||{}),allowNewUpload:oe,totalProgress:le,totalSize:Me,totalUploadedSize:De,isAllComplete:!1,isAllPaused:Se,isAllErrored:Ee,isUploadStarted:_e,isUploadInProgress:Ae,isSomeGhost:Te,recoveredState:he,complete:$e.length,newFiles:Re.length,numUploads:ve.length,totalETA:je,files:re,i18n:this.i18n,uppy:this.uppy,startUpload:this.startUpload,doneButtonHandler:this.opts.doneButtonHandler,resumableUploads:Ue,supportsUploadProgress:Le,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish,isTargetDOMEl:this.isTargetDOMEl})}onMount(){const U=this.el;getTextDirection(U)||(U.dir="ltr")}install(){const{target:U}=this.opts;U&&this.mount(U,this),this.uppy.on("upload",_classPrivateFieldLooseBase$4(this,_onUploadStart)[_onUploadStart]),_classPrivateFieldLooseBase$4(this,_lastUpdateTime)[_lastUpdateTime]=performance.now(),_classPrivateFieldLooseBase$4(this,_previousUploadedBytes)[_previousUploadedBytes]=this.uppy.getFiles().reduce((Y,re)=>Y+re.progress.bytesUploaded,0)}uninstall(){this.unmount(),this.uppy.off("upload",_classPrivateFieldLooseBase$4(this,_onUploadStart)[_onUploadStart])}}function _computeSmoothETA2(G){var U,Y;if(G.total===0||G.remaining===0)return 0;(Y=(U=_classPrivateFieldLooseBase$4(this,_lastUpdateTime))[_lastUpdateTime])!=null||(U[_lastUpdateTime]=performance.now());const re=performance.now()-_classPrivateFieldLooseBase$4(this,_lastUpdateTime)[_lastUpdateTime];if(re===0){var oe;return Math.round(((oe=_classPrivateFieldLooseBase$4(this,_previousETA)[_previousETA])!=null?oe:0)/100)/10}const le=G.uploaded-_classPrivateFieldLooseBase$4(this,_previousUploadedBytes)[_previousUploadedBytes];if(_classPrivateFieldLooseBase$4(this,_previousUploadedBytes)[_previousUploadedBytes]=G.uploaded,le<=0){var ue;return Math.round(((ue=_classPrivateFieldLooseBase$4(this,_previousETA)[_previousETA])!=null?ue:0)/100)/10}const he=le/re,fe=_classPrivateFieldLooseBase$4(this,_previousSpeed)[_previousSpeed]==null?he:emaFilter(he,_classPrivateFieldLooseBase$4(this,_previousSpeed)[_previousSpeed],speedFilterHalfLife,re);_classPrivateFieldLooseBase$4(this,_previousSpeed)[_previousSpeed]=fe;const ve=G.remaining/fe,$e=Math.max(_classPrivateFieldLooseBase$4(this,_previousETA)[_previousETA]-re,0),_e=_classPrivateFieldLooseBase$4(this,_previousETA)[_previousETA]==null?ve:emaFilter(ve,$e,ETAFilterHalfLife,re);return _classPrivateFieldLooseBase$4(this,_previousETA)[_previousETA]=_e,_classPrivateFieldLooseBase$4(this,_lastUpdateTime)[_lastUpdateTime]=performance.now(),Math.round(_e/100)/10}StatusBar.VERSION=packageJson$4.version;const TRANSITION_MS=300;class FadeIn extends b$2{constructor(){super(...arguments),this.ref=_$3()}componentWillEnter(U){this.ref.current.style.opacity="1",this.ref.current.style.transform="none",setTimeout(U,TRANSITION_MS)}componentWillLeave(U){this.ref.current.style.opacity="0",this.ref.current.style.transform="translateY(350%)",setTimeout(U,TRANSITION_MS)}render(){const{children:U}=this.props;return y$1("div",{className:"uppy-Informer-animated",ref:this.ref},U)}}function assign(G,U){return Object.assign(G,U)}function getKey(G,U){var Y;return(Y=G==null?void 0:G.key)!=null?Y:U}function linkRef(G,U){const Y=G._ptgLinkedRefs||(G._ptgLinkedRefs={});return Y[U]||(Y[U]=re=>{G.refs[U]=re})}function getChildMapping(G){const U={};for(let Y=0;Y<G.length;Y++)if(G[Y]!=null){const re=getKey(G[Y],Y.toString(36));U[re]=G[Y]}return U}function mergeChildMappings(G,U){G=G||{},U=U||{};const Y=ue=>U.hasOwnProperty(ue)?U[ue]:G[ue],re={};let oe=[];for(const ue in G)U.hasOwnProperty(ue)?oe.length&&(re[ue]=oe,oe=[]):oe.push(ue);const le={};for(const ue in U){if(re.hasOwnProperty(ue))for(let he=0;he<re[ue].length;he++){const fe=re[ue][he];le[re[ue][he]]=Y(fe)}le[ue]=Y(ue)}for(let ue=0;ue<oe.length;ue++)le[oe[ue]]=Y(oe[ue]);return le}const identity=G=>G;class TransitionGroup extends b$2{constructor(U,Y){super(U,Y),this.refs={},this.state={children:getChildMapping(S$1(S$1(this.props.children))||[])},this.performAppear=this.performAppear.bind(this),this.performEnter=this.performEnter.bind(this),this.performLeave=this.performLeave.bind(this)}componentWillMount(){this.currentlyTransitioningKeys={},this.keysToAbortLeave=[],this.keysToEnter=[],this.keysToLeave=[]}componentDidMount(){const U=this.state.children;for(const Y in U)U[Y]&&this.performAppear(Y)}componentWillReceiveProps(U){const Y=getChildMapping(S$1(U.children)||[]),re=this.state.children;this.setState(le=>({children:mergeChildMappings(le.children,Y)}));let oe;for(oe in Y)if(Y.hasOwnProperty(oe)){const le=re&&re.hasOwnProperty(oe);Y[oe]&&le&&this.currentlyTransitioningKeys[oe]?(this.keysToEnter.push(oe),this.keysToAbortLeave.push(oe)):Y[oe]&&!le&&!this.currentlyTransitioningKeys[oe]&&this.keysToEnter.push(oe)}for(oe in re)if(re.hasOwnProperty(oe)){const le=Y&&Y.hasOwnProperty(oe);re[oe]&&!le&&!this.currentlyTransitioningKeys[oe]&&this.keysToLeave.push(oe)}}componentDidUpdate(){const{keysToEnter:U}=this;this.keysToEnter=[],U.forEach(this.performEnter);const{keysToLeave:Y}=this;this.keysToLeave=[],Y.forEach(this.performLeave)}_finishAbort(U){const Y=this.keysToAbortLeave.indexOf(U);Y!==-1&&this.keysToAbortLeave.splice(Y,1)}performAppear(U){this.currentlyTransitioningKeys[U]=!0;const Y=this.refs[U];Y!=null&&Y.componentWillAppear?Y.componentWillAppear(this._handleDoneAppearing.bind(this,U)):this._handleDoneAppearing(U)}_handleDoneAppearing(U){const Y=this.refs[U];Y!=null&&Y.componentDidAppear&&Y.componentDidAppear(),delete this.currentlyTransitioningKeys[U],this._finishAbort(U);const re=getChildMapping(S$1(this.props.children)||[]);(!re||!re.hasOwnProperty(U))&&this.performLeave(U)}performEnter(U){this.currentlyTransitioningKeys[U]=!0;const Y=this.refs[U];Y!=null&&Y.componentWillEnter?Y.componentWillEnter(this._handleDoneEntering.bind(this,U)):this._handleDoneEntering(U)}_handleDoneEntering(U){const Y=this.refs[U];Y!=null&&Y.componentDidEnter&&Y.componentDidEnter(),delete this.currentlyTransitioningKeys[U],this._finishAbort(U);const re=getChildMapping(S$1(this.props.children)||[]);(!re||!re.hasOwnProperty(U))&&this.performLeave(U)}performLeave(U){if(this.keysToAbortLeave.indexOf(U)!==-1)return;this.currentlyTransitioningKeys[U]=!0;const re=this.refs[U];re!=null&&re.componentWillLeave?re.componentWillLeave(this._handleDoneLeaving.bind(this,U)):this._handleDoneLeaving(U)}_handleDoneLeaving(U){if(this.keysToAbortLeave.indexOf(U)!==-1)return;const re=this.refs[U];re!=null&&re.componentDidLeave&&re.componentDidLeave(),delete this.currentlyTransitioningKeys[U];const oe=getChildMapping(S$1(this.props.children)||[]);if(oe&&oe.hasOwnProperty(U))this.performEnter(U);else{const le=assign({},this.state.children);delete le[U],this.setState({children:le})}}render(U,Y){let{childFactory:re,transitionLeave:oe,transitionName:le,transitionAppear:ue,transitionEnter:he,transitionLeaveTimeout:fe,transitionEnterTimeout:ve,transitionAppearTimeout:$e,component:_e,...Fe}=U,{children:Ee}=Y;const Se=Object.entries(Ee).map(Ae=>{let[Te,Re]=Ae;if(!Re)return;const Ue=linkRef(this,Te);return F$2(re(Re),{ref:Ue,key:Te})}).filter(Boolean);return y$1(_e,Fe,Se)}}TransitionGroup.defaultProps={component:"span",childFactory:identity};const packageJson$3={version:"3.1.0"};class Informer extends UIPlugin$1{constructor(U,Y){super(U,Y),this.render=re=>y$1("div",{className:"uppy uppy-Informer"},y$1(TransitionGroup,null,re.info.map(oe=>y$1(FadeIn,{key:oe.message},y$1("p",{role:"alert"},oe.message," ",oe.details&&y$1("span",{"aria-label":oe.details,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:()=>alert(`${oe.message} 

 ${oe.details}`)},"?")))))),this.type="progressindicator",this.id=this.opts.id||"Informer",this.title="Informer"}install(){const{target:U}=this.opts;U&&this.mount(U,this)}}Informer.VERSION=packageJson$3.version;const DATA_URL_PATTERN=/^data:([^/]+\/[^,;]+(?:[^,]*?))(;base64)?,([\s\S]*)$/;function dataURItoBlob(G,U,Y){var re,oe;const le=DATA_URL_PATTERN.exec(G),ue=(re=(oe=U.mimeType)!=null?oe:le==null?void 0:le[1])!=null?re:"plain/text";let he;if((le==null?void 0:le[2])!=null){const fe=atob(decodeURIComponent(le[3])),ve=new Uint8Array(fe.length);for(let $e=0;$e<fe.length;$e++)ve[$e]=fe.charCodeAt($e);he=[ve]}else(le==null?void 0:le[3])!=null&&(he=[decodeURIComponent(le[3])]);return Y?new File(he,U.name||"",{type:ue}):new Blob(he,{type:ue})}function isObjectURL(G){return G.startsWith("blob:")}function isPreviewSupported(G){return G?/^[^/]+\/(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(G):!1}function e$1(G,U,Y){return U in G?Object.defineProperty(G,U,{value:Y,enumerable:!0,configurable:!0,writable:!0}):G[U]=Y,G}var t$1=typeof self<"u"?self:global;const s$1=typeof navigator<"u",i$1=s$1&&typeof HTMLImageElement>"u",n=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),r$1=t$1.Buffer,a$1=!!r$1,h$1=G=>G!==void 0;function f$1(G){return G===void 0||(G instanceof Map?G.size===0:Object.values(G).filter(h$1).length===0)}function l$1(G){let U=new Error(G);throw delete U.stack,U}function o$1(G){let U=function(Y){let re=0;return Y.ifd0.enabled&&(re+=1024),Y.exif.enabled&&(re+=2048),Y.makerNote&&(re+=2048),Y.userComment&&(re+=1024),Y.gps.enabled&&(re+=512),Y.interop.enabled&&(re+=100),Y.ifd1.enabled&&(re+=1024),re+2048}(G);return G.jfif.enabled&&(U+=50),G.xmp.enabled&&(U+=2e4),G.iptc.enabled&&(U+=14e3),G.icc.enabled&&(U+=6e3),U}const u$1=G=>String.fromCharCode.apply(null,G),d$1=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;let c$1=class it{static from(U,Y){return U instanceof this&&U.le===Y?U:new it(U,void 0,void 0,Y)}constructor(U,Y=0,re,oe){if(typeof oe=="boolean"&&(this.le=oe),Array.isArray(U)&&(U=new Uint8Array(U)),U===0)this.byteOffset=0,this.byteLength=0;else if(U instanceof ArrayBuffer){re===void 0&&(re=U.byteLength-Y);let le=new DataView(U,Y,re);this._swapDataView(le)}else if(U instanceof Uint8Array||U instanceof DataView||U instanceof it){re===void 0&&(re=U.byteLength-Y),(Y+=U.byteOffset)+re>U.byteOffset+U.byteLength&&l$1("Creating view outside of available memory in ArrayBuffer");let le=new DataView(U.buffer,Y,re);this._swapDataView(le)}else if(typeof U=="number"){let le=new DataView(new ArrayBuffer(U));this._swapDataView(le)}else l$1("Invalid input argument for BufferView: "+U)}_swapArrayBuffer(U){this._swapDataView(new DataView(U))}_swapBuffer(U){this._swapDataView(new DataView(U.buffer,U.byteOffset,U.byteLength))}_swapDataView(U){this.dataView=U,this.buffer=U.buffer,this.byteOffset=U.byteOffset,this.byteLength=U.byteLength}_lengthToEnd(U){return this.byteLength-U}set(U,Y,re=it){return U instanceof DataView||U instanceof it?U=new Uint8Array(U.buffer,U.byteOffset,U.byteLength):U instanceof ArrayBuffer&&(U=new Uint8Array(U)),U instanceof Uint8Array||l$1("BufferView.set(): Invalid data argument."),this.toUint8().set(U,Y),new re(this,Y,U.byteLength)}subarray(U,Y){return Y=Y||this._lengthToEnd(U),new it(this,U,Y)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(U,Y){return new Uint8Array(this.buffer,this.byteOffset+U,Y)}getString(U=0,Y=this.byteLength){return oe=this.getUint8Array(U,Y),d$1?d$1.decode(oe):a$1?Buffer.from(oe).toString("utf8"):decodeURIComponent(escape(u$1(oe)));var oe}getLatin1String(U=0,Y=this.byteLength){let re=this.getUint8Array(U,Y);return u$1(re)}getUnicodeString(U=0,Y=this.byteLength){const re=[];for(let oe=0;oe<Y&&U+oe<this.byteLength;oe+=2)re.push(this.getUint16(U+oe));return u$1(re)}getInt8(U){return this.dataView.getInt8(U)}getUint8(U){return this.dataView.getUint8(U)}getInt16(U,Y=this.le){return this.dataView.getInt16(U,Y)}getInt32(U,Y=this.le){return this.dataView.getInt32(U,Y)}getUint16(U,Y=this.le){return this.dataView.getUint16(U,Y)}getUint32(U,Y=this.le){return this.dataView.getUint32(U,Y)}getFloat32(U,Y=this.le){return this.dataView.getFloat32(U,Y)}getFloat64(U,Y=this.le){return this.dataView.getFloat64(U,Y)}getFloat(U,Y=this.le){return this.dataView.getFloat32(U,Y)}getDouble(U,Y=this.le){return this.dataView.getFloat64(U,Y)}getUintBytes(U,Y,re){switch(Y){case 1:return this.getUint8(U,re);case 2:return this.getUint16(U,re);case 4:return this.getUint32(U,re);case 8:return this.getUint64&&this.getUint64(U,re)}}getUint(U,Y,re){switch(Y){case 8:return this.getUint8(U,re);case 16:return this.getUint16(U,re);case 32:return this.getUint32(U,re);case 64:return this.getUint64&&this.getUint64(U,re)}}toString(U){return this.dataView.toString(U,this.constructor.name)}ensureChunk(){}};function p$1(G,U){l$1(`${G} '${U}' was not loaded, try using full build of exifr.`)}let g$1=class extends Map{constructor(U){super(),this.kind=U}get(U,Y){return this.has(U)||p$1(this.kind,U),Y&&(U in Y||function(re,oe){l$1(`Unknown ${re} '${oe}'.`)}(this.kind,U),Y[U].enabled||p$1(this.kind,U)),super.get(U)}keyList(){return Array.from(this.keys())}};var m$1=new g$1("file parser"),y=new g$1("segment parser"),b$1=new g$1("file reader");let w$1=t$1.fetch;function k$1(G,U){return(Y=G).startsWith("data:")||Y.length>1e4?v$1(G,U,"base64"):n&&G.includes("://")?O(G,U,"url",S):n?v$1(G,U,"fs"):s$1?O(G,U,"url",S):void l$1("Invalid input argument");var Y}async function O(G,U,Y,re){return b$1.has(Y)?v$1(G,U,Y):re?async function(oe,le){let ue=await le(oe);return new c$1(ue)}(G,re):void l$1(`Parser ${Y} is not loaded`)}async function v$1(G,U,Y){let re=new(b$1.get(Y))(G,U);return await re.read(),re}const S=G=>w$1(G).then(U=>U.arrayBuffer()),A=G=>new Promise((U,Y)=>{let re=new FileReader;re.onloadend=()=>U(re.result||new ArrayBuffer),re.onerror=Y,re.readAsArrayBuffer(G)}),B$1=new Map,V=new Map,I=new Map,L=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],T$1=["jfif","xmp","icc","iptc","ihdr"],z$1=["tiff",...T$1],P=["ifd0","ifd1","exif","gps","interop"],F$1=[...z$1,...P],j$1=["makerNote","userComment"],E=["translateKeys","translateValues","reviveValues","multiSegment"],M=[...E,"sanitize","mergeOutput","silentErrors"];let _$2=class{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}};class D extends _$2{get needed(){return this.enabled||this.deps.size>0}constructor(U,Y,re,oe){if(super(),e$1(this,"enabled",!1),e$1(this,"skip",new Set),e$1(this,"pick",new Set),e$1(this,"deps",new Set),e$1(this,"translateKeys",!1),e$1(this,"translateValues",!1),e$1(this,"reviveValues",!1),this.key=U,this.enabled=Y,this.parse=this.enabled,this.applyInheritables(oe),this.canBeFiltered=P.includes(U),this.canBeFiltered&&(this.dict=B$1.get(U)),re!==void 0)if(Array.isArray(re))this.parse=this.enabled=!0,this.canBeFiltered&&re.length>0&&this.translateTagSet(re,this.pick);else if(typeof re=="object"){if(this.enabled=!0,this.parse=re.parse!==!1,this.canBeFiltered){let{pick:le,skip:ue}=re;le&&le.length>0&&this.translateTagSet(le,this.pick),ue&&ue.length>0&&this.translateTagSet(ue,this.skip)}this.applyInheritables(re)}else re===!0||re===!1?this.parse=this.enabled=re:l$1(`Invalid options argument: ${re}`)}applyInheritables(U){let Y,re;for(Y of E)re=U[Y],re!==void 0&&(this[Y]=re)}translateTagSet(U,Y){if(this.dict){let re,oe,{tagKeys:le,tagValues:ue}=this.dict;for(re of U)typeof re=="string"?(oe=ue.indexOf(re),oe===-1&&(oe=le.indexOf(Number(re))),oe!==-1&&Y.add(Number(le[oe]))):Y.add(re)}else for(let re of U)Y.add(re)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,X(this.pick,this.deps)):this.enabled&&this.pick.size>0&&X(this.pick,this.deps)}}var N={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},$=new Map;class R extends _$2{static useCached(U){let Y=$.get(U);return Y!==void 0||(Y=new this(U),$.set(U,Y)),Y}constructor(U){super(),U===!0?this.setupFromTrue():U===void 0?this.setupFromUndefined():Array.isArray(U)?this.setupFromArray(U):typeof U=="object"?this.setupFromObject(U):l$1(`Invalid options argument ${U}`),this.firstChunkSize===void 0&&(this.firstChunkSize=s$1?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let U;for(U of L)this[U]=N[U];for(U of M)this[U]=N[U];for(U of j$1)this[U]=N[U];for(U of F$1)this[U]=new D(U,N[U],void 0,this)}setupFromTrue(){let U;for(U of L)this[U]=N[U];for(U of M)this[U]=N[U];for(U of j$1)this[U]=!0;for(U of F$1)this[U]=new D(U,!0,void 0,this)}setupFromArray(U){let Y;for(Y of L)this[Y]=N[Y];for(Y of M)this[Y]=N[Y];for(Y of j$1)this[Y]=N[Y];for(Y of F$1)this[Y]=new D(Y,!1,void 0,this);this.setupGlobalFilters(U,void 0,P)}setupFromObject(U){let Y;for(Y of(P.ifd0=P.ifd0||P.image,P.ifd1=P.ifd1||P.thumbnail,Object.assign(this,U),L))this[Y]=W(U[Y],N[Y]);for(Y of M)this[Y]=W(U[Y],N[Y]);for(Y of j$1)this[Y]=W(U[Y],N[Y]);for(Y of z$1)this[Y]=new D(Y,N[Y],U[Y],this);for(Y of P)this[Y]=new D(Y,N[Y],U[Y],this.tiff);this.setupGlobalFilters(U.pick,U.skip,P,F$1),U.tiff===!0?this.batchEnableWithBool(P,!0):U.tiff===!1?this.batchEnableWithUserValue(P,U):Array.isArray(U.tiff)?this.setupGlobalFilters(U.tiff,void 0,P):typeof U.tiff=="object"&&this.setupGlobalFilters(U.tiff.pick,U.tiff.skip,P)}batchEnableWithBool(U,Y){for(let re of U)this[re].enabled=Y}batchEnableWithUserValue(U,Y){for(let re of U){let oe=Y[re];this[re].enabled=oe!==!1&&oe!==void 0}}setupGlobalFilters(U,Y,re,oe=re){if(U&&U.length){for(let ue of oe)this[ue].enabled=!1;let le=K(U,re);for(let[ue,he]of le)X(this[ue].pick,he),this[ue].enabled=!0}else if(Y&&Y.length){let le=K(Y,re);for(let[ue,he]of le)X(this[ue].skip,he)}}filterNestedSegmentTags(){let{ifd0:U,exif:Y,xmp:re,iptc:oe,icc:le}=this;this.makerNote?Y.deps.add(37500):Y.skip.add(37500),this.userComment?Y.deps.add(37510):Y.skip.add(37510),re.enabled||U.skip.add(700),oe.enabled||U.skip.add(33723),le.enabled||U.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:U,exif:Y,gps:re,interop:oe}=this;oe.needed&&(Y.deps.add(40965),U.deps.add(40965)),Y.needed&&U.deps.add(34665),re.needed&&U.deps.add(34853),this.tiff.enabled=P.some(le=>this[le].enabled===!0)||this.makerNote||this.userComment;for(let le of P)this[le].finalizeFilters()}get onlyTiff(){return!T$1.map(U=>this[U].enabled).some(U=>U===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let U of z$1)this[U].enabled&&!y.has(U)&&p$1("segment parser",U)}}function K(G,U){let Y,re,oe,le,ue=[];for(oe of U){for(le of(Y=B$1.get(oe),re=[],Y))(G.includes(le[0])||G.includes(le[1]))&&re.push(le[0]);re.length&&ue.push([oe,re])}return ue}function W(G,U){return G!==void 0?G:U!==void 0?U:void 0}function X(G,U){for(let Y of U)G.add(Y)}e$1(R,"default",N);class H{constructor(U){e$1(this,"parsers",{}),e$1(this,"output",{}),e$1(this,"errors",[]),e$1(this,"pushToErrors",Y=>this.errors.push(Y)),this.options=R.useCached(U)}async read(U){this.file=await function(Y,re){return typeof Y=="string"?k$1(Y,re):s$1&&!i$1&&Y instanceof HTMLImageElement?k$1(Y.src,re):Y instanceof Uint8Array||Y instanceof ArrayBuffer||Y instanceof DataView?new c$1(Y):s$1&&Y instanceof Blob?O(Y,re,"blob",A):void l$1("Invalid input argument")}(U,this.options)}setup(){if(this.fileParser)return;let{file:U}=this,Y=U.getUint16(0);for(let[re,oe]of m$1)if(oe.canHandle(U,Y))return this.fileParser=new oe(this.options,this.file,this.parsers),U[re]=!0;this.file.close&&this.file.close(),l$1("Unknown file format")}async parse(){let{output:U,errors:Y}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),Y.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&Y.length>0&&(U.errors=Y),f$1(re=U)?void 0:re;var re}async executeParsers(){let{output:U}=this;await this.fileParser.parse();let Y=Object.values(this.parsers).map(async re=>{let oe=await re.parse();re.assignToOutput(U,oe)});this.options.silentErrors&&(Y=Y.map(re=>re.catch(this.pushToErrors))),await Promise.all(Y)}async extractThumbnail(){this.setup();let{options:U,file:Y}=this,re=y.get("tiff",U);var oe;if(Y.tiff?oe={start:0,type:"tiff"}:Y.jpeg&&(oe=await this.fileParser.getOrFindSegment("tiff")),oe===void 0)return;let le=await this.fileParser.ensureSegmentChunk(oe),ue=this.parsers.tiff=new re(le,U,Y),he=await ue.extractThumbnail();return Y.close&&Y.close(),he}}class J{static findPosition(U,Y){let re=U.getUint16(Y+2)+2,oe=typeof this.headerLength=="function"?this.headerLength(U,Y,re):this.headerLength,le=Y+oe,ue=re-oe;return{offset:Y,length:re,headerLength:oe,start:le,size:ue,end:le+ue}}static parse(U,Y={}){return new this(U,new R({[this.type]:Y}),U).parse()}normalizeInput(U){return U instanceof c$1?U:new c$1(U)}constructor(U,Y={},re){e$1(this,"errors",[]),e$1(this,"raw",new Map),e$1(this,"handleError",oe=>{if(!this.options.silentErrors)throw oe;this.errors.push(oe.message)}),this.chunk=this.normalizeInput(U),this.file=re,this.type=this.constructor.type,this.globalOptions=this.options=Y,this.localOptions=Y[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(U,Y){let re=I.get(Y),oe=V.get(Y),le=B$1.get(Y),ue=this.options[Y],he=ue.reviveValues&&!!re,fe=ue.translateValues&&!!oe,ve=ue.translateKeys&&!!le,$e={};for(let[_e,Fe]of U)he&&re.has(_e)?Fe=re.get(_e)(Fe):fe&&oe.has(_e)&&(Fe=this.translateValue(Fe,oe.get(_e))),ve&&le.has(_e)&&(_e=le.get(_e)||_e),$e[_e]=Fe;return $e}translateValue(U,Y){return Y[U]||Y.DEFAULT||U}assignToOutput(U,Y){this.assignObjectToOutput(U,this.constructor.type,Y)}assignObjectToOutput(U,Y,re){if(this.globalOptions.mergeOutput)return Object.assign(U,re);U[Y]?Object.assign(U[Y],re):U[Y]=re}}e$1(J,"headerLength",4),e$1(J,"type",void 0),e$1(J,"multiSegment",!1),e$1(J,"canHandle",()=>!1);function q(G){return G===192||G===194||G===196||G===219||G===221||G===218||G===254}function Q(G){return G>=224&&G<=239}function Z(G,U,Y){for(let[re,oe]of y)if(oe.canHandle(G,U,Y))return re}class ee extends class{constructor(U,Y,re){e$1(this,"errors",[]),e$1(this,"ensureSegmentChunk",async oe=>{let le=oe.start,ue=oe.size||65536;if(this.file.chunked)if(this.file.available(le,ue))oe.chunk=this.file.subarray(le,ue);else try{oe.chunk=await this.file.readChunk(le,ue)}catch(he){l$1(`Couldn't read segment: ${JSON.stringify(oe)}. ${he.message}`)}else this.file.byteLength>le+ue?oe.chunk=this.file.subarray(le,ue):oe.size===void 0?oe.chunk=this.file.subarray(le):l$1("Segment unreachable: "+JSON.stringify(oe));return oe.chunk}),this.extendOptions&&this.extendOptions(U),this.options=U,this.file=Y,this.parsers=re}injectSegment(U,Y){this.options[U].enabled&&this.createParser(U,Y)}createParser(U,Y){let re=new(y.get(U))(Y,this.options,this.file);return this.parsers[U]=re}createParsers(U){for(let Y of U){let{type:re,chunk:oe}=Y,le=this.options[re];if(le&&le.enabled){let ue=this.parsers[re];ue&&ue.append||ue||this.createParser(re,oe)}}}async readSegments(U){let Y=U.map(this.ensureSegmentChunk);await Promise.all(Y)}}{constructor(...U){super(...U),e$1(this,"appSegments",[]),e$1(this,"jpegSegments",[]),e$1(this,"unknownSegments",[])}static canHandle(U,Y){return Y===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(U){U===!0?(this.findAll=!0,this.wanted=new Set(y.keyList())):(U=U===void 0?y.keyList().filter(Y=>this.options[Y].enabled):U.filter(Y=>this.options[Y].enabled&&y.has(Y)),this.findAll=!1,this.remaining=new Set(U),this.wanted=new Set(U)),this.unfinishedMultiSegment=!1}async findAppSegments(U=0,Y){this.setupSegmentFinderArgs(Y);let{file:re,findAll:oe,wanted:le,remaining:ue}=this;if(!oe&&this.file.chunked&&(oe=Array.from(le).some(he=>{let fe=y.get(he),ve=this.options[he];return fe.multiSegment&&ve.multiSegment}),oe&&await this.file.readWhole()),U=this.findAppSegmentsInRange(U,re.byteLength),!this.options.onlyTiff&&re.chunked){let he=!1;for(;ue.size>0&&!he&&(re.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:fe}=re,ve=this.appSegments.some($e=>!this.file.available($e.offset||$e.start,$e.length||$e.size));if(he=U>fe&&!ve?!await re.readNextChunk(U):!await re.readNextChunk(fe),(U=this.findAppSegmentsInRange(U,re.byteLength))===void 0)return}}}findAppSegmentsInRange(U,Y){Y-=2;let re,oe,le,ue,he,fe,{file:ve,findAll:$e,wanted:_e,remaining:Fe,options:Ee}=this;for(;U<Y;U++)if(ve.getUint8(U)===255){if(re=ve.getUint8(U+1),Q(re)){if(oe=ve.getUint16(U+2),le=Z(ve,U,oe),le&&_e.has(le)&&(ue=y.get(le),he=ue.findPosition(ve,U),fe=Ee[le],he.type=le,this.appSegments.push(he),!$e&&(ue.multiSegment&&fe.multiSegment?(this.unfinishedMultiSegment=he.chunkNumber<he.chunkCount,this.unfinishedMultiSegment||Fe.delete(le)):Fe.delete(le),Fe.size===0)))break;Ee.recordUnknownSegments&&(he=J.findPosition(ve,U),he.marker=re,this.unknownSegments.push(he)),U+=oe+1}else if(q(re)){if(oe=ve.getUint16(U+2),re===218&&Ee.stopAfterSos!==!1)return;Ee.recordJpegSegments&&this.jpegSegments.push({offset:U,length:oe,marker:re}),U+=oe+1}}return U}mergeMultiSegments(){if(!this.appSegments.some(Y=>Y.multiSegment))return;let U=function(Y,re){let oe,le,ue,he=new Map;for(let fe=0;fe<Y.length;fe++)oe=Y[fe],le=oe[re],he.has(le)?ue=he.get(le):he.set(le,ue=[]),ue.push(oe);return Array.from(he)}(this.appSegments,"type");this.mergedAppSegments=U.map(([Y,re])=>{let oe=y.get(Y,this.options);return oe.handleMultiSegments?{type:Y,chunk:oe.handleMultiSegments(re)}:re[0]})}getSegment(U){return this.appSegments.find(Y=>Y.type===U)}async getOrFindSegment(U){let Y=this.getSegment(U);return Y===void 0&&(await this.findAppSegments(0,[U]),Y=this.getSegment(U)),Y}}e$1(ee,"type","jpeg"),m$1.set("jpeg",ee);const te=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class se extends J{parseHeader(){var U=this.chunk.getUint16();U===18761?this.le=!0:U===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(U,Y,re=new Map){let{pick:oe,skip:le}=this.options[Y];oe=new Set(oe);let ue=oe.size>0,he=le.size===0,fe=this.chunk.getUint16(U);U+=2;for(let ve=0;ve<fe;ve++){let $e=this.chunk.getUint16(U);if(ue){if(oe.has($e)&&(re.set($e,this.parseTag(U,$e,Y)),oe.delete($e),oe.size===0))break}else!he&&le.has($e)||re.set($e,this.parseTag(U,$e,Y));U+=12}return re}parseTag(U,Y,re){let{chunk:oe}=this,le=oe.getUint16(U+2),ue=oe.getUint32(U+4),he=te[le];if(he*ue<=4?U+=8:U=oe.getUint32(U+8),(le<1||le>13)&&l$1(`Invalid TIFF value type. block: ${re.toUpperCase()}, tag: ${Y.toString(16)}, type: ${le}, offset ${U}`),U>oe.byteLength&&l$1(`Invalid TIFF value offset. block: ${re.toUpperCase()}, tag: ${Y.toString(16)}, type: ${le}, offset ${U} is outside of chunk size ${oe.byteLength}`),le===1)return oe.getUint8Array(U,ue);if(le===2)return(fe=function(ve){for(;ve.endsWith("\0");)ve=ve.slice(0,-1);return ve}(fe=oe.getString(U,ue)).trim())===""?void 0:fe;var fe;if(le===7)return oe.getUint8Array(U,ue);if(ue===1)return this.parseTagValue(le,U);{let ve=new(function(_e){switch(_e){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(le))(ue),$e=he;for(let _e=0;_e<ue;_e++)ve[_e]=this.parseTagValue(le,U),U+=$e;return ve}}parseTagValue(U,Y){let{chunk:re}=this;switch(U){case 1:return re.getUint8(Y);case 3:return re.getUint16(Y);case 4:return re.getUint32(Y);case 5:return re.getUint32(Y)/re.getUint32(Y+4);case 6:return re.getInt8(Y);case 8:return re.getInt16(Y);case 9:return re.getInt32(Y);case 10:return re.getInt32(Y)/re.getInt32(Y+4);case 11:return re.getFloat(Y);case 12:return re.getDouble(Y);case 13:return re.getUint32(Y);default:l$1(`Invalid tiff type ${U}`)}}}class ie extends se{static canHandle(U,Y){return U.getUint8(Y+1)===225&&U.getUint32(Y+4)===1165519206&&U.getUint16(Y+8)===0}async parse(){this.parseHeader();let{options:U}=this;return U.ifd0.enabled&&await this.parseIfd0Block(),U.exif.enabled&&await this.safeParse("parseExifBlock"),U.gps.enabled&&await this.safeParse("parseGpsBlock"),U.interop.enabled&&await this.safeParse("parseInteropBlock"),U.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(U){let Y=this[U]();return Y.catch!==void 0&&(Y=Y.catch(this.handleError)),Y}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let U=this.chunk.getUint16(this.ifd0Offset),Y=this.ifd0Offset+2+12*U;this.ifd1Offset=this.chunk.getUint32(Y)}}parseBlock(U,Y){let re=new Map;return this[Y]=re,this.parseTags(U,Y,re),re}async parseIfd0Block(){if(this.ifd0)return;let{file:U}=this;this.findIfd0Offset(),this.ifd0Offset<8&&l$1("Malformed EXIF data"),!U.chunked&&this.ifd0Offset>U.byteLength&&l$1(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${U.byteLength}`),U.tiff&&await U.ensureChunk(this.ifd0Offset,o$1(this.options));let Y=this.parseBlock(this.ifd0Offset,"ifd0");return Y.size!==0?(this.exifOffset=Y.get(34665),this.interopOffset=Y.get(40965),this.gpsOffset=Y.get(34853),this.xmp=Y.get(700),this.iptc=Y.get(33723),this.icc=Y.get(34675),this.options.sanitize&&(Y.delete(34665),Y.delete(40965),Y.delete(34853),Y.delete(700),Y.delete(33723),Y.delete(34675)),Y):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,o$1(this.options));let U=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=U.get(40965)),this.makerNote=U.get(37500),this.userComment=U.get(37510),this.options.sanitize&&(U.delete(40965),U.delete(37500),U.delete(37510)),this.unpack(U,41728),this.unpack(U,41729),U}unpack(U,Y){let re=U.get(Y);re&&re.length===1&&U.set(Y,re[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let U=this.parseBlock(this.gpsOffset,"gps");return U&&U.has(2)&&U.has(4)&&(U.set("latitude",ne(...U.get(2),U.get(1))),U.set("longitude",ne(...U.get(4),U.get(3)))),U}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(U=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||U))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let U=this.ifd1.get(513),Y=this.ifd1.get(514);return this.chunk.getUint8Array(U,Y)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let U,Y,re,oe={};for(Y of P)if(U=this[Y],!f$1(U))if(re=this.canTranslate?this.translateBlock(U,Y):Object.fromEntries(U),this.options.mergeOutput){if(Y==="ifd1")continue;Object.assign(oe,re)}else oe[Y]=re;return this.makerNote&&(oe.makerNote=this.makerNote),this.userComment&&(oe.userComment=this.userComment),oe}assignToOutput(U,Y){if(this.globalOptions.mergeOutput)Object.assign(U,Y);else for(let[re,oe]of Object.entries(Y))this.assignObjectToOutput(U,re,oe)}}function ne(G,U,Y,re){var oe=G+U/60+Y/3600;return re!=="S"&&re!=="W"||(oe*=-1),oe}e$1(ie,"type","tiff"),e$1(ie,"headerLength",10),y.set("tiff",ie);const ae={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1};Object.assign({},ae,{firstChunkSize:4e4,gps:[1,2,3,4]});Object.assign({},ae,{tiff:!1,ifd1:!0,mergeOutput:!1});const de=Object.assign({},ae,{firstChunkSize:4e4,ifd0:[274]});async function ce(G){let U=new H(de);await U.read(G);let Y=await U.parse();if(Y&&Y.ifd0)return Y.ifd0[274]}const pe=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let ge=!0,me=!0;if(typeof navigator=="object"){let G=navigator.userAgent;if(G.includes("iPad")||G.includes("iPhone")){let U=G.match(/OS (\d+)_(\d+)/);if(U){let[,Y,re]=U;ge=Number(Y)+.1*Number(re)<13.4,me=!1}}else if(G.includes("OS X 10")){let[,U]=G.match(/OS X 10[_.](\d+)/);ge=me=Number(U)<15}if(G.includes("Chrome/")){let[,U]=G.match(/Chrome\/(\d+)/);ge=me=Number(U)<81}else if(G.includes("Firefox/")){let[,U]=G.match(/Firefox\/(\d+)/);ge=me=Number(U)<77}}async function ye(G){let U=await ce(G);return Object.assign({canvas:ge,css:me},pe[U])}class be extends c$1{constructor(...U){super(...U),e$1(this,"ranges",new we),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(U,Y,re){if(U===0&&this.byteLength===0&&re){let oe=new DataView(re.buffer||re,re.byteOffset,re.byteLength);this._swapDataView(oe)}else{let oe=U+Y;if(oe>this.byteLength){let{dataView:le}=this._extend(oe);this._swapDataView(le)}}}_extend(U){let Y;Y=a$1?r$1.allocUnsafe(U):new Uint8Array(U);let re=new DataView(Y.buffer,Y.byteOffset,Y.byteLength);return Y.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:Y,dataView:re}}subarray(U,Y,re=!1){return Y=Y||this._lengthToEnd(U),re&&this._tryExtend(U,Y),this.ranges.add(U,Y),super.subarray(U,Y)}set(U,Y,re=!1){re&&this._tryExtend(Y,U.byteLength,U);let oe=super.set(U,Y);return this.ranges.add(Y,oe.byteLength),oe}async ensureChunk(U,Y){this.chunked&&(this.ranges.available(U,Y)||await this.readChunk(U,Y))}available(U,Y){return this.ranges.available(U,Y)}}class we{constructor(){e$1(this,"list",[])}get length(){return this.list.length}add(U,Y,re=0){let oe=U+Y,le=this.list.filter(ue=>ke(U,ue.offset,oe)||ke(U,ue.end,oe));if(le.length>0){U=Math.min(U,...le.map(he=>he.offset)),oe=Math.max(oe,...le.map(he=>he.end)),Y=oe-U;let ue=le.shift();ue.offset=U,ue.length=Y,ue.end=oe,this.list=this.list.filter(he=>!le.includes(he))}else this.list.push({offset:U,length:Y,end:oe})}available(U,Y){let re=U+Y;return this.list.some(oe=>oe.offset<=U&&re<=oe.end)}}function ke(G,U,Y){return G<=U&&U<=Y}class Oe extends be{constructor(U,Y){super(0),e$1(this,"chunksRead",0),this.input=U,this.options=Y}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(U=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let Y=this.options.chunkSize,re=await this.readChunk(U,Y);return!!re&&re.byteLength===Y}async readChunk(U,Y){if(this.chunksRead++,(Y=this.safeWrapAddress(U,Y))!==0)return this._readChunk(U,Y)}safeWrapAddress(U,Y){return this.size!==void 0&&U+Y>this.size?Math.max(0,this.size-U):Y}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}b$1.set("blob",class extends Oe{async readWhole(){this.chunked=!1;let G=await A(this.input);this._swapArrayBuffer(G)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(G,U){let Y=U?G+U:void 0,re=this.input.slice(G,Y),oe=await A(re);return this.set(oe,G,!0)}});const locale$1={strings:{generatingThumbnails:"Generating thumbnails..."}},packageJson$2={version:"3.1.0"};function canvasToBlob(G,U,Y){try{G.getContext("2d").getImageData(0,0,1,1)}catch(re){if(re.code===18)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return G.toBlob?new Promise(re=>{G.toBlob(re,U,Y)}).then(re=>{if(re===null)throw new Error("cannot read image, probably an svg with external resources");return re}):Promise.resolve().then(()=>dataURItoBlob(G.toDataURL(U,Y),{})).then(re=>{if(re===null)throw new Error("could not extract blob, probably an old browser");return re})}function rotateImage(G,U){let Y=G.width,re=G.height;(U.deg===90||U.deg===270)&&(Y=G.height,re=G.width);const oe=document.createElement("canvas");oe.width=Y,oe.height=re;const le=oe.getContext("2d");return le.translate(Y/2,re/2),U.canvas&&(le.rotate(U.rad),le.scale(U.scaleX,U.scaleY)),le.drawImage(G,-G.width/2,-G.height/2,G.width,G.height),oe}function protect(G){const U=G.width/G.height,Y=5e6,re=4096;let oe=Math.floor(Math.sqrt(Y*U)),le=Math.floor(Y/Math.sqrt(Y*U));if(oe>re&&(oe=re,le=Math.round(oe/U)),le>re&&(le=re,oe=Math.round(U*le)),G.width>oe){const ue=document.createElement("canvas");return ue.width=oe,ue.height=le,ue.getContext("2d").drawImage(G,0,0,oe,le),ue}return G}const defaultOptions$4={thumbnailWidth:null,thumbnailHeight:null,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,lazy:!1};class ThumbnailGenerator extends UIPlugin$1{constructor(U,Y){if(super(U,{...defaultOptions$4,...Y}),this.onFileAdded=re=>{!re.preview&&re.data&&isPreviewSupported(re.type)&&!re.isRemote&&this.addToQueue(re.id)},this.onCancelRequest=re=>{const oe=this.queue.indexOf(re.id);oe!==-1&&this.queue.splice(oe,1)},this.onFileRemoved=re=>{const oe=this.queue.indexOf(re.id);oe!==-1&&this.queue.splice(oe,1),re.preview&&isObjectURL(re.preview)&&URL.revokeObjectURL(re.preview)},this.onRestored=()=>{this.uppy.getFiles().filter(oe=>oe.isRestored).forEach(oe=>{(!oe.preview||isObjectURL(oe.preview))&&this.addToQueue(oe.id)})},this.onAllFilesRemoved=()=>{this.queue=[]},this.waitUntilAllProcessed=re=>{re.forEach(le=>{const ue=this.uppy.getFile(le);this.uppy.emit("preprocess-progress",ue,{mode:"indeterminate",message:this.i18n("generatingThumbnails")})});const oe=()=>{re.forEach(le=>{const ue=this.uppy.getFile(le);this.uppy.emit("preprocess-complete",ue)})};return new Promise(le=>{this.queueProcessing?this.uppy.once("thumbnail:all-generated",()=>{oe(),le()}):(oe(),le())})},this.type="modifier",this.id=this.opts.id||"ThumbnailGenerator",this.title="Thumbnail Generator",this.queue=[],this.queueProcessing=!1,this.defaultThumbnailDimension=200,this.thumbnailType=this.opts.thumbnailType,this.defaultLocale=locale$1,this.i18nInit(),this.opts.lazy&&this.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.")}createThumbnail(U,Y,re){const oe=URL.createObjectURL(U.data),le=new Promise((he,fe)=>{const ve=new Image;ve.src=oe,ve.addEventListener("load",()=>{URL.revokeObjectURL(oe),he(ve)}),ve.addEventListener("error",$e=>{URL.revokeObjectURL(oe),fe($e.error||new Error("Could not create thumbnail"))})}),ue=ye(U.data).catch(()=>1);return Promise.all([le,ue]).then(he=>{let[fe,ve]=he;const $e=this.getProportionalDimensions(fe,Y,re,ve.deg),_e=rotateImage(fe,ve),Fe=this.resizeImage(_e,$e.width,$e.height);return canvasToBlob(Fe,this.thumbnailType,80)}).then(he=>URL.createObjectURL(he))}getProportionalDimensions(U,Y,re,oe){let le=U.width/U.height;return(oe===90||oe===270)&&(le=U.height/U.width),Y!=null?{width:Y,height:Math.round(Y/le)}:re!=null?{width:Math.round(re*le),height:re}:{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/le)}}resizeImage(U,Y,re){let oe=protect(U),le=Math.ceil(Math.log2(oe.width/Y));le<1&&(le=1);let ue=Y*2**(le-1),he=re*2**(le-1);const fe=2;for(;le--;){const ve=document.createElement("canvas");ve.width=ue,ve.height=he,ve.getContext("2d").drawImage(oe,0,0,ue,he),oe=ve,ue=Math.round(ue/fe),he=Math.round(he/fe)}return oe}setPreviewURL(U,Y){this.uppy.setFileState(U,{preview:Y})}addToQueue(U){this.queue.push(U),this.queueProcessing===!1&&this.processQueue()}processQueue(){if(this.queueProcessing=!0,this.queue.length>0){const U=this.uppy.getFile(this.queue.shift());return U?this.requestThumbnail(U).catch(()=>{}).then(()=>this.processQueue()):(this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error"),Promise.resolve())}return this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated"),Promise.resolve()}requestThumbnail(U){return isPreviewSupported(U.type)&&!U.isRemote?this.createThumbnail(U,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then(Y=>{this.setPreviewURL(U.id,Y),this.uppy.log(`[ThumbnailGenerator] Generated thumbnail for ${U.id}`),this.uppy.emit("thumbnail:generated",this.uppy.getFile(U.id),Y)}).catch(Y=>{this.uppy.log(`[ThumbnailGenerator] Failed thumbnail for ${U.id}:`,"warning"),this.uppy.log(Y,"warning"),this.uppy.emit("thumbnail:error",this.uppy.getFile(U.id),Y)}):Promise.resolve()}install(){this.uppy.on("file-removed",this.onFileRemoved),this.uppy.on("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)}uninstall(){this.uppy.off("file-removed",this.onFileRemoved),this.uppy.off("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)}}ThumbnailGenerator.VERSION=packageJson$2.version;function findAllDOMElements(G){if(typeof G=="string"){const U=document.querySelectorAll(G);return U.length===0?null:Array.from(U)}return typeof G=="object"&&isDOMElement(G)?[G]:null}const toArray=Array.from;function getFilesAndDirectoriesFromDirectory(G,U,Y,re){let{onSuccess:oe}=re;G.readEntries(le=>{const ue=[...U,...le];le.length?queueMicrotask(()=>{getFilesAndDirectoriesFromDirectory(G,ue,Y,{onSuccess:oe})}):oe(ue)},le=>{Y(le),oe(U)})}function getAsFileSystemHandleFromEntry(G,U){return G==null?G:{kind:G.isFile?"file":G.isDirectory?"directory":void 0,name:G.name,getFile(){return new Promise((Y,re)=>G.file(Y,re))},async*values(){const Y=G.createReader();yield*await new Promise(oe=>{getFilesAndDirectoriesFromDirectory(Y,[],U,{onSuccess:le=>oe(le.map(ue=>getAsFileSystemHandleFromEntry(ue,U)))})})},isSameEntry:void 0}}function createPromiseToAddFileOrParseDirectory(G,U,Y){try{return Y===void 0&&(Y=void 0),async function*(){const re=()=>`${U}/${G.name}`;if(G.kind==="file"){const oe=await G.getFile();oe!=null?(oe.relativePath=U?re():null,yield oe):Y!=null&&(yield Y)}else if(G.kind==="directory")for await(const oe of G.values())yield*createPromiseToAddFileOrParseDirectory(oe,U?re():G.name);else Y!=null&&(yield Y)}()}catch(re){return Promise.reject(re)}}async function*getFilesFromDataTransfer(G,U){const Y=await Promise.all(Array.from(G.items,async re=>{var oe;let le;const ue=()=>typeof re.getAsEntry=="function"?re.getAsEntry():re.webkitGetAsEntry();return(oe=le)!=null||(le=getAsFileSystemHandleFromEntry(ue(),U)),{fileSystemHandle:le,lastResortFile:re.getAsFile()}}));for(const{lastResortFile:re,fileSystemHandle:oe}of Y)if(oe!=null)try{yield*createPromiseToAddFileOrParseDirectory(oe,"",re)}catch(le){re!=null?yield re:U(le)}else re!=null&&(yield re)}function fallbackApi(G){const U=toArray(G.files);return Promise.resolve(U)}async function getDroppedFiles(G,U){var Y;const re=(Y=U==null?void 0:U.logDropError)!=null?Y:Function.prototype;try{const oe=[];for await(const le of getFilesFromDataTransfer(G,re))oe.push(le);return oe}catch{return fallbackApi(G)}}var eventemitter3={exports:{}};(function(G){var U=Object.prototype.hasOwnProperty,Y="~";function re(){}Object.create&&(re.prototype=Object.create(null),new re().__proto__||(Y=!1));function oe(fe,ve,$e){this.fn=fe,this.context=ve,this.once=$e||!1}function le(fe,ve,$e,_e,Fe){if(typeof $e!="function")throw new TypeError("The listener must be a function");var Ee=new oe($e,_e||fe,Fe),Se=Y?Y+ve:ve;return fe._events[Se]?fe._events[Se].fn?fe._events[Se]=[fe._events[Se],Ee]:fe._events[Se].push(Ee):(fe._events[Se]=Ee,fe._eventsCount++),fe}function ue(fe,ve){--fe._eventsCount===0?fe._events=new re:delete fe._events[ve]}function he(){this._events=new re,this._eventsCount=0}he.prototype.eventNames=function(){var ve=[],$e,_e;if(this._eventsCount===0)return ve;for(_e in $e=this._events)U.call($e,_e)&&ve.push(Y?_e.slice(1):_e);return Object.getOwnPropertySymbols?ve.concat(Object.getOwnPropertySymbols($e)):ve},he.prototype.listeners=function(ve){var $e=Y?Y+ve:ve,_e=this._events[$e];if(!_e)return[];if(_e.fn)return[_e.fn];for(var Fe=0,Ee=_e.length,Se=new Array(Ee);Fe<Ee;Fe++)Se[Fe]=_e[Fe].fn;return Se},he.prototype.listenerCount=function(ve){var $e=Y?Y+ve:ve,_e=this._events[$e];return _e?_e.fn?1:_e.length:0},he.prototype.emit=function(ve,$e,_e,Fe,Ee,Se){var Ae=Y?Y+ve:ve;if(!this._events[Ae])return!1;var Te=this._events[Ae],Re=arguments.length,Ue,Le;if(Te.fn){switch(Te.once&&this.removeListener(ve,Te.fn,void 0,!0),Re){case 1:return Te.fn.call(Te.context),!0;case 2:return Te.fn.call(Te.context,$e),!0;case 3:return Te.fn.call(Te.context,$e,_e),!0;case 4:return Te.fn.call(Te.context,$e,_e,Fe),!0;case 5:return Te.fn.call(Te.context,$e,_e,Fe,Ee),!0;case 6:return Te.fn.call(Te.context,$e,_e,Fe,Ee,Se),!0}for(Le=1,Ue=new Array(Re-1);Le<Re;Le++)Ue[Le-1]=arguments[Le];Te.fn.apply(Te.context,Ue)}else{var Me=Te.length,De;for(Le=0;Le<Me;Le++)switch(Te[Le].once&&this.removeListener(ve,Te[Le].fn,void 0,!0),Re){case 1:Te[Le].fn.call(Te[Le].context);break;case 2:Te[Le].fn.call(Te[Le].context,$e);break;case 3:Te[Le].fn.call(Te[Le].context,$e,_e);break;case 4:Te[Le].fn.call(Te[Le].context,$e,_e,Fe);break;default:if(!Ue)for(De=1,Ue=new Array(Re-1);De<Re;De++)Ue[De-1]=arguments[De];Te[Le].fn.apply(Te[Le].context,Ue)}}return!0},he.prototype.on=function(ve,$e,_e){return le(this,ve,$e,_e,!1)},he.prototype.once=function(ve,$e,_e){return le(this,ve,$e,_e,!0)},he.prototype.removeListener=function(ve,$e,_e,Fe){var Ee=Y?Y+ve:ve;if(!this._events[Ee])return this;if(!$e)return ue(this,Ee),this;var Se=this._events[Ee];if(Se.fn)Se.fn===$e&&(!Fe||Se.once)&&(!_e||Se.context===_e)&&ue(this,Ee);else{for(var Ae=0,Te=[],Re=Se.length;Ae<Re;Ae++)(Se[Ae].fn!==$e||Fe&&!Se[Ae].once||_e&&Se[Ae].context!==_e)&&Te.push(Se[Ae]);Te.length?this._events[Ee]=Te.length===1?Te[0]:Te:ue(this,Ee)}return this},he.prototype.removeAllListeners=function(ve){var $e;return ve?($e=Y?Y+ve:ve,this._events[$e]&&ue(this,$e)):(this._events=new re,this._eventsCount=0),this},he.prototype.off=he.prototype.removeListener,he.prototype.addListener=he.prototype.on,he.prefixed=Y,he.EventEmitter=he,G.exports=he})(eventemitter3);globalThis&&globalThis.__classPrivateFieldGet;globalThis&&globalThis.__classPrivateFieldSet;globalThis&&globalThis.__classPrivateFieldGet;var t,r,u,i,o=0,f=[],c=[],e=l$2.__b,a=l$2.__r,v=l$2.diffed,l=l$2.__c,m=l$2.unmount;function d(G,U){l$2.__h&&l$2.__h(r,G,o||U),o=0;var Y=r.__H||(r.__H={__:[],__h:[]});return G>=Y.__.length&&Y.__.push({__V:c}),Y.__[G]}function h(G){return o=1,s(B,G)}function s(G,U,Y){var re=d(t++,2);if(re.t=G,!re.__c&&(re.__=[Y?Y(U):B(void 0,U),function(he){var fe=re.__N?re.__N[0]:re.__[0],ve=re.t(fe,he);fe!==ve&&(re.__N=[ve,re.__[1]],re.__c.setState({}))}],re.__c=r,!r.u)){var oe=function(he,fe,ve){if(!re.__c.__H)return!0;var $e=re.__c.__H.__.filter(function(Fe){return Fe.__c});if($e.every(function(Fe){return!Fe.__N}))return!le||le.call(this,he,fe,ve);var _e=!1;return $e.forEach(function(Fe){if(Fe.__N){var Ee=Fe.__[0];Fe.__=Fe.__N,Fe.__N=void 0,Ee!==Fe.__[0]&&(_e=!0)}}),!(!_e&&re.__c.props===he)&&(!le||le.call(this,he,fe,ve))};r.u=!0;var le=r.shouldComponentUpdate,ue=r.componentWillUpdate;r.componentWillUpdate=function(he,fe,ve){if(this.__e){var $e=le;le=void 0,oe(he,fe,ve),le=$e}ue&&ue.call(this,he,fe,ve)},r.shouldComponentUpdate=oe}return re.__N||re.__}function p(G,U){var Y=d(t++,3);!l$2.__s&&z(Y.__H,U)&&(Y.__=G,Y.i=U,r.__H.__h.push(Y))}function _$1(G){return o=5,F(function(){return{current:G}},[])}function F(G,U){var Y=d(t++,7);return z(Y.__H,U)?(Y.__V=G(),Y.i=U,Y.__h=G,Y.__V):Y.__}function T(G,U){return o=8,F(function(){return G},U)}function b(){for(var G;G=f.shift();)if(G.__P&&G.__H)try{G.__H.__h.forEach(k),G.__H.__h.forEach(w),G.__H.__h=[]}catch(U){G.__H.__h=[],l$2.__e(U,G.__v)}}l$2.__b=function(G){r=null,e&&e(G)},l$2.__r=function(G){a&&a(G),t=0;var U=(r=G.__c).__H;U&&(u===r?(U.__h=[],r.__h=[],U.__.forEach(function(Y){Y.__N&&(Y.__=Y.__N),Y.__V=c,Y.__N=Y.i=void 0})):(U.__h.forEach(k),U.__h.forEach(w),U.__h=[],t=0)),u=r},l$2.diffed=function(G){v&&v(G);var U=G.__c;U&&U.__H&&(U.__H.__h.length&&(f.push(U)!==1&&i===l$2.requestAnimationFrame||((i=l$2.requestAnimationFrame)||j)(b)),U.__H.__.forEach(function(Y){Y.i&&(Y.__H=Y.i),Y.__V!==c&&(Y.__=Y.__V),Y.i=void 0,Y.__V=c})),u=r=null},l$2.__c=function(G,U){U.some(function(Y){try{Y.__h.forEach(k),Y.__h=Y.__h.filter(function(re){return!re.__||w(re)})}catch(re){U.some(function(oe){oe.__h&&(oe.__h=[])}),U=[],l$2.__e(re,Y.__v)}}),l&&l(G,U)},l$2.unmount=function(G){m&&m(G);var U,Y=G.__c;Y&&Y.__H&&(Y.__H.__.forEach(function(re){try{k(re)}catch(oe){U=oe}}),Y.__H=void 0,U&&l$2.__e(U,Y.__v))};var g=typeof requestAnimationFrame=="function";function j(G){var U,Y=function(){clearTimeout(re),g&&cancelAnimationFrame(U),setTimeout(G)},re=setTimeout(Y,100);g&&(U=requestAnimationFrame(Y))}function k(G){var U=r,Y=G.__c;typeof Y=="function"&&(G.__c=void 0,Y()),r=U}function w(G){var U=r;G.__c=G.__(),r=U}function z(G,U){return!G||G.length!==U.length||U.some(function(Y,re){return Y!==G[re]})}function B(G,U){return typeof U=="function"?U(G):U}function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(G){for(var U=1;U<arguments.length;U++){var Y=arguments[U];for(var re in Y)Object.prototype.hasOwnProperty.call(Y,re)&&(G[re]=Y[re])}return G},_extends$1.apply(this,arguments)}const STYLE_INNER={position:"relative",width:"100%",minHeight:"100%"},STYLE_CONTENT={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"};class VirtualList extends b$2{constructor(U){super(U),this.handleScroll=()=>{this.setState({offset:this.base.scrollTop})},this.handleResize=()=>{this.resize()},this.focusElement=null,this.state={offset:0,height:0}}componentDidMount(){this.resize(),window.addEventListener("resize",this.handleResize)}componentWillUpdate(){this.base.contains(document.activeElement)&&(this.focusElement=document.activeElement)}componentDidUpdate(){this.focusElement&&this.focusElement.parentNode&&document.activeElement!==this.focusElement&&this.focusElement.focus(),this.focusElement=null,this.resize()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}resize(){const{height:U}=this.state;U!==this.base.offsetHeight&&this.setState({height:this.base.offsetHeight})}render(U){let{data:Y,rowHeight:re,renderRow:oe,overscanCount:le=10,...ue}=U;const{offset:he,height:fe}=this.state;let ve=Math.floor(he/re),$e=Math.floor(fe/re);le&&(ve=Math.max(0,ve-ve%le),$e+=le);const _e=ve+$e+4,Fe=Y.slice(ve,_e),Ee={...STYLE_INNER,height:Y.length*re},Se={...STYLE_CONTENT,top:ve*re};return y$1("div",_extends$1({onScroll:this.handleScroll},ue),y$1("div",{role:"presentation",style:Ee},y$1("div",{role:"presentation",style:Se},Fe.map(oe))))}}function defaultPickerIcon(){return y$1("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30"},y$1("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"}))}var safeIsNaN=Number.isNaN||function(U){return typeof U=="number"&&U!==U};function isEqual(G,U){return!!(G===U||safeIsNaN(G)&&safeIsNaN(U))}function areInputsEqual(G,U){if(G.length!==U.length)return!1;for(var Y=0;Y<G.length;Y++)if(!isEqual(G[Y],U[Y]))return!1;return!0}function memoizeOne(G,U){U===void 0&&(U=areInputsEqual);var Y=null;function re(){for(var oe=[],le=0;le<arguments.length;le++)oe[le]=arguments[le];if(Y&&Y.lastThis===this&&U(oe,Y.lastArgs))return Y.lastResult;var ue=G.apply(this,oe);return Y={lastResult:ue,lastArgs:oe,lastThis:this},ue}return re.clear=function(){Y=null},re}const FOCUSABLE_ELEMENTS=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'];function getActiveOverlayEl(G,U){if(U){const Y=G.querySelector(`[data-uppy-paneltype="${U}"]`);if(Y)return Y}return G}function focusOnFirstNode(G,U){const Y=U[0];Y&&(Y.focus(),G.preventDefault())}function focusOnLastNode(G,U){const Y=U[U.length-1];Y&&(Y.focus(),G.preventDefault())}function isFocusInOverlay(G){return G.contains(document.activeElement)}function trapFocus(G,U,Y){const re=getActiveOverlayEl(Y,U),oe=toArray(re.querySelectorAll(FOCUSABLE_ELEMENTS)),le=oe.indexOf(document.activeElement);isFocusInOverlay(re)?G.shiftKey&&le===0?focusOnLastNode(G,oe):!G.shiftKey&&le===oe.length-1&&focusOnFirstNode(G,oe):focusOnFirstNode(G,oe)}function forInline(G,U,Y){U===null||trapFocus(G,U,Y)}function createSuperFocus(){let G=!1;return debounce$3((Y,re)=>{const oe=getActiveOverlayEl(Y,re),le=oe.contains(document.activeElement);if(le&&G)return;const ue=oe.querySelector("[data-uppy-super-focusable]");if(!(le&&!ue))if(ue)ue.focus({preventScroll:!0}),G=!0;else{const he=oe.querySelector(FOCUSABLE_ELEMENTS);he==null||he.focus({preventScroll:!0}),G=!1}},260)}function isDragDropSupported(){const G=document.body;return!(!("draggable"in G)||!("ondragstart"in G&&"ondrop"in G)||!("FormData"in window)||!("FileReader"in window))}var isShallowEqual=function(U,Y){if(U===Y)return!0;for(var re in U)if(!(re in Y))return!1;for(var re in Y)if(U[re]!==Y[re])return!1;return!0};const shallowEqual=getDefaultExportFromCjs(isShallowEqual);function iconImage(){return y$1("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},y$1("g",{fill:"#686DE0",fillRule:"evenodd"},y$1("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),y$1("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),y$1("circle",{cx:"7.5",cy:"9.5",r:"1.5"})))}function iconAudio(){return y$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},y$1("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"}))}function iconVideo(){return y$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},y$1("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"}))}function iconPDF(){return y$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},y$1("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"}))}function iconArchive(){return y$1("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},y$1("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"}))}function iconFile(){return y$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},y$1("g",{fill:"#A7AFB7",fillRule:"nonzero"},y$1("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),y$1("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})))}function iconText(){return y$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},y$1("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"}))}function getIconByMime(G){const U={color:"#838999",icon:iconFile()};if(!G)return U;const Y=G.split("/")[0],re=G.split("/")[1];return Y==="text"?{color:"#5a5e69",icon:iconText()}:Y==="image"?{color:"#686de0",icon:iconImage()}:Y==="audio"?{color:"#068dbb",icon:iconAudio()}:Y==="video"?{color:"#19af67",icon:iconVideo()}:Y==="application"&&re==="pdf"?{color:"#e25149",icon:iconPDF()}:Y==="application"&&["zip","x-7z-compressed","x-zip-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(re)!==-1?{color:"#00C469",icon:iconArchive()}:U}function FilePreview(G){const{file:U}=G;if(U.preview)return y$1("img",{className:"uppy-Dashboard-Item-previewImg",alt:U.name,src:U.preview});const{color:Y,icon:re}=getIconByMime(U.type);return y$1("div",{className:"uppy-Dashboard-Item-previewIconWrap"},y$1("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:Y}},re),y$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76"},y$1("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})))}const metaFieldIdToName=(G,U)=>(typeof U=="function"?U():U).filter(oe=>oe.id===G)[0].name;function MetaErrorMessage(G){const{file:U,toggleFileCard:Y,i18n:re,metaFields:oe}=G,{missingRequiredMetaFields:le}=U;if(!(le!=null&&le.length))return null;const ue=le.map(he=>metaFieldIdToName(he,oe)).join(", ");return y$1("div",{className:"uppy-Dashboard-Item-errorMessage"},re("missingRequiredMetaFields",{smart_count:le.length,fields:ue})," ",y$1("button",{type:"button",class:"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn",onClick:()=>Y(!0,U.id)},re("editFile")))}function FilePreviewAndLink(G){const{file:U,i18n:Y,toggleFileCard:re,metaFields:oe,showLinkToFileUploadResult:le}=G,ue="rgba(255, 255, 255, 0.5)",he=U.preview?ue:getIconByMime(U.type).color;return y$1("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:he}},le&&U.uploadURL&&y$1("a",{className:"uppy-Dashboard-Item-previewLink",href:U.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":U.meta.name},y$1("span",{hidden:!0},U.meta.name)),y$1(FilePreview,{file:U}),y$1(MetaErrorMessage,{file:U,i18n:Y,toggleFileCard:re,metaFields:oe}))}function onPauseResumeCancelRetry(G){if(!G.isUploaded){if(G.error&&!G.hideRetryButton){G.uppy.retryUpload(G.file.id);return}G.resumableUploads&&!G.hidePauseResumeButton?G.uppy.pauseResume(G.file.id):G.individualCancellation&&!G.hideCancelButton&&G.uppy.removeFile(G.file.id)}}function progressIndicatorTitle(G){return G.isUploaded?G.i18n("uploadComplete"):G.error?G.i18n("retryUpload"):G.resumableUploads?G.file.isPaused?G.i18n("resumeUpload"):G.i18n("pauseUpload"):G.individualCancellation?G.i18n("cancelUpload"):""}function ProgressIndicatorButton(G){return y$1("div",{className:"uppy-Dashboard-Item-progress"},y$1("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":progressIndicatorTitle(G),title:progressIndicatorTitle(G),onClick:()=>onPauseResumeCancelRetry(G)},G.children))}function ProgressCircleContainer(G){let{children:U}=G;return y$1("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle"},U)}function ProgressCircle(G){let{progress:U}=G;const Y=2*Math.PI*15;return y$1("g",null,y$1("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),y$1("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":Y,"stroke-dashoffset":Y-Y/100*U}))}function FileProgress(G){if(!G.file.progress.uploadStarted)return null;if(G.isUploaded)return y$1("div",{className:"uppy-Dashboard-Item-progress"},y$1("div",{className:"uppy-Dashboard-Item-progressIndicator"},y$1(ProgressCircleContainer,null,y$1("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),y$1("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"}))));if(!G.recoveredState)return G.error&&!G.hideRetryButton?y$1(ProgressIndicatorButton,G,y$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19"},y$1("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),y$1("path",{d:"M7.9 3H10v2H7.9z"}),y$1("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),y$1("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"}))):G.resumableUploads&&!G.hidePauseResumeButton?y$1(ProgressIndicatorButton,G,y$1(ProgressCircleContainer,null,y$1(ProgressCircle,{progress:G.file.progress.percentage}),G.file.isPaused?y$1("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):y$1("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)"},y$1("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),y$1("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})))):!G.resumableUploads&&G.individualCancellation&&!G.hideCancelButton?y$1(ProgressIndicatorButton,G,y$1(ProgressCircleContainer,null,y$1(ProgressCircle,{progress:G.file.progress.percentage}),y$1("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"}))):y$1("div",{className:"uppy-Dashboard-Item-progress"},y$1("div",{className:"uppy-Dashboard-Item-progressIndicator"},y$1(ProgressCircleContainer,null,y$1(ProgressCircle,{progress:G.file.progress.percentage}))))}const separator="...";function truncateString(G,U){if(U===0)return"";if(G.length<=U)return G;if(U<=separator.length+1)return`${G.slice(0,U-1)}…`;const Y=U-separator.length,re=Math.ceil(Y/2),oe=Math.floor(Y/2);return G.slice(0,re)+separator+G.slice(-oe)}const renderFileName=G=>{const{author:U,name:Y}=G.file.meta;function re(){return G.isSingleFile&&G.containerHeight>=350?90:G.containerWidth<=352?35:G.containerWidth<=576?60:U?20:30}return y$1("div",{className:"uppy-Dashboard-Item-name",title:Y},truncateString(Y,re()))},renderAuthor=G=>{var U;const{author:Y}=G.file.meta,re=(U=G.file.remote)==null?void 0:U.providerName,oe="·";return Y?y$1("div",{className:"uppy-Dashboard-Item-author"},y$1("a",{href:`${Y.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer"},truncateString(Y.name,13)),re?y$1(k$2,null,` ${oe} `,re,` ${oe} `):null):null},renderFileSize=G=>G.file.size&&y$1("div",{className:"uppy-Dashboard-Item-statusSize"},prettierBytes$1(G.file.size)),ReSelectButton=G=>G.file.isGhost&&y$1("span",null," • ",y$1("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:G.toggleAddFilesPanel},G.i18n("reSelect"))),ErrorButton=G=>{let{file:U,onClick:Y}=G;return U.error?y$1("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails","aria-label":U.error,"data-microtip-position":"bottom","data-microtip-size":"medium",onClick:Y,type:"button"},"?"):null};function FileInfo(G){const{file:U}=G;return y$1("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":U.source},y$1("div",{className:"uppy-Dashboard-Item-fileName"},renderFileName(G),y$1(ErrorButton,{file:G.file,onClick:()=>alert(G.file.error)})),y$1("div",{className:"uppy-Dashboard-Item-status"},renderAuthor(G),renderFileSize(G),ReSelectButton(G)),y$1(MetaErrorMessage,{file:G.file,i18n:G.i18n,toggleFileCard:G.toggleFileCard,metaFields:G.metaFields}))}function copyToClipboard(G,U){return U===void 0&&(U="Copy the URL below"),new Promise(Y=>{const re=document.createElement("textarea");re.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),re.value=G,document.body.appendChild(re),re.select();const oe=()=>{document.body.removeChild(re),window.prompt(U,G),Y()};try{return document.execCommand("copy")?(document.body.removeChild(re),Y()):oe()}catch{return document.body.removeChild(re),oe()}})}function EditButton(G){let{file:U,uploadInProgressOrComplete:Y,metaFields:re,canEditFile:oe,i18n:le,onClick:ue}=G;return!Y&&re&&re.length>0||!Y&&oe(U)?y$1("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":le("editFileWithFilename",{file:U.meta.name}),title:le("editFileWithFilename",{file:U.meta.name}),onClick:()=>ue()},y$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14"},y$1("g",{fillRule:"evenodd"},y$1("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),y$1("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),y$1("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})))):null}function RemoveButton(G){let{i18n:U,onClick:Y,file:re}=G;return y$1("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":U("removeFile",{file:re.meta.name}),title:U("removeFile",{file:re.meta.name}),onClick:()=>Y()},y$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18"},y$1("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),y$1("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})))}const copyLinkToClipboard=(G,U)=>{copyToClipboard(U.file.uploadURL,U.i18n("copyLinkToClipboardFallback")).then(()=>{U.uppy.log("Link copied to clipboard."),U.uppy.info(U.i18n("copyLinkToClipboardSuccess"),"info",3e3)}).catch(U.uppy.log).then(()=>G.target.focus({preventScroll:!0}))};function CopyLinkButton(G){const{i18n:U}=G;return y$1("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":U("copyLink"),title:U("copyLink"),onClick:Y=>copyLinkToClipboard(Y,G)},y$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12"},y$1("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})))}function Buttons(G){const{uppy:U,file:Y,uploadInProgressOrComplete:re,canEditFile:oe,metaFields:le,showLinkToFileUploadResult:ue,showRemoveButton:he,i18n:fe,toggleFileCard:ve,openFileEditor:$e}=G;return y$1("div",{className:"uppy-Dashboard-Item-actionWrapper"},y$1(EditButton,{i18n:fe,file:Y,uploadInProgressOrComplete:re,canEditFile:oe,metaFields:le,onClick:()=>{le&&le.length>0?ve(!0,Y.id):$e(Y)}}),ue&&Y.uploadURL?y$1(CopyLinkButton,{file:Y,uppy:U,i18n:fe}):null,he?y$1(RemoveButton,{i18n:fe,file:Y,uppy:U,onClick:()=>U.removeFile(Y.id,"removed-by-user")}):null)}class FileItem extends b$2{componentDidMount(){const{file:U}=this.props;U.preview||this.props.handleRequestThumbnail(U)}shouldComponentUpdate(U){return!shallowEqual(this.props,U)}componentDidUpdate(){const{file:U}=this.props;U.preview||this.props.handleRequestThumbnail(U)}componentWillUnmount(){const{file:U}=this.props;U.preview||this.props.handleCancelThumbnail(U)}render(){const{file:U}=this.props,Y=U.progress.preprocess||U.progress.postprocess,re=U.progress.uploadComplete&&!Y&&!U.error,oe=U.progress.uploadStarted||Y,le=U.progress.uploadStarted&&!U.progress.uploadComplete||Y,ue=U.error||!1,{isGhost:he}=U;let fe=(this.props.individualCancellation||!le)&&!re;re&&this.props.showRemoveButtonAfterComplete&&(fe=!0);const ve=classNames({"uppy-Dashboard-Item":!0,"is-inprogress":le&&!this.props.recoveredState,"is-processing":Y,"is-complete":re,"is-error":!!ue,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":he});return y$1("div",{className:ve,id:`uppy_${U.id}`,role:this.props.role},y$1("div",{className:"uppy-Dashboard-Item-preview"},y$1(FilePreviewAndLink,{file:U,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,i18n:this.props.i18n,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),y$1(FileProgress,{uppy:this.props.uppy,file:U,error:ue,isUploaded:re,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,showRemoveButtonAfterComplete:this.props.showRemoveButtonAfterComplete,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,i18n:this.props.i18n})),y$1("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons"},y$1(FileInfo,{file:U,id:this.props.id,acquirers:this.props.acquirers,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields,isSingleFile:this.props.isSingleFile}),y$1(Buttons,{file:U,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:fe,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:oe,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,uppy:this.props.uppy,i18n:this.props.i18n})))}}function chunks(G,U){const Y=[];let re=[];return G.forEach(oe=>{re.length<U?re.push(oe):(Y.push(re),re=[oe])}),re.length&&Y.push(re),Y}function FileList(G){let{id:U,error:Y,i18n:re,uppy:oe,files:le,acquirers:ue,resumableUploads:he,hideRetryButton:fe,hidePauseResumeButton:ve,hideCancelButton:$e,showLinkToFileUploadResult:_e,showRemoveButtonAfterComplete:Fe,isWide:Ee,metaFields:Se,isSingleFile:Ae,toggleFileCard:Te,handleRequestThumbnail:Re,handleCancelThumbnail:Ue,recoveredState:Le,individualCancellation:Me,itemsPerRow:De,openFileEditor:je,canEditFile:He,toggleAddFilesPanel:Ve,containerWidth:ze,containerHeight:Qe}=G;const tt=De===1?71:200,rt=F(()=>{const Ze=(Ce,Pe)=>le[Pe].isGhost-le[Ce].isGhost,Ye=Object.keys(le);return Le&&Ye.sort(Ze),chunks(Ye,De)},[le,De,Le]),et=Ze=>y$1("div",{class:"uppy-Dashboard-filesInner",role:"presentation",key:Ze[0]},Ze.map(Ye=>y$1(FileItem,{key:Ye,uppy:oe,id:U,error:Y,i18n:re,acquirers:ue,resumableUploads:he,individualCancellation:Me,hideRetryButton:fe,hidePauseResumeButton:ve,hideCancelButton:$e,showLinkToFileUploadResult:_e,showRemoveButtonAfterComplete:Fe,isWide:Ee,metaFields:Se,recoveredState:Le,isSingleFile:Ae,containerWidth:ze,containerHeight:Qe,toggleFileCard:Te,handleRequestThumbnail:Re,handleCancelThumbnail:Ue,role:"listitem",openFileEditor:je,canEditFile:He,toggleAddFilesPanel:Ve,file:le[Ye]})));return Ae?y$1("div",{class:"uppy-Dashboard-files"},et(rt[0])):y$1(VirtualList,{class:"uppy-Dashboard-files",role:"list",data:rt,renderRow:et,rowHeight:tt})}let _Symbol$for;_Symbol$for=Symbol.for("uppy test: disable unused locale key warning");class AddFiles extends b$2{constructor(){super(...arguments),this.triggerFileInputClick=()=>{this.fileInput.click()},this.triggerFolderInputClick=()=>{this.folderInput.click()},this.triggerVideoCameraInputClick=()=>{this.mobileVideoFileInput.click()},this.triggerPhotoCameraInputClick=()=>{this.mobilePhotoFileInput.click()},this.onFileInputChange=U=>{this.props.handleInputChange(U),U.target.value=null},this.renderHiddenInput=(U,Y)=>y$1("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:U,type:"file",name:"files[]",multiple:this.props.maxNumberOfFiles!==1,onChange:this.onFileInputChange,accept:this.props.allowedFileTypes,ref:Y}),this.renderHiddenCameraInput=(U,Y,re)=>{const le={photo:"image/*",video:"video/*"}[U];return y$1("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,type:"file",name:`camera-${U}`,onChange:this.onFileInputChange,capture:Y,accept:le,ref:re})},this.renderMyDeviceAcquirer=()=>y$1("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice"},y$1("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerFileInputClick},y$1("div",{className:"uppy-DashboardTab-inner"},y$1("svg",{className:"uppy-DashboardTab-iconMyDevice","aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},y$1("path",{d:"M8.45 22.087l-1.305-6.674h17.678l-1.572 6.674H8.45zm4.975-12.412l1.083 1.765a.823.823 0 00.715.386h7.951V13.5H8.587V9.675h4.838zM26.043 13.5h-1.195v-2.598c0-.463-.336-.75-.798-.75h-8.356l-1.082-1.766A.823.823 0 0013.897 8H7.728c-.462 0-.815.256-.815.718V13.5h-.956a.97.97 0 00-.746.37.972.972 0 00-.19.81l1.724 8.565c.095.44.484.755.933.755H24c.44 0 .824-.3.929-.727l2.043-8.568a.972.972 0 00-.176-.825.967.967 0 00-.753-.38z",fill:"currentcolor","fill-rule":"evenodd"}))),y$1("div",{className:"uppy-DashboardTab-name"},this.props.i18n("myDevice")))),this.renderPhotoCamera=()=>y$1("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobilePhotoCamera"},y$1("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerPhotoCameraInputClick},y$1("div",{className:"uppy-DashboardTab-inner"},y$1("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},y$1("path",{d:"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z",fill:"#02B383","fill-rule":"nonzero"}))),y$1("div",{className:"uppy-DashboardTab-name"},this.props.i18n("takePictureBtn")))),this.renderVideoCamera=()=>y$1("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobileVideoCamera"},y$1("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerVideoCameraInputClick},y$1("div",{className:"uppy-DashboardTab-inner"},y$1("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32"},y$1("path",{fill:"#FF675E",fillRule:"nonzero",d:"m21.254 14.277 2.941-2.588c.797-.313 1.243.818 1.09 1.554-.01 2.094.02 4.189-.017 6.282-.126.915-1.145 1.08-1.58.34l-2.434-2.142c-.192.287-.504 1.305-.738.468-.104-1.293-.028-2.596-.05-3.894.047-.312.381.823.426 1.069.063-.384.206-.744.362-1.09zm-12.939-3.73c3.858.013 7.717-.025 11.574.02.912.129 1.492 1.237 1.351 2.217-.019 2.412.04 4.83-.03 7.239-.17 1.025-1.166 1.59-2.029 1.429-3.705-.012-7.41.025-11.114-.019-.913-.129-1.492-1.237-1.352-2.217.018-2.404-.036-4.813.029-7.214.136-.82.83-1.473 1.571-1.454z "}))),y$1("div",{className:"uppy-DashboardTab-name"},this.props.i18n("recordVideoBtn")))),this.renderBrowseButton=(U,Y)=>{const re=this.props.acquirers.length;return y$1("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-browse",onClick:Y,"data-uppy-super-focusable":re===0},U)},this.renderDropPasteBrowseTagline=U=>{const Y=this.renderBrowseButton(this.props.i18n("browseFiles"),this.triggerFileInputClick),re=this.renderBrowseButton(this.props.i18n("browseFolders"),this.triggerFolderInputClick),oe=this.props.fileManagerSelectionType,le=oe.charAt(0).toUpperCase()+oe.slice(1);return y$1("div",{class:"uppy-Dashboard-AddFiles-title"},this.props.disableLocalFiles?this.props.i18n("importFiles"):U>0?this.props.i18nArray(`dropPasteImport${le}`,{browseFiles:Y,browseFolders:re,browse:Y}):this.props.i18nArray(`dropPaste${le}`,{browseFiles:Y,browseFolders:re,browse:Y}))},this.renderAcquirer=U=>{var Y;return y$1("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":U.id},y$1("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-cy":U.id,"aria-controls":`uppy-DashboardContent-panel--${U.id}`,"aria-selected":((Y=this.props.activePickerPanel)==null?void 0:Y.id)===U.id,"data-uppy-super-focusable":!0,onClick:()=>this.props.showPanel(U.id)},y$1("div",{className:"uppy-DashboardTab-inner"},U.icon()),y$1("div",{className:"uppy-DashboardTab-name"},U.name)))},this.renderAcquirers=U=>{const Y=[...U],re=Y.splice(U.length-2,U.length);return y$1(k$2,null,Y.map(oe=>this.renderAcquirer(oe)),y$1("span",{role:"presentation",style:{"white-space":"nowrap"}},re.map(oe=>this.renderAcquirer(oe))))},this.renderSourcesList=(U,Y)=>{const{showNativePhotoCameraButton:re,showNativeVideoCameraButton:oe}=this.props;let le=[];const ue="myDevice";Y||le.push({key:ue,elements:this.renderMyDeviceAcquirer()}),re&&le.push({key:"nativePhotoCameraButton",elements:this.renderPhotoCamera()}),oe&&le.push({key:"nativePhotoCameraButton",elements:this.renderVideoCamera()}),le.push(...U.map(_e=>({key:_e.id,elements:this.renderAcquirer(_e)}))),le.length===1&&le[0].key===ue&&(le=[]);const fe=[...le],ve=fe.splice(le.length-2,le.length),$e=_e=>_e.map(Fe=>{let{key:Ee,elements:Se}=Fe;return y$1(k$2,{key:Ee},Se)});return y$1(k$2,null,this.renderDropPasteBrowseTagline(le.length),y$1("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist"},$e(fe),y$1("span",{role:"presentation",style:{"white-space":"nowrap"}},$e(ve))))}}[_Symbol$for](){this.props.i18nArray("dropPasteBoth"),this.props.i18nArray("dropPasteFiles"),this.props.i18nArray("dropPasteFolders"),this.props.i18nArray("dropPasteImportBoth"),this.props.i18nArray("dropPasteImportFiles"),this.props.i18nArray("dropPasteImportFolders")}renderPoweredByUppy(){const{i18nArray:U}=this.props,Y=y$1("span",null,y$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11"},y$1("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})),y$1("span",{className:"uppy-Dashboard-poweredByUppy"},"Uppy")),re=U("poweredBy",{uppy:Y});return y$1("a",{tabIndex:-1,href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy"},re)}render(){const{showNativePhotoCameraButton:U,showNativeVideoCameraButton:Y,nativeCameraFacingMode:re}=this.props;return y$1("div",{className:"uppy-Dashboard-AddFiles"},this.renderHiddenInput(!1,oe=>{this.fileInput=oe}),this.renderHiddenInput(!0,oe=>{this.folderInput=oe}),U&&this.renderHiddenCameraInput("photo",re,oe=>{this.mobilePhotoFileInput=oe}),Y&&this.renderHiddenCameraInput("video",re,oe=>{this.mobileVideoFileInput=oe}),this.renderSourcesList(this.props.acquirers,this.props.disableLocalFiles),y$1("div",{className:"uppy-Dashboard-AddFiles-info"},this.props.note&&y$1("div",{className:"uppy-Dashboard-note"},this.props.note),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy(this.props)))}}const AddFilesPanel=G=>y$1("div",{className:classNames("uppy-Dashboard-AddFilesPanel",G.className),"data-uppy-panelType":"AddFiles","aria-hidden":!G.showAddFilesPanel},y$1("div",{className:"uppy-DashboardContent-bar"},y$1("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},G.i18n("addingMoreFiles")),y$1("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>G.toggleAddFilesPanel(!1)},G.i18n("back"))),y$1(AddFiles,G));function ignoreEvent(G){const{tagName:U}=G.target;if(U==="INPUT"||U==="TEXTAREA"){G.stopPropagation();return}G.preventDefault(),G.stopPropagation()}function PickerPanelContent(G){let{activePickerPanel:U,className:Y,hideAllPanels:re,i18n:oe,state:le,uppy:ue}=G;return y$1("div",{className:classNames("uppy-DashboardContent-panel",Y),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:`uppy-DashboardContent-panel--${U.id}`,onDragOver:ignoreEvent,onDragLeave:ignoreEvent,onDrop:ignoreEvent,onPaste:ignoreEvent},y$1("div",{className:"uppy-DashboardContent-bar"},y$1("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},oe("importFrom",{name:U.name})),y$1("button",{className:"uppy-DashboardContent-back",type:"button",onClick:re},oe("cancel"))),y$1("div",{className:"uppy-DashboardContent-panelBody"},ue.getPlugin(U.id).render(le)))}function EditorPanel(G){const U=G.files[G.fileCardFor],Y=()=>{G.uppy.emit("file-editor:cancel",U),G.closeFileEditor()};return y$1("div",{className:classNames("uppy-DashboardContent-panel",G.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor"},y$1("div",{className:"uppy-DashboardContent-bar"},y$1("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},G.i18nArray("editing",{file:y$1("span",{className:"uppy-DashboardContent-titleFile"},U.meta?U.meta.name:U.name)})),y$1("button",{className:"uppy-DashboardContent-back",type:"button",onClick:Y},G.i18n("cancel")),y$1("button",{className:"uppy-DashboardContent-save",type:"button",onClick:G.saveFileEditor},G.i18n("save"))),y$1("div",{className:"uppy-DashboardContent-panelBody"},G.editors.map(re=>G.uppy.getPlugin(re.id).render(G.state))))}const uploadStates={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"};function getUploadingState(G,U,Y,re){if(re===void 0&&(re={}),G)return uploadStates.STATE_ERROR;if(U)return uploadStates.STATE_COMPLETE;if(Y)return uploadStates.STATE_PAUSED;let oe=uploadStates.STATE_WAITING;const le=Object.keys(re);for(let ue=0;ue<le.length;ue++){const{progress:he}=re[le[ue]];if(he.uploadStarted&&!he.uploadComplete)return uploadStates.STATE_UPLOADING;he.preprocess&&oe!==uploadStates.STATE_UPLOADING&&(oe=uploadStates.STATE_PREPROCESSING),he.postprocess&&oe!==uploadStates.STATE_UPLOADING&&oe!==uploadStates.STATE_PREPROCESSING&&(oe=uploadStates.STATE_POSTPROCESSING)}return oe}function UploadStatus(G){let{files:U,i18n:Y,isAllComplete:re,isAllErrored:oe,isAllPaused:le,inProgressNotPausedFiles:ue,newFiles:he,processingFiles:fe}=G;switch(getUploadingState(oe,re,le,U)){case"uploading":return Y("uploadingXFiles",{smart_count:ue.length});case"preprocessing":case"postprocessing":return Y("processingXFiles",{smart_count:fe.length});case"paused":return Y("uploadPaused");case"waiting":return Y("xFilesSelected",{smart_count:he.length});case"complete":return Y("uploadComplete");case"error":return Y("error")}}function PanelTopBar(G){const{i18n:U,isAllComplete:Y,hideCancelButton:re,maxNumberOfFiles:oe,toggleAddFilesPanel:le,uppy:ue}=G;let{allowNewUpload:he}=G;return he&&oe&&(he=G.totalFileCount<G.maxNumberOfFiles),y$1("div",{className:"uppy-DashboardContent-bar"},!Y&&!re?y$1("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>ue.cancelAll()},U("cancel")):y$1("div",null),y$1("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},y$1(UploadStatus,G)),he?y$1("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":U("addMoreFiles"),title:U("addMoreFiles"),onClick:()=>le(!0)},y$1("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15"},y$1("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})),y$1("span",{className:"uppy-DashboardContent-addMoreCaption"},U("addMore"))):y$1("div",null))}function RenderMetaFields(G){const{computedMetaFields:U,requiredMetaFields:Y,updateMeta:re,form:oe,formState:le}=G,ue={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return U.map(he=>{const fe=`uppy-Dashboard-FileCard-input-${he.id}`,ve=Y.includes(he.id);return y$1("fieldset",{key:he.id,className:"uppy-Dashboard-FileCard-fieldset"},y$1("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:fe},he.name),he.render!==void 0?he.render({value:le[he.id],onChange:$e=>re($e,he.id),fieldCSSClasses:ue,required:ve,form:oe.id},y$1):y$1("input",{className:ue.text,id:fe,form:oe.id,type:he.type||"text",required:ve,value:le[he.id],placeholder:he.placeholder,onInput:$e=>re($e.target.value,he.id),"data-uppy-super-focusable":!0}))})}function FileCard(G){var U;const{files:Y,fileCardFor:re,toggleFileCard:oe,saveFileCard:le,metaFields:ue,requiredMetaFields:he,openFileEditor:fe,i18n:ve,i18nArray:$e,className:_e,canEditFile:Fe}=G,Ee=()=>typeof ue=="function"?ue(Y[re]):ue,Se=Y[re],Ae=(U=Ee())!=null?U:[],Te=Fe(Se),Re={};Ae.forEach(Ve=>{var ze;Re[Ve.id]=(ze=Se.meta[Ve.id])!=null?ze:""});const[Ue,Le]=h(Re),Me=T(Ve=>{Ve.preventDefault(),le(Ue,re)},[le,Ue,re]),De=(Ve,ze)=>{Le({...Ue,[ze]:Ve})},je=()=>{oe(!1)},[He]=h(()=>{const Ve=document.createElement("form");return Ve.setAttribute("tabindex","-1"),Ve.id=nanoid(),Ve});return p(()=>(document.body.appendChild(He),He.addEventListener("submit",Me),()=>{He.removeEventListener("submit",Me),document.body.removeChild(He)}),[He,Me]),y$1("div",{className:classNames("uppy-Dashboard-FileCard",_e),"data-uppy-panelType":"FileCard",onDragOver:ignoreEvent,onDragLeave:ignoreEvent,onDrop:ignoreEvent,onPaste:ignoreEvent},y$1("div",{className:"uppy-DashboardContent-bar"},y$1("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},$e("editing",{file:y$1("span",{className:"uppy-DashboardContent-titleFile"},Se.meta?Se.meta.name:Se.name)})),y$1("button",{className:"uppy-DashboardContent-back",type:"button",form:He.id,title:ve("finishEditingFile"),onClick:je},ve("cancel"))),y$1("div",{className:"uppy-Dashboard-FileCard-inner"},y$1("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:getIconByMime(Se.type).color}},y$1(FilePreview,{file:Se}),Te&&y$1("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:Ve=>{Me(Ve),fe(Se)}},ve("editImage"))),y$1("div",{className:"uppy-Dashboard-FileCard-info"},y$1(RenderMetaFields,{computedMetaFields:Ae,requiredMetaFields:he,updateMeta:De,form:He,formState:Ue})),y$1("div",{className:"uppy-Dashboard-FileCard-actions"},y$1("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"submit",form:He.id},ve("saveChanges")),y$1("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:je,form:He.id},ve("cancel")))))}const transitionName="uppy-transition-slideDownUp",duration=250;function Slide(G){let{children:U}=G;const[Y,re]=h(null),[oe,le]=h(""),ue=_$1(),he=_$1(),fe=_$1(),ve=()=>{le(`${transitionName}-enter`),cancelAnimationFrame(fe.current),clearTimeout(he.current),he.current=void 0,fe.current=requestAnimationFrame(()=>{le(`${transitionName}-enter ${transitionName}-enter-active`),ue.current=setTimeout(()=>{le("")},duration)})},$e=()=>{le(`${transitionName}-leave`),cancelAnimationFrame(fe.current),clearTimeout(ue.current),ue.current=void 0,fe.current=requestAnimationFrame(()=>{le(`${transitionName}-leave ${transitionName}-leave-active`),he.current=setTimeout(()=>{re(null),le("")},duration)})};return p(()=>{const _e=S$1(U)[0];Y!==_e&&(_e&&!Y?ve():Y&&!_e&&!he.current&&$e(),re(_e))},[U,Y]),p(()=>()=>{clearTimeout(ue.current),clearTimeout(he.current),cancelAnimationFrame(fe.current)},[]),Y?F$2(Y,{className:classNames(oe,Y.props.className)}):null}function _extends(){return _extends=Object.assign?Object.assign.bind():function(G){for(var U=1;U<arguments.length;U++){var Y=arguments[U];for(var re in Y)Object.prototype.hasOwnProperty.call(Y,re)&&(G[re]=Y[re])}return G},_extends.apply(this,arguments)}const WIDTH_XL=900,WIDTH_LG=700,WIDTH_MD=576,HEIGHT_MD=330;function Dashboard$1(G){const U=G.totalFileCount===0,Y=G.totalFileCount===1,re=G.containerWidth>WIDTH_MD,oe=G.containerHeight>HEIGHT_MD,le=classNames({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":G.disabled,"uppy-Dashboard--animateOpenClose":G.animateOpenClose,"uppy-Dashboard--isClosing":G.isClosing,"uppy-Dashboard--isDraggingOver":G.isDraggingOver,"uppy-Dashboard--modal":!G.inline,"uppy-size--md":G.containerWidth>WIDTH_MD,"uppy-size--lg":G.containerWidth>WIDTH_LG,"uppy-size--xl":G.containerWidth>WIDTH_XL,"uppy-size--height-md":G.containerHeight>HEIGHT_MD,"uppy-Dashboard--isAddFilesPanelVisible":G.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":G.areInsidesReadyToBeVisible,"uppy-Dashboard--singleFile":G.singleFileFullScreen&&Y&&oe});let ue=1;G.containerWidth>WIDTH_XL?ue=5:G.containerWidth>WIDTH_LG?ue=4:G.containerWidth>WIDTH_MD&&(ue=3);const he=G.showSelectedFiles&&!U,fe=G.recoveredState?Object.keys(G.recoveredState.files).length:null,ve=G.files?Object.keys(G.files).filter(Fe=>G.files[Fe].isGhost).length:null,$e=()=>ve>0?G.i18n("recoveredXFiles",{smart_count:ve}):G.i18n("recoveredAllFiles");return y$1("div",{className:le,"data-uppy-theme":G.theme,"data-uppy-num-acquirers":G.acquirers.length,"data-uppy-drag-drop-supported":!G.disableLocalFiles&&isDragDropSupported(),"aria-hidden":G.inline?"false":G.isHidden,"aria-disabled":G.disabled,"aria-label":G.inline?G.i18n("dashboardTitle"):G.i18n("dashboardWindowTitle"),onPaste:G.handlePaste,onDragOver:G.handleDragOver,onDragLeave:G.handleDragLeave,onDrop:G.handleDrop},y$1("div",{"aria-hidden":"true",className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:G.handleClickOutside}),y$1("div",{className:"uppy-Dashboard-inner","aria-modal":!G.inline&&"true",role:G.inline?void 0:"dialog",style:{width:G.inline&&G.width?G.width:"",height:G.inline&&G.height?G.height:""}},G.inline?null:y$1("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":G.i18n("closeModal"),title:G.i18n("closeModal"),onClick:G.closeModal},y$1("span",{"aria-hidden":"true"},"×")),y$1("div",{className:"uppy-Dashboard-innerWrap"},y$1("div",{className:"uppy-Dashboard-dropFilesHereHint"},G.i18n("dropHint")),he&&y$1(PanelTopBar,G),fe&&y$1("div",{className:"uppy-Dashboard-serviceMsg"},y$1("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19"},y$1("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd"},y$1("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),y$1("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),y$1("circle",{fill:"#000",cx:"12",cy:"17",r:"1"}))),y$1("strong",{className:"uppy-Dashboard-serviceMsg-title"},G.i18n("sessionRestored")),y$1("div",{className:"uppy-Dashboard-serviceMsg-text"},$e())),he?y$1(FileList,{id:G.id,error:G.error,i18n:G.i18n,uppy:G.uppy,files:G.files,acquirers:G.acquirers,resumableUploads:G.resumableUploads,hideRetryButton:G.hideRetryButton,hidePauseResumeButton:G.hidePauseResumeButton,hideCancelButton:G.hideCancelButton,showLinkToFileUploadResult:G.showLinkToFileUploadResult,showRemoveButtonAfterComplete:G.showRemoveButtonAfterComplete,isWide:G.isWide,metaFields:G.metaFields,toggleFileCard:G.toggleFileCard,handleRequestThumbnail:G.handleRequestThumbnail,handleCancelThumbnail:G.handleCancelThumbnail,recoveredState:G.recoveredState,individualCancellation:G.individualCancellation,openFileEditor:G.openFileEditor,canEditFile:G.canEditFile,toggleAddFilesPanel:G.toggleAddFilesPanel,isSingleFile:Y,itemsPerRow:ue}):y$1(AddFiles,_extends({},G,{isSizeMD:re})),y$1(Slide,null,G.showAddFilesPanel?y$1(AddFilesPanel,_extends({key:"AddFiles"},G,{isSizeMD:re})):null),y$1(Slide,null,G.fileCardFor?y$1(FileCard,_extends({key:"FileCard"},G)):null),y$1(Slide,null,G.activePickerPanel?y$1(PickerPanelContent,_extends({key:"Picker"},G)):null),y$1(Slide,null,G.showFileEditor?y$1(EditorPanel,_extends({key:"Editor"},G)):null),y$1("div",{className:"uppy-Dashboard-progressindicators"},G.progressindicators.map(Fe=>G.uppy.getPlugin(Fe.id).render(G.state))))))}const locale={strings:{closeModal:"Close Modal",addMoreFiles:"Add more files",addingMoreFiles:"Adding more files",importFrom:"Import from %{name}",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",back:"Back",removeFile:"Remove file",editFile:"Edit file",editImage:"Edit image",editing:"Editing %{file}",error:"Error",finishEditingFile:"Finish editing file",saveChanges:"Save changes",myDevice:"My Device",dropHint:"Drop your files here",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy:"Powered by %{uppy}",addMore:"Add more",editFileWithFilename:"Edit file %{file}",save:"Save",cancel:"Cancel",dropPasteFiles:"Drop files here or %{browseFiles}",dropPasteFolders:"Drop files here or %{browseFolders}",dropPasteBoth:"Drop files here, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, %{browseFiles}, %{browseFolders} or import from:",importFiles:"Import files from:",browseFiles:"browse files",browseFolders:"browse folders",recoveredXFiles:{0:"We could not fully recover 1 file. Please re-select it and resume the upload.",1:"We could not fully recover %{smart_count} files. Please re-select them and resume the upload."},recoveredAllFiles:"We restored all files. You can now resume the upload.",sessionRestored:"Session restored",reSelect:"Re-select",missingRequiredMetaFields:{0:"Missing required meta field: %{fields}.",1:"Missing required meta fields: %{fields}."},takePictureBtn:"Take Picture",recordVideoBtn:"Record Video"}};function _classPrivateFieldLooseBase$3(G,U){if(!Object.prototype.hasOwnProperty.call(G,U))throw new TypeError("attempted to use private field on non-instance");return G}var id$3=0;function _classPrivateFieldLooseKey$3(G){return"__private_"+id$3+++"_"+G}const packageJson$1={version:"3.9.1"},memoize=memoizeOne.default||memoizeOne,TAB_KEY=9,ESC_KEY=27;function createPromise(){const G={};return G.promise=new Promise((U,Y)=>{G.resolve=U,G.reject=Y}),G}const defaultOptions$3={target:"body",metaFields:[],inline:!1,width:750,height:550,thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon,showLinkToFileUploadResult:!1,showProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,note:null,closeModalOnClickOutside:!1,closeAfterFinish:!1,singleFileFullScreen:!0,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,disablePageScrollWhenModalOpen:!0,animateOpenClose:!0,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,browserBackButtonClose:!1,showNativePhotoCameraButton:!1,showNativeVideoCameraButton:!1,theme:"light",autoOpen:null,autoOpenFileEditor:!1,disabled:!1,disableLocalFiles:!1,doneButtonHandler:void 0,onRequestCloseModal:null};var _disabledNodes=_classPrivateFieldLooseKey$3("disabledNodes"),_generateLargeThumbnailIfSingleFile=_classPrivateFieldLooseKey$3("generateLargeThumbnailIfSingleFile"),_openFileEditorWhenFilesAdded=_classPrivateFieldLooseKey$3("openFileEditorWhenFilesAdded"),_attachRenderFunctionToTarget=_classPrivateFieldLooseKey$3("attachRenderFunctionToTarget"),_isTargetSupported=_classPrivateFieldLooseKey$3("isTargetSupported"),_getAcquirers=_classPrivateFieldLooseKey$3("getAcquirers"),_getProgressIndicators=_classPrivateFieldLooseKey$3("getProgressIndicators"),_getEditors=_classPrivateFieldLooseKey$3("getEditors"),_addSpecifiedPluginsFromOptions=_classPrivateFieldLooseKey$3("addSpecifiedPluginsFromOptions"),_autoDiscoverPlugins=_classPrivateFieldLooseKey$3("autoDiscoverPlugins"),_addSupportedPluginIfNoTarget=_classPrivateFieldLooseKey$3("addSupportedPluginIfNoTarget");class Dashboard extends UIPlugin$1{constructor(U,Y){var re,oe;let le;Y?Y.autoOpen===void 0?le=Y.autoOpenFileEditor?"imageEditor":null:le=Y.autoOpen:le=null,super(U,{...defaultOptions$3,...Y,autoOpen:le}),Object.defineProperty(this,_disabledNodes,{writable:!0,value:void 0}),this.modalName=`uppy-Dashboard-${nanoid()}`,this.superFocus=createSuperFocus(),this.ifFocusedOnUppyRecently=!1,this.removeTarget=ue=>{const fe=this.getPluginState().targets.filter(ve=>ve.id!==ue.id);this.setPluginState({targets:fe})},this.addTarget=ue=>{const he=ue.id||ue.constructor.name,fe=ue.title||he,ve=ue.type;if(ve!=="acquirer"&&ve!=="progressindicator"&&ve!=="editor"){const Ee="Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor";return this.uppy.log(Ee,"error"),null}const $e={id:he,name:fe,type:ve},Fe=this.getPluginState().targets.slice();return Fe.push($e),this.setPluginState({targets:Fe}),this.el},this.hideAllPanels=()=>{var ue;const he=this.getPluginState(),fe={activePickerPanel:void 0,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1};he.activePickerPanel===fe.activePickerPanel&&he.showAddFilesPanel===fe.showAddFilesPanel&&he.showFileEditor===fe.showFileEditor&&he.activeOverlayType===fe.activeOverlayType||(this.setPluginState(fe),this.uppy.emit("dashboard:close-panel",(ue=he.activePickerPanel)==null?void 0:ue.id))},this.showPanel=ue=>{const{targets:he}=this.getPluginState(),fe=he.find(ve=>ve.type==="acquirer"&&ve.id===ue);this.setPluginState({activePickerPanel:fe,activeOverlayType:"PickerPanel"}),this.uppy.emit("dashboard:show-panel",ue)},this.canEditFile=ue=>{const{targets:he}=this.getPluginState();return _classPrivateFieldLooseBase$3(this,_getEditors)[_getEditors](he).some(ve=>this.uppy.getPlugin(ve.id).canEditFile(ue))},this.openFileEditor=ue=>{const{targets:he}=this.getPluginState(),fe=_classPrivateFieldLooseBase$3(this,_getEditors)[_getEditors](he);this.setPluginState({showFileEditor:!0,fileCardFor:ue.id||null,activeOverlayType:"FileEditor"}),fe.forEach(ve=>{this.uppy.getPlugin(ve.id).selectFile(ue)})},this.closeFileEditor=()=>{const{metaFields:ue}=this.getPluginState();ue&&ue.length>0?this.setPluginState({showFileEditor:!1,activeOverlayType:"FileCard"}):this.setPluginState({showFileEditor:!1,fileCardFor:null,activeOverlayType:"AddFiles"})},this.saveFileEditor=()=>{const{targets:ue}=this.getPluginState();_classPrivateFieldLooseBase$3(this,_getEditors)[_getEditors](ue).forEach(fe=>{this.uppy.getPlugin(fe.id).save()}),this.closeFileEditor()},this.openModal=()=>{const{promise:ue,resolve:he}=createPromise();if(this.savedScrollPosition=window.pageYOffset,this.savedActiveElement=document.activeElement,this.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),this.opts.animateOpenClose&&this.getPluginState().isClosing){const fe=()=>{this.setPluginState({isHidden:!1}),this.el.removeEventListener("animationend",fe,!1),he()};this.el.addEventListener("animationend",fe,!1)}else this.setPluginState({isHidden:!1}),he();return this.opts.browserBackButtonClose&&this.updateBrowserHistory(),document.addEventListener("keydown",this.handleKeyDownInModal),this.uppy.emit("dashboard:modal-open"),ue},this.closeModal=ue=>{var he;const fe=(he=ue==null?void 0:ue.manualClose)!=null?he:!0,{isHidden:ve,isClosing:$e}=this.getPluginState();if(ve||$e)return;const{promise:_e,resolve:Fe}=createPromise();if(this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.opts.animateOpenClose){this.setPluginState({isClosing:!0});const Se=()=>{this.setPluginState({isHidden:!0,isClosing:!1}),this.superFocus.cancel(),this.savedActiveElement.focus(),this.el.removeEventListener("animationend",Se,!1),Fe()};this.el.addEventListener("animationend",Se,!1)}else this.setPluginState({isHidden:!0}),this.superFocus.cancel(),this.savedActiveElement.focus(),Fe();if(document.removeEventListener("keydown",this.handleKeyDownInModal),fe&&this.opts.browserBackButtonClose){var Ee;(Ee=history.state)!=null&&Ee[this.modalName]&&history.back()}return this.uppy.emit("dashboard:modal-closed"),_e},this.isModalOpen=()=>!this.getPluginState().isHidden||!1,this.requestCloseModal=()=>this.opts.onRequestCloseModal?this.opts.onRequestCloseModal():this.closeModal(),this.setDarkModeCapability=ue=>{const{capabilities:he}=this.uppy.getState();this.uppy.setState({capabilities:{...he,darkMode:ue}})},this.handleSystemDarkModeChange=ue=>{const he=ue.matches;this.uppy.log(`[Dashboard] Dark mode is ${he?"on":"off"}`),this.setDarkModeCapability(he)},this.toggleFileCard=(ue,he)=>{const fe=this.uppy.getFile(he);ue?this.uppy.emit("dashboard:file-edit-start",fe):this.uppy.emit("dashboard:file-edit-complete",fe),this.setPluginState({fileCardFor:ue?he:null,activeOverlayType:ue?"FileCard":null})},this.toggleAddFilesPanel=ue=>{this.setPluginState({showAddFilesPanel:ue,activeOverlayType:ue?"AddFiles":null})},this.addFiles=ue=>{const he=ue.map(fe=>({source:this.id,name:fe.name,type:fe.type,data:fe,meta:{relativePath:fe.relativePath||fe.webkitRelativePath||null}}));try{this.uppy.addFiles(he)}catch(fe){this.uppy.log(fe)}},this.startListeningToResize=()=>{this.resizeObserver=new ResizeObserver(ue=>{const he=ue[0],{width:fe,height:ve}=he.contentRect;this.setPluginState({containerWidth:fe,containerHeight:ve,areInsidesReadyToBeVisible:!0})}),this.resizeObserver.observe(this.el.querySelector(".uppy-Dashboard-inner")),this.makeDashboardInsidesVisibleAnywayTimeout=setTimeout(()=>{const ue=this.getPluginState(),he=!this.opts.inline&&ue.isHidden;!ue.areInsidesReadyToBeVisible&&!he&&(this.uppy.log("[Dashboard] resize event didn’t fire on time: defaulted to mobile layout","warning"),this.setPluginState({areInsidesReadyToBeVisible:!0}))},1e3)},this.stopListeningToResize=()=>{this.resizeObserver.disconnect(),clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout)},this.recordIfFocusedOnUppyRecently=ue=>{this.el.contains(ue.target)?this.ifFocusedOnUppyRecently=!0:(this.ifFocusedOnUppyRecently=!1,this.superFocus.cancel())},this.disableInteractiveElements=ue=>{var he;const fe=["a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])",'[role="button"]:not([disabled])'],ve=(he=_classPrivateFieldLooseBase$3(this,_disabledNodes)[_disabledNodes])!=null?he:toArray(this.el.querySelectorAll(fe)).filter($e=>!$e.classList.contains("uppy-Dashboard-close"));for(const $e of ve)$e.tagName==="A"?$e.setAttribute("aria-disabled",ue):$e.disabled=ue;ue?_classPrivateFieldLooseBase$3(this,_disabledNodes)[_disabledNodes]=ve:_classPrivateFieldLooseBase$3(this,_disabledNodes)[_disabledNodes]=null,this.dashboardIsDisabled=ue},this.updateBrowserHistory=()=>{var ue;(ue=history.state)!=null&&ue[this.modalName]||history.pushState({...history.state,[this.modalName]:!0},""),window.addEventListener("popstate",this.handlePopState,!1)},this.handlePopState=ue=>{var he;this.isModalOpen()&&(!ue.state||!ue.state[this.modalName])&&this.closeModal({manualClose:!1}),!this.isModalOpen()&&(he=ue.state)!=null&&he[this.modalName]&&history.back()},this.handleKeyDownInModal=ue=>{ue.keyCode===ESC_KEY&&this.requestCloseModal(),ue.keyCode===TAB_KEY&&trapFocus(ue,this.getPluginState().activeOverlayType,this.el)},this.handleClickOutside=()=>{this.opts.closeModalOnClickOutside&&this.requestCloseModal()},this.handlePaste=ue=>{this.uppy.iteratePlugins(fe=>{fe.type==="acquirer"&&(fe.handleRootPaste==null||fe.handleRootPaste(ue))});const he=toArray(ue.clipboardData.files);he.length>0&&(this.uppy.log("[Dashboard] Files pasted"),this.addFiles(he))},this.handleInputChange=ue=>{ue.preventDefault();const he=toArray(ue.target.files);he.length>0&&(this.uppy.log("[Dashboard] Files selected through input"),this.addFiles(he))},this.handleDragOver=ue=>{var he,fe;ue.preventDefault(),ue.stopPropagation();const ve=()=>{let Ee=!0;return this.uppy.iteratePlugins(Se=>{Se.canHandleRootDrop!=null&&Se.canHandleRootDrop(ue)&&(Ee=!0)}),Ee},$e=()=>{const{types:Ee}=ue.dataTransfer;return Ee.some(Se=>Se==="Files")},_e=ve(),Fe=$e();if(!_e&&!Fe||this.opts.disabled||this.opts.disableLocalFiles&&(Fe||!_e)||!this.uppy.getState().allowNewUpload){ue.dataTransfer.dropEffect="none",clearTimeout(this.removeDragOverClassTimeout);return}ue.dataTransfer.dropEffect="copy",clearTimeout(this.removeDragOverClassTimeout),this.setPluginState({isDraggingOver:!0}),(he=(fe=this.opts).onDragOver)==null||he.call(fe,ue)},this.handleDragLeave=ue=>{var he,fe;ue.preventDefault(),ue.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),this.removeDragOverClassTimeout=setTimeout(()=>{this.setPluginState({isDraggingOver:!1})},50),(he=(fe=this.opts).onDragLeave)==null||he.call(fe,ue)},this.handleDrop=async ue=>{var he,fe;ue.preventDefault(),ue.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),this.setPluginState({isDraggingOver:!1}),this.uppy.iteratePlugins(Fe=>{Fe.type==="acquirer"&&(Fe.handleRootDrop==null||Fe.handleRootDrop(ue))});let ve=!1;const $e=Fe=>{this.uppy.log(Fe,"error"),ve||(this.uppy.info(Fe.message,"error"),ve=!0)};this.uppy.log("[Dashboard] Processing dropped files");const _e=await getDroppedFiles(ue.dataTransfer,{logDropError:$e});_e.length>0&&(this.uppy.log("[Dashboard] Files dropped"),this.addFiles(_e)),(he=(fe=this.opts).onDrop)==null||he.call(fe,ue)},this.handleRequestThumbnail=ue=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:request",ue)},this.handleCancelThumbnail=ue=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:cancel",ue)},this.handleKeyDownInInline=ue=>{ue.keyCode===TAB_KEY&&forInline(ue,this.getPluginState().activeOverlayType,this.el)},this.handlePasteOnBody=ue=>{this.el.contains(document.activeElement)&&this.handlePaste(ue)},this.handleComplete=ue=>{let{failed:he}=ue;this.opts.closeAfterFinish&&!(he!=null&&he.length)&&this.requestCloseModal()},this.handleCancelRestore=()=>{this.uppy.emit("restore-canceled")},Object.defineProperty(this,_generateLargeThumbnailIfSingleFile,{writable:!0,value:()=>{if(this.opts.disableThumbnailGenerator)return;const ue=600,he=this.uppy.getFiles();if(he.length===1){const fe=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);fe==null||fe.setOptions({thumbnailWidth:ue});const ve={...he[0],preview:void 0};fe==null||fe.requestThumbnail(ve).then(()=>{fe==null||fe.setOptions({thumbnailWidth:this.opts.thumbnailWidth})})}}}),Object.defineProperty(this,_openFileEditorWhenFilesAdded,{writable:!0,value:ue=>{const he=ue[0],{metaFields:fe}=this.getPluginState(),ve=fe&&fe.length>0,$e=this.canEditFile(he);ve&&this.opts.autoOpen==="metaEditor"?this.toggleFileCard(!0,he.id):$e&&this.opts.autoOpen==="imageEditor"&&this.openFileEditor(he)}}),this.initEvents=()=>{if(this.opts.trigger&&!this.opts.inline){const ue=findAllDOMElements(this.opts.trigger);ue?ue.forEach(he=>he.addEventListener("click",this.openModal)):this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}this.startListeningToResize(),document.addEventListener("paste",this.handlePasteOnBody),this.uppy.on("plugin-added",_classPrivateFieldLooseBase$3(this,_addSupportedPluginIfNoTarget)[_addSupportedPluginIfNoTarget]),this.uppy.on("plugin-remove",this.removeTarget),this.uppy.on("file-added",this.hideAllPanels),this.uppy.on("dashboard:modal-closed",this.hideAllPanels),this.uppy.on("complete",this.handleComplete),this.uppy.on("files-added",_classPrivateFieldLooseBase$3(this,_generateLargeThumbnailIfSingleFile)[_generateLargeThumbnailIfSingleFile]),this.uppy.on("file-removed",_classPrivateFieldLooseBase$3(this,_generateLargeThumbnailIfSingleFile)[_generateLargeThumbnailIfSingleFile]),document.addEventListener("focus",this.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",this.recordIfFocusedOnUppyRecently,!0),this.opts.inline&&this.el.addEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.on("files-added",_classPrivateFieldLooseBase$3(this,_openFileEditorWhenFilesAdded)[_openFileEditorWhenFilesAdded])},this.removeEvents=()=>{const ue=findAllDOMElements(this.opts.trigger);!this.opts.inline&&ue&&ue.forEach(he=>he.removeEventListener("click",this.openModal)),this.stopListeningToResize(),document.removeEventListener("paste",this.handlePasteOnBody),window.removeEventListener("popstate",this.handlePopState,!1),this.uppy.off("plugin-added",_classPrivateFieldLooseBase$3(this,_addSupportedPluginIfNoTarget)[_addSupportedPluginIfNoTarget]),this.uppy.off("plugin-remove",this.removeTarget),this.uppy.off("file-added",this.hideAllPanels),this.uppy.off("dashboard:modal-closed",this.hideAllPanels),this.uppy.off("complete",this.handleComplete),this.uppy.off("files-added",_classPrivateFieldLooseBase$3(this,_generateLargeThumbnailIfSingleFile)[_generateLargeThumbnailIfSingleFile]),this.uppy.off("file-removed",_classPrivateFieldLooseBase$3(this,_generateLargeThumbnailIfSingleFile)[_generateLargeThumbnailIfSingleFile]),document.removeEventListener("focus",this.recordIfFocusedOnUppyRecently),document.removeEventListener("click",this.recordIfFocusedOnUppyRecently),this.opts.inline&&this.el.removeEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.off("files-added",_classPrivateFieldLooseBase$3(this,_openFileEditorWhenFilesAdded)[_openFileEditorWhenFilesAdded])},this.superFocusOnEachUpdate=()=>{const ue=this.el.contains(document.activeElement),he=document.activeElement===document.body||document.activeElement===null,fe=this.uppy.getState().info.length===0,ve=!this.opts.inline;fe&&(ve||ue||he&&this.ifFocusedOnUppyRecently)?this.superFocus(this.el,this.getPluginState().activeOverlayType):this.superFocus.cancel()},this.afterUpdate=()=>{if(this.opts.disabled&&!this.dashboardIsDisabled){this.disableInteractiveElements(!0);return}!this.opts.disabled&&this.dashboardIsDisabled&&this.disableInteractiveElements(!1),this.superFocusOnEachUpdate()},this.saveFileCard=(ue,he)=>{this.uppy.setFileMeta(he,ue),this.toggleFileCard(!1,he)},Object.defineProperty(this,_attachRenderFunctionToTarget,{writable:!0,value:ue=>{const he=this.uppy.getPlugin(ue.id);return{...ue,icon:he.icon||this.opts.defaultPickerIcon,render:he.render}}}),Object.defineProperty(this,_isTargetSupported,{writable:!0,value:ue=>{const he=this.uppy.getPlugin(ue.id);return typeof he.isSupported!="function"?!0:he.isSupported()}}),Object.defineProperty(this,_getAcquirers,{writable:!0,value:memoize(ue=>ue.filter(he=>he.type==="acquirer"&&_classPrivateFieldLooseBase$3(this,_isTargetSupported)[_isTargetSupported](he)).map(_classPrivateFieldLooseBase$3(this,_attachRenderFunctionToTarget)[_attachRenderFunctionToTarget]))}),Object.defineProperty(this,_getProgressIndicators,{writable:!0,value:memoize(ue=>ue.filter(he=>he.type==="progressindicator").map(_classPrivateFieldLooseBase$3(this,_attachRenderFunctionToTarget)[_attachRenderFunctionToTarget]))}),Object.defineProperty(this,_getEditors,{writable:!0,value:memoize(ue=>ue.filter(he=>he.type==="editor").map(_classPrivateFieldLooseBase$3(this,_attachRenderFunctionToTarget)[_attachRenderFunctionToTarget]))}),this.render=ue=>{const he=this.getPluginState(),{files:fe,capabilities:ve,allowNewUpload:$e}=ue,{newFiles:_e,uploadStartedFiles:Fe,completeFiles:Ee,erroredFiles:Se,inProgressFiles:Ae,inProgressNotPausedFiles:Te,processingFiles:Re,isUploadStarted:Ue,isAllComplete:Le,isAllErrored:Me,isAllPaused:De}=this.uppy.getObjectOfFilesPerState(),je=_classPrivateFieldLooseBase$3(this,_getAcquirers)[_getAcquirers](he.targets),He=_classPrivateFieldLooseBase$3(this,_getProgressIndicators)[_getProgressIndicators](he.targets),Ve=_classPrivateFieldLooseBase$3(this,_getEditors)[_getEditors](he.targets);let ze;return this.opts.theme==="auto"?ze=ve.darkMode?"dark":"light":ze=this.opts.theme,["files","folders","both"].indexOf(this.opts.fileManagerSelectionType)<0&&(this.opts.fileManagerSelectionType="files",console.warn(`Unsupported option for "fileManagerSelectionType". Using default of "${this.opts.fileManagerSelectionType}".`)),Dashboard$1({state:ue,isHidden:he.isHidden,files:fe,newFiles:_e,uploadStartedFiles:Fe,completeFiles:Ee,erroredFiles:Se,inProgressFiles:Ae,inProgressNotPausedFiles:Te,processingFiles:Re,isUploadStarted:Ue,isAllComplete:Le,isAllErrored:Me,isAllPaused:De,totalFileCount:Object.keys(fe).length,totalProgress:ue.totalProgress,allowNewUpload:$e,acquirers:je,theme:ze,disabled:this.opts.disabled,disableLocalFiles:this.opts.disableLocalFiles,direction:this.opts.direction,activePickerPanel:he.activePickerPanel,showFileEditor:he.showFileEditor,saveFileEditor:this.saveFileEditor,closeFileEditor:this.closeFileEditor,disableInteractiveElements:this.disableInteractiveElements,animateOpenClose:this.opts.animateOpenClose,isClosing:he.isClosing,progressindicators:He,editors:Ve,autoProceed:this.uppy.opts.autoProceed,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,i18n:this.i18n,i18nArray:this.i18nArray,uppy:this.uppy,note:this.opts.note,recoveredState:ue.recoveredState,metaFields:he.metaFields,resumableUploads:ve.resumableUploads||!1,individualCancellation:ve.individualCancellation,isMobileDevice:ve.isMobileDevice,fileCardFor:he.fileCardFor,toggleFileCard:this.toggleFileCard,toggleAddFilesPanel:this.toggleAddFilesPanel,showAddFilesPanel:he.showAddFilesPanel,saveFileCard:this.saveFileCard,openFileEditor:this.openFileEditor,canEditFile:this.canEditFile,width:this.opts.width,height:this.opts.height,showLinkToFileUploadResult:this.opts.showLinkToFileUploadResult,fileManagerSelectionType:this.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:this.opts.proudlyDisplayPoweredByUppy,hideCancelButton:this.opts.hideCancelButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,showRemoveButtonAfterComplete:this.opts.showRemoveButtonAfterComplete,containerWidth:he.containerWidth,containerHeight:he.containerHeight,areInsidesReadyToBeVisible:he.areInsidesReadyToBeVisible,isTargetDOMEl:this.isTargetDOMEl,parentElement:this.el,allowedFileTypes:this.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:this.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:this.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:this.opts.showSelectedFiles,showNativePhotoCameraButton:this.opts.showNativePhotoCameraButton,showNativeVideoCameraButton:this.opts.showNativeVideoCameraButton,nativeCameraFacingMode:this.opts.nativeCameraFacingMode,singleFileFullScreen:this.opts.singleFileFullScreen,handleCancelRestore:this.handleCancelRestore,handleRequestThumbnail:this.handleRequestThumbnail,handleCancelThumbnail:this.handleCancelThumbnail,isDraggingOver:he.isDraggingOver,handleDragOver:this.handleDragOver,handleDragLeave:this.handleDragLeave,handleDrop:this.handleDrop})},Object.defineProperty(this,_addSpecifiedPluginsFromOptions,{writable:!0,value:()=>{(this.opts.plugins||[]).forEach(he=>{const fe=this.uppy.getPlugin(he);fe?fe.mount(this,fe):this.uppy.log(`[Uppy] Dashboard could not find plugin '${he}', make sure to uppy.use() the plugins you are specifying`,"warning")})}}),Object.defineProperty(this,_autoDiscoverPlugins,{writable:!0,value:()=>{this.uppy.iteratePlugins(_classPrivateFieldLooseBase$3(this,_addSupportedPluginIfNoTarget)[_addSupportedPluginIfNoTarget])}}),Object.defineProperty(this,_addSupportedPluginIfNoTarget,{writable:!0,value:ue=>{var he;const fe=["acquirer","editor"];ue&&!((he=ue.opts)!=null&&he.target)&&fe.includes(ue.type)&&(this.getPluginState().targets.some($e=>ue.id===$e.id)||ue.mount(this,ue))}}),this.install=()=>{this.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:void 0,showFileEditor:!1,metaFields:this.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});const{inline:ue,closeAfterFinish:he}=this.opts;if(ue&&he)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");const{allowMultipleUploads:fe,allowMultipleUploadBatches:ve}=this.uppy.opts;(fe||ve)&&he&&this.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");const{target:$e}=this.opts;$e&&this.mount($e,this),this.opts.disableStatusBar||this.uppy.use(StatusBar,{id:`${this.id}:StatusBar`,target:this,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,showProgressDetails:this.opts.showProgressDetails,hideAfterFinish:this.opts.hideProgressAfterFinish,locale:this.opts.locale,doneButtonHandler:this.opts.doneButtonHandler}),this.opts.disableInformer||this.uppy.use(Informer,{id:`${this.id}:Informer`,target:this}),this.opts.disableThumbnailGenerator||this.uppy.use(ThumbnailGenerator,{id:`${this.id}:ThumbnailGenerator`,thumbnailWidth:this.opts.thumbnailWidth,thumbnailHeight:this.opts.thumbnailHeight,thumbnailType:this.opts.thumbnailType,waitForThumbnailsBeforeUpload:this.opts.waitForThumbnailsBeforeUpload,lazy:!this.opts.waitForThumbnailsBeforeUpload}),this.darkModeMediaQuery=typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;const _e=this.darkModeMediaQuery?this.darkModeMediaQuery.matches:!1;if(this.uppy.log(`[Dashboard] Dark mode is ${_e?"on":"off"}`),this.setDarkModeCapability(_e),this.opts.theme==="auto"){var Fe;(Fe=this.darkModeMediaQuery)==null||Fe.addListener(this.handleSystemDarkModeChange)}_classPrivateFieldLooseBase$3(this,_addSpecifiedPluginsFromOptions)[_addSpecifiedPluginsFromOptions](),_classPrivateFieldLooseBase$3(this,_autoDiscoverPlugins)[_autoDiscoverPlugins](),this.initEvents()},this.uninstall=()=>{if(!this.opts.disableInformer){const fe=this.uppy.getPlugin(`${this.id}:Informer`);fe&&this.uppy.removePlugin(fe)}if(!this.opts.disableStatusBar){const fe=this.uppy.getPlugin(`${this.id}:StatusBar`);fe&&this.uppy.removePlugin(fe)}if(!this.opts.disableThumbnailGenerator){const fe=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);fe&&this.uppy.removePlugin(fe)}if((this.opts.plugins||[]).forEach(fe=>{const ve=this.uppy.getPlugin(fe);ve&&ve.unmount()}),this.opts.theme==="auto"){var he;(he=this.darkModeMediaQuery)==null||he.removeListener(this.handleSystemDarkModeChange)}this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.unmount(),this.removeEvents()},this.id=this.opts.id||"Dashboard",this.title="Dashboard",this.type="orchestrator",this.defaultLocale=locale,this.opts.doneButtonHandler===void 0&&(this.opts.doneButtonHandler=()=>{this.uppy.clearUploadedFiles(),this.requestCloseModal()}),(oe=(re=this.opts).onRequestCloseModal)!=null||(re.onRequestCloseModal=()=>this.closeModal()),this.i18nInit()}}Dashboard.VERSION=packageJson$1.version;const version="3.7.5",VERSION=version,_hasatob=typeof atob=="function",_hasbtoa=typeof btoa=="function",_hasBuffer=typeof Buffer=="function",_TD=typeof TextDecoder=="function"?new TextDecoder:void 0,_TE=typeof TextEncoder=="function"?new TextEncoder:void 0,b64ch="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",b64chs=Array.prototype.slice.call(b64ch),b64tab=(G=>{let U={};return G.forEach((Y,re)=>U[Y]=re),U})(b64chs),b64re=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,_fromCC=String.fromCharCode.bind(String),_U8Afrom=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):G=>new Uint8Array(Array.prototype.slice.call(G,0)),_mkUriSafe=G=>G.replace(/=/g,"").replace(/[+\/]/g,U=>U=="+"?"-":"_"),_tidyB64=G=>G.replace(/[^A-Za-z0-9\+\/]/g,""),btoaPolyfill=G=>{let U,Y,re,oe,le="";const ue=G.length%3;for(let he=0;he<G.length;){if((Y=G.charCodeAt(he++))>255||(re=G.charCodeAt(he++))>255||(oe=G.charCodeAt(he++))>255)throw new TypeError("invalid character found");U=Y<<16|re<<8|oe,le+=b64chs[U>>18&63]+b64chs[U>>12&63]+b64chs[U>>6&63]+b64chs[U&63]}return ue?le.slice(0,ue-3)+"===".substring(ue):le},_btoa=_hasbtoa?G=>btoa(G):_hasBuffer?G=>Buffer.from(G,"binary").toString("base64"):btoaPolyfill,_fromUint8Array=_hasBuffer?G=>Buffer.from(G).toString("base64"):G=>{let Y=[];for(let re=0,oe=G.length;re<oe;re+=4096)Y.push(_fromCC.apply(null,G.subarray(re,re+4096)));return _btoa(Y.join(""))},fromUint8Array=(G,U=!1)=>U?_mkUriSafe(_fromUint8Array(G)):_fromUint8Array(G),cb_utob=G=>{if(G.length<2){var U=G.charCodeAt(0);return U<128?G:U<2048?_fromCC(192|U>>>6)+_fromCC(128|U&63):_fromCC(224|U>>>12&15)+_fromCC(128|U>>>6&63)+_fromCC(128|U&63)}else{var U=65536+(G.charCodeAt(0)-55296)*1024+(G.charCodeAt(1)-56320);return _fromCC(240|U>>>18&7)+_fromCC(128|U>>>12&63)+_fromCC(128|U>>>6&63)+_fromCC(128|U&63)}},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=G=>G.replace(re_utob,cb_utob),_encode=_hasBuffer?G=>Buffer.from(G,"utf8").toString("base64"):_TE?G=>_fromUint8Array(_TE.encode(G)):G=>_btoa(utob(G)),encode$1=(G,U=!1)=>U?_mkUriSafe(_encode(G)):_encode(G),encodeURI=G=>encode$1(G,!0),re_btou=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,cb_btou=G=>{switch(G.length){case 4:var U=(7&G.charCodeAt(0))<<18|(63&G.charCodeAt(1))<<12|(63&G.charCodeAt(2))<<6|63&G.charCodeAt(3),Y=U-65536;return _fromCC((Y>>>10)+55296)+_fromCC((Y&1023)+56320);case 3:return _fromCC((15&G.charCodeAt(0))<<12|(63&G.charCodeAt(1))<<6|63&G.charCodeAt(2));default:return _fromCC((31&G.charCodeAt(0))<<6|63&G.charCodeAt(1))}},btou=G=>G.replace(re_btou,cb_btou),atobPolyfill=G=>{if(G=G.replace(/\s+/g,""),!b64re.test(G))throw new TypeError("malformed base64.");G+="==".slice(2-(G.length&3));let U,Y="",re,oe;for(let le=0;le<G.length;)U=b64tab[G.charAt(le++)]<<18|b64tab[G.charAt(le++)]<<12|(re=b64tab[G.charAt(le++)])<<6|(oe=b64tab[G.charAt(le++)]),Y+=re===64?_fromCC(U>>16&255):oe===64?_fromCC(U>>16&255,U>>8&255):_fromCC(U>>16&255,U>>8&255,U&255);return Y},_atob=_hasatob?G=>atob(_tidyB64(G)):_hasBuffer?G=>Buffer.from(G,"base64").toString("binary"):atobPolyfill,_toUint8Array=_hasBuffer?G=>_U8Afrom(Buffer.from(G,"base64")):G=>_U8Afrom(_atob(G).split("").map(U=>U.charCodeAt(0))),toUint8Array=G=>_toUint8Array(_unURI(G)),_decode=_hasBuffer?G=>Buffer.from(G,"base64").toString("utf8"):_TD?G=>_TD.decode(_toUint8Array(G)):G=>btou(_atob(G)),_unURI=G=>_tidyB64(G.replace(/[-_]/g,U=>U=="-"?"+":"/")),decode$1=G=>_decode(_unURI(G)),isValid=G=>{if(typeof G!="string")return!1;const U=G.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(U)||!/[^\s0-9a-zA-Z\-_]/.test(U)},_noEnum=G=>({value:G,enumerable:!1,writable:!0,configurable:!0}),extendString=function(){const G=(U,Y)=>Object.defineProperty(String.prototype,U,_noEnum(Y));G("fromBase64",function(){return decode$1(this)}),G("toBase64",function(U){return encode$1(this,U)}),G("toBase64URI",function(){return encode$1(this,!0)}),G("toBase64URL",function(){return encode$1(this,!0)}),G("toUint8Array",function(){return toUint8Array(this)})},extendUint8Array=function(){const G=(U,Y)=>Object.defineProperty(Uint8Array.prototype,U,_noEnum(Y));G("toBase64",function(U){return fromUint8Array(this,U)}),G("toBase64URI",function(){return fromUint8Array(this,!0)}),G("toBase64URL",function(){return fromUint8Array(this,!0)})},extendBuiltins=()=>{extendString(),extendUint8Array()},gBase64={version,VERSION,atob:_atob,atobPolyfill,btoa:_btoa,btoaPolyfill,fromBase64:decode$1,toBase64:encode$1,encode:encode$1,encodeURI,encodeURL:encodeURI,utob,btou,decode:decode$1,isValid,fromUint8Array,toUint8Array,extendString,extendUint8Array,extendBuiltins};var requiresPort=function(U,Y){if(Y=Y.split(":")[0],U=+U,!U)return!1;switch(Y){case"http":case"ws":return U!==80;case"https":case"wss":return U!==443;case"ftp":return U!==21;case"gopher":return U!==70;case"file":return!1}return U!==0},querystringify$1={},has$1=Object.prototype.hasOwnProperty,undef;function decode(G){try{return decodeURIComponent(G.replace(/\+/g," "))}catch{return null}}function encode(G){try{return encodeURIComponent(G)}catch{return null}}function querystring(G){for(var U=/([^=?#&]+)=?([^&]*)/g,Y={},re;re=U.exec(G);){var oe=decode(re[1]),le=decode(re[2]);oe===null||le===null||oe in Y||(Y[oe]=le)}return Y}function querystringify(G,U){U=U||"";var Y=[],re,oe;typeof U!="string"&&(U="?");for(oe in G)if(has$1.call(G,oe)){if(re=G[oe],!re&&(re===null||re===undef||isNaN(re))&&(re=""),oe=encode(oe),re=encode(re),oe===null||re===null)continue;Y.push(oe+"="+re)}return Y.length?U+Y.join("&"):""}querystringify$1.stringify=querystringify;querystringify$1.parse=querystring;var required=requiresPort,qs=querystringify$1,controlOrWhitespace=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,CRHTLF=/[\n\r\t]/g,slashes=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,port=/:\d+$/,protocolre=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,windowsDriveLetter=/^[a-zA-Z]:/;function trimLeft(G){return(G||"").toString().replace(controlOrWhitespace,"")}var rules=[["#","hash"],["?","query"],function(U,Y){return isSpecial(Y.protocol)?U.replace(/\\/g,"/"):U},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],ignore={hash:1,query:1};function lolcation(G){var U;typeof window<"u"?U=window:typeof commonjsGlobal<"u"?U=commonjsGlobal:typeof self<"u"?U=self:U={};var Y=U.location||{};G=G||Y;var re={},oe=typeof G,le;if(G.protocol==="blob:")re=new Url(unescape(G.pathname),{});else if(oe==="string"){re=new Url(G,{});for(le in ignore)delete re[le]}else if(oe==="object"){for(le in G)le in ignore||(re[le]=G[le]);re.slashes===void 0&&(re.slashes=slashes.test(G.href))}return re}function isSpecial(G){return G==="file:"||G==="ftp:"||G==="http:"||G==="https:"||G==="ws:"||G==="wss:"}function extractProtocol(G,U){G=trimLeft(G),G=G.replace(CRHTLF,""),U=U||{};var Y=protocolre.exec(G),re=Y[1]?Y[1].toLowerCase():"",oe=!!Y[2],le=!!Y[3],ue=0,he;return oe?le?(he=Y[2]+Y[3]+Y[4],ue=Y[2].length+Y[3].length):(he=Y[2]+Y[4],ue=Y[2].length):le?(he=Y[3]+Y[4],ue=Y[3].length):he=Y[4],re==="file:"?ue>=2&&(he=he.slice(2)):isSpecial(re)?he=Y[4]:re?oe&&(he=he.slice(2)):ue>=2&&isSpecial(U.protocol)&&(he=Y[4]),{protocol:re,slashes:oe||isSpecial(re),slashesCount:ue,rest:he}}function resolve(G,U){if(G==="")return U;for(var Y=(U||"/").split("/").slice(0,-1).concat(G.split("/")),re=Y.length,oe=Y[re-1],le=!1,ue=0;re--;)Y[re]==="."?Y.splice(re,1):Y[re]===".."?(Y.splice(re,1),ue++):ue&&(re===0&&(le=!0),Y.splice(re,1),ue--);return le&&Y.unshift(""),(oe==="."||oe==="..")&&Y.push(""),Y.join("/")}function Url(G,U,Y){if(G=trimLeft(G),G=G.replace(CRHTLF,""),!(this instanceof Url))return new Url(G,U,Y);var re,oe,le,ue,he,fe,ve=rules.slice(),$e=typeof U,_e=this,Fe=0;for($e!=="object"&&$e!=="string"&&(Y=U,U=null),Y&&typeof Y!="function"&&(Y=qs.parse),U=lolcation(U),oe=extractProtocol(G||"",U),re=!oe.protocol&&!oe.slashes,_e.slashes=oe.slashes||re&&U.slashes,_e.protocol=oe.protocol||U.protocol||"",G=oe.rest,(oe.protocol==="file:"&&(oe.slashesCount!==2||windowsDriveLetter.test(G))||!oe.slashes&&(oe.protocol||oe.slashesCount<2||!isSpecial(_e.protocol)))&&(ve[3]=[/(.*)/,"pathname"]);Fe<ve.length;Fe++){if(ue=ve[Fe],typeof ue=="function"){G=ue(G,_e);continue}le=ue[0],fe=ue[1],le!==le?_e[fe]=G:typeof le=="string"?(he=le==="@"?G.lastIndexOf(le):G.indexOf(le),~he&&(typeof ue[2]=="number"?(_e[fe]=G.slice(0,he),G=G.slice(he+ue[2])):(_e[fe]=G.slice(he),G=G.slice(0,he)))):(he=le.exec(G))&&(_e[fe]=he[1],G=G.slice(0,he.index)),_e[fe]=_e[fe]||re&&ue[3]&&U[fe]||"",ue[4]&&(_e[fe]=_e[fe].toLowerCase())}Y&&(_e.query=Y(_e.query)),re&&U.slashes&&_e.pathname.charAt(0)!=="/"&&(_e.pathname!==""||U.pathname!=="")&&(_e.pathname=resolve(_e.pathname,U.pathname)),_e.pathname.charAt(0)!=="/"&&isSpecial(_e.protocol)&&(_e.pathname="/"+_e.pathname),required(_e.port,_e.protocol)||(_e.host=_e.hostname,_e.port=""),_e.username=_e.password="",_e.auth&&(he=_e.auth.indexOf(":"),~he?(_e.username=_e.auth.slice(0,he),_e.username=encodeURIComponent(decodeURIComponent(_e.username)),_e.password=_e.auth.slice(he+1),_e.password=encodeURIComponent(decodeURIComponent(_e.password))):_e.username=encodeURIComponent(decodeURIComponent(_e.auth)),_e.auth=_e.password?_e.username+":"+_e.password:_e.username),_e.origin=_e.protocol!=="file:"&&isSpecial(_e.protocol)&&_e.host?_e.protocol+"//"+_e.host:"null",_e.href=_e.toString()}function set(G,U,Y){var re=this;switch(G){case"query":typeof U=="string"&&U.length&&(U=(Y||qs.parse)(U)),re[G]=U;break;case"port":re[G]=U,required(U,re.protocol)?U&&(re.host=re.hostname+":"+U):(re.host=re.hostname,re[G]="");break;case"hostname":re[G]=U,re.port&&(U+=":"+re.port),re.host=U;break;case"host":re[G]=U,port.test(U)?(U=U.split(":"),re.port=U.pop(),re.hostname=U.join(":")):(re.hostname=U,re.port="");break;case"protocol":re.protocol=U.toLowerCase(),re.slashes=!Y;break;case"pathname":case"hash":if(U){var oe=G==="pathname"?"/":"#";re[G]=U.charAt(0)!==oe?oe+U:U}else re[G]=U;break;case"username":case"password":re[G]=encodeURIComponent(U);break;case"auth":var le=U.indexOf(":");~le?(re.username=U.slice(0,le),re.username=encodeURIComponent(decodeURIComponent(re.username)),re.password=U.slice(le+1),re.password=encodeURIComponent(decodeURIComponent(re.password))):re.username=encodeURIComponent(decodeURIComponent(U))}for(var ue=0;ue<rules.length;ue++){var he=rules[ue];he[4]&&(re[he[1]]=re[he[1]].toLowerCase())}return re.auth=re.password?re.username+":"+re.password:re.username,re.origin=re.protocol!=="file:"&&isSpecial(re.protocol)&&re.host?re.protocol+"//"+re.host:"null",re.href=re.toString(),re}function toString(G){(!G||typeof G!="function")&&(G=qs.stringify);var U,Y=this,re=Y.host,oe=Y.protocol;oe&&oe.charAt(oe.length-1)!==":"&&(oe+=":");var le=oe+(Y.protocol&&Y.slashes||isSpecial(Y.protocol)?"//":"");return Y.username?(le+=Y.username,Y.password&&(le+=":"+Y.password),le+="@"):Y.password?(le+=":"+Y.password,le+="@"):Y.protocol!=="file:"&&isSpecial(Y.protocol)&&!re&&Y.pathname!=="/"&&(le+="@"),(re[re.length-1]===":"||port.test(Y.hostname)&&!Y.port)&&(re+=":"),le+=re+Y.pathname,U=typeof Y.query=="object"?G(Y.query):Y.query,U&&(le+=U.charAt(0)!=="?"?"?"+U:U),Y.hash&&(le+=Y.hash),le}Url.prototype={set,toString};Url.extractProtocol=extractProtocol;Url.location=lolcation;Url.trimLeft=trimLeft;Url.qs=qs;var urlParse=Url;const URL$1=getDefaultExportFromCjs(urlParse);function _typeof$8(G){"@babel/helpers - typeof";return _typeof$8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},_typeof$8(G)}function _defineProperties$8(G,U){for(var Y=0;Y<U.length;Y++){var re=U[Y];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(G,_toPropertyKey$8(re.key),re)}}function _createClass$8(G,U,Y){return U&&_defineProperties$8(G.prototype,U),Y&&_defineProperties$8(G,Y),Object.defineProperty(G,"prototype",{writable:!1}),G}function _toPropertyKey$8(G){var U=_toPrimitive$8(G,"string");return _typeof$8(U)==="symbol"?U:String(U)}function _toPrimitive$8(G,U){if(_typeof$8(G)!=="object"||G===null)return G;var Y=G[Symbol.toPrimitive];if(Y!==void 0){var re=Y.call(G,U||"default");if(_typeof$8(re)!=="object")return re;throw new TypeError("@@toPrimitive must return a primitive value.")}return(U==="string"?String:Number)(G)}function _classCallCheck$8(G,U){if(!(G instanceof U))throw new TypeError("Cannot call a class as a function")}function _inherits$1(G,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function");G.prototype=Object.create(U&&U.prototype,{constructor:{value:G,writable:!0,configurable:!0}}),Object.defineProperty(G,"prototype",{writable:!1}),U&&_setPrototypeOf$1(G,U)}function _createSuper$1(G){var U=_isNativeReflectConstruct$1();return function(){var re=_getPrototypeOf$1(G),oe;if(U){var le=_getPrototypeOf$1(this).constructor;oe=Reflect.construct(re,arguments,le)}else oe=re.apply(this,arguments);return _possibleConstructorReturn$1(this,oe)}}function _possibleConstructorReturn$1(G,U){if(U&&(_typeof$8(U)==="object"||typeof U=="function"))return U;if(U!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$1(G)}function _assertThisInitialized$1(G){if(G===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G}function _wrapNativeSuper(G){var U=typeof Map=="function"?new Map:void 0;return _wrapNativeSuper=function(re){if(re===null||!_isNativeFunction(re))return re;if(typeof re!="function")throw new TypeError("Super expression must either be null or a function");if(typeof U<"u"){if(U.has(re))return U.get(re);U.set(re,oe)}function oe(){return _construct(re,arguments,_getPrototypeOf$1(this).constructor)}return oe.prototype=Object.create(re.prototype,{constructor:{value:oe,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf$1(oe,re)},_wrapNativeSuper(G)}function _construct(G,U,Y){return _isNativeReflectConstruct$1()?_construct=Reflect.construct.bind():_construct=function(oe,le,ue){var he=[null];he.push.apply(he,le);var fe=Function.bind.apply(oe,he),ve=new fe;return ue&&_setPrototypeOf$1(ve,ue.prototype),ve},_construct.apply(null,arguments)}function _isNativeReflectConstruct$1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _isNativeFunction(G){try{return Function.toString.call(G).indexOf("[native code]")!==-1}catch{return typeof G=="function"}}function _setPrototypeOf$1(G,U){return _setPrototypeOf$1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(re,oe){return re.__proto__=oe,re},_setPrototypeOf$1(G,U)}function _getPrototypeOf$1(G){return _getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Y){return Y.__proto__||Object.getPrototypeOf(Y)},_getPrototypeOf$1(G)}var DetailedError=function(G){_inherits$1(Y,G);var U=_createSuper$1(Y);function Y(re){var oe,le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,he=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(_classCallCheck$8(this,Y),oe=U.call(this,re),oe.originalRequest=ue,oe.originalResponse=he,oe.causingError=le,le!=null&&(re+=", caused by ".concat(le.toString())),ue!=null){var fe=ue.getHeader("X-Request-ID")||"n/a",ve=ue.getMethod(),$e=ue.getURL(),_e=he?he.getStatus():"n/a",Fe=he?he.getBody()||"":"n/a";re+=", originated from request (method: ".concat(ve,", url: ").concat($e,", response code: ").concat(_e,", response text: ").concat(Fe,", request id: ").concat(fe,")")}return oe.message=re,oe}return _createClass$8(Y)}(_wrapNativeSuper(Error));function log(G){}function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(G){var U=Math.random()*16|0,Y=G==="x"?U:U&3|8;return Y.toString(16)})}function _regeneratorRuntime$1(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime$1=function(){return U};var G,U={},Y=Object.prototype,re=Y.hasOwnProperty,oe=Object.defineProperty||function(Ce,Pe,xe){Ce[Pe]=xe.value},le=typeof Symbol=="function"?Symbol:{},ue=le.iterator||"@@iterator",he=le.asyncIterator||"@@asyncIterator",fe=le.toStringTag||"@@toStringTag";function ve(Ce,Pe,xe){return Object.defineProperty(Ce,Pe,{value:xe,enumerable:!0,configurable:!0,writable:!0}),Ce[Pe]}try{ve({},"")}catch{ve=function(xe,Be,Ie){return xe[Be]=Ie}}function $e(Ce,Pe,xe,Be){var Ie=Pe&&Pe.prototype instanceof Re?Pe:Re,Ne=Object.create(Ie.prototype),qe=new Ze(Be||[]);return oe(Ne,"_invoke",{value:Qe(Ce,xe,qe)}),Ne}function _e(Ce,Pe,xe){try{return{type:"normal",arg:Ce.call(Pe,xe)}}catch(Be){return{type:"throw",arg:Be}}}U.wrap=$e;var Fe="suspendedStart",Ee="suspendedYield",Se="executing",Ae="completed",Te={};function Re(){}function Ue(){}function Le(){}var Me={};ve(Me,ue,function(){return this});var De=Object.getPrototypeOf,je=De&&De(De(Ye([])));je&&je!==Y&&re.call(je,ue)&&(Me=je);var He=Le.prototype=Re.prototype=Object.create(Me);function Ve(Ce){["next","throw","return"].forEach(function(Pe){ve(Ce,Pe,function(xe){return this._invoke(Pe,xe)})})}function ze(Ce,Pe){function xe(Ie,Ne,qe,Ke){var We=_e(Ce[Ie],Ce,Ne);if(We.type!=="throw"){var Je=We.arg,Xe=Je.value;return Xe&&_typeof$7(Xe)=="object"&&re.call(Xe,"__await")?Pe.resolve(Xe.__await).then(function(Ge){xe("next",Ge,qe,Ke)},function(Ge){xe("throw",Ge,qe,Ke)}):Pe.resolve(Xe).then(function(Ge){Je.value=Ge,qe(Je)},function(Ge){return xe("throw",Ge,qe,Ke)})}Ke(We.arg)}var Be;oe(this,"_invoke",{value:function(Ne,qe){function Ke(){return new Pe(function(We,Je){xe(Ne,qe,We,Je)})}return Be=Be?Be.then(Ke,Ke):Ke()}})}function Qe(Ce,Pe,xe){var Be=Fe;return function(Ie,Ne){if(Be===Se)throw new Error("Generator is already running");if(Be===Ae){if(Ie==="throw")throw Ne;return{value:G,done:!0}}for(xe.method=Ie,xe.arg=Ne;;){var qe=xe.delegate;if(qe){var Ke=tt(qe,xe);if(Ke){if(Ke===Te)continue;return Ke}}if(xe.method==="next")xe.sent=xe._sent=xe.arg;else if(xe.method==="throw"){if(Be===Fe)throw Be=Ae,xe.arg;xe.dispatchException(xe.arg)}else xe.method==="return"&&xe.abrupt("return",xe.arg);Be=Se;var We=_e(Ce,Pe,xe);if(We.type==="normal"){if(Be=xe.done?Ae:Ee,We.arg===Te)continue;return{value:We.arg,done:xe.done}}We.type==="throw"&&(Be=Ae,xe.method="throw",xe.arg=We.arg)}}}function tt(Ce,Pe){var xe=Pe.method,Be=Ce.iterator[xe];if(Be===G)return Pe.delegate=null,xe==="throw"&&Ce.iterator.return&&(Pe.method="return",Pe.arg=G,tt(Ce,Pe),Pe.method==="throw")||xe!=="return"&&(Pe.method="throw",Pe.arg=new TypeError("The iterator does not provide a '"+xe+"' method")),Te;var Ie=_e(Be,Ce.iterator,Pe.arg);if(Ie.type==="throw")return Pe.method="throw",Pe.arg=Ie.arg,Pe.delegate=null,Te;var Ne=Ie.arg;return Ne?Ne.done?(Pe[Ce.resultName]=Ne.value,Pe.next=Ce.nextLoc,Pe.method!=="return"&&(Pe.method="next",Pe.arg=G),Pe.delegate=null,Te):Ne:(Pe.method="throw",Pe.arg=new TypeError("iterator result is not an object"),Pe.delegate=null,Te)}function rt(Ce){var Pe={tryLoc:Ce[0]};1 in Ce&&(Pe.catchLoc=Ce[1]),2 in Ce&&(Pe.finallyLoc=Ce[2],Pe.afterLoc=Ce[3]),this.tryEntries.push(Pe)}function et(Ce){var Pe=Ce.completion||{};Pe.type="normal",delete Pe.arg,Ce.completion=Pe}function Ze(Ce){this.tryEntries=[{tryLoc:"root"}],Ce.forEach(rt,this),this.reset(!0)}function Ye(Ce){if(Ce||Ce===""){var Pe=Ce[ue];if(Pe)return Pe.call(Ce);if(typeof Ce.next=="function")return Ce;if(!isNaN(Ce.length)){var xe=-1,Be=function Ie(){for(;++xe<Ce.length;)if(re.call(Ce,xe))return Ie.value=Ce[xe],Ie.done=!1,Ie;return Ie.value=G,Ie.done=!0,Ie};return Be.next=Be}}throw new TypeError(_typeof$7(Ce)+" is not iterable")}return Ue.prototype=Le,oe(He,"constructor",{value:Le,configurable:!0}),oe(Le,"constructor",{value:Ue,configurable:!0}),Ue.displayName=ve(Le,fe,"GeneratorFunction"),U.isGeneratorFunction=function(Ce){var Pe=typeof Ce=="function"&&Ce.constructor;return!!Pe&&(Pe===Ue||(Pe.displayName||Pe.name)==="GeneratorFunction")},U.mark=function(Ce){return Object.setPrototypeOf?Object.setPrototypeOf(Ce,Le):(Ce.__proto__=Le,ve(Ce,fe,"GeneratorFunction")),Ce.prototype=Object.create(He),Ce},U.awrap=function(Ce){return{__await:Ce}},Ve(ze.prototype),ve(ze.prototype,he,function(){return this}),U.AsyncIterator=ze,U.async=function(Ce,Pe,xe,Be,Ie){Ie===void 0&&(Ie=Promise);var Ne=new ze($e(Ce,Pe,xe,Be),Ie);return U.isGeneratorFunction(Pe)?Ne:Ne.next().then(function(qe){return qe.done?qe.value:Ne.next()})},Ve(He),ve(He,fe,"Generator"),ve(He,ue,function(){return this}),ve(He,"toString",function(){return"[object Generator]"}),U.keys=function(Ce){var Pe=Object(Ce),xe=[];for(var Be in Pe)xe.push(Be);return xe.reverse(),function Ie(){for(;xe.length;){var Ne=xe.pop();if(Ne in Pe)return Ie.value=Ne,Ie.done=!1,Ie}return Ie.done=!0,Ie}},U.values=Ye,Ze.prototype={constructor:Ze,reset:function(Pe){if(this.prev=0,this.next=0,this.sent=this._sent=G,this.done=!1,this.delegate=null,this.method="next",this.arg=G,this.tryEntries.forEach(et),!Pe)for(var xe in this)xe.charAt(0)==="t"&&re.call(this,xe)&&!isNaN(+xe.slice(1))&&(this[xe]=G)},stop:function(){this.done=!0;var Pe=this.tryEntries[0].completion;if(Pe.type==="throw")throw Pe.arg;return this.rval},dispatchException:function(Pe){if(this.done)throw Pe;var xe=this;function Be(Je,Xe){return qe.type="throw",qe.arg=Pe,xe.next=Je,Xe&&(xe.method="next",xe.arg=G),!!Xe}for(var Ie=this.tryEntries.length-1;Ie>=0;--Ie){var Ne=this.tryEntries[Ie],qe=Ne.completion;if(Ne.tryLoc==="root")return Be("end");if(Ne.tryLoc<=this.prev){var Ke=re.call(Ne,"catchLoc"),We=re.call(Ne,"finallyLoc");if(Ke&&We){if(this.prev<Ne.catchLoc)return Be(Ne.catchLoc,!0);if(this.prev<Ne.finallyLoc)return Be(Ne.finallyLoc)}else if(Ke){if(this.prev<Ne.catchLoc)return Be(Ne.catchLoc,!0)}else{if(!We)throw new Error("try statement without catch or finally");if(this.prev<Ne.finallyLoc)return Be(Ne.finallyLoc)}}}},abrupt:function(Pe,xe){for(var Be=this.tryEntries.length-1;Be>=0;--Be){var Ie=this.tryEntries[Be];if(Ie.tryLoc<=this.prev&&re.call(Ie,"finallyLoc")&&this.prev<Ie.finallyLoc){var Ne=Ie;break}}Ne&&(Pe==="break"||Pe==="continue")&&Ne.tryLoc<=xe&&xe<=Ne.finallyLoc&&(Ne=null);var qe=Ne?Ne.completion:{};return qe.type=Pe,qe.arg=xe,Ne?(this.method="next",this.next=Ne.finallyLoc,Te):this.complete(qe)},complete:function(Pe,xe){if(Pe.type==="throw")throw Pe.arg;return Pe.type==="break"||Pe.type==="continue"?this.next=Pe.arg:Pe.type==="return"?(this.rval=this.arg=Pe.arg,this.method="return",this.next="end"):Pe.type==="normal"&&xe&&(this.next=xe),Te},finish:function(Pe){for(var xe=this.tryEntries.length-1;xe>=0;--xe){var Be=this.tryEntries[xe];if(Be.finallyLoc===Pe)return this.complete(Be.completion,Be.afterLoc),et(Be),Te}},catch:function(Pe){for(var xe=this.tryEntries.length-1;xe>=0;--xe){var Be=this.tryEntries[xe];if(Be.tryLoc===Pe){var Ie=Be.completion;if(Ie.type==="throw"){var Ne=Ie.arg;et(Be)}return Ne}}throw new Error("illegal catch attempt")},delegateYield:function(Pe,xe,Be){return this.delegate={iterator:Ye(Pe),resultName:xe,nextLoc:Be},this.method==="next"&&(this.arg=G),Te}},U}function asyncGeneratorStep$1(G,U,Y,re,oe,le,ue){try{var he=G[le](ue),fe=he.value}catch(ve){Y(ve);return}he.done?U(fe):Promise.resolve(fe).then(re,oe)}function _asyncToGenerator$1(G){return function(){var U=this,Y=arguments;return new Promise(function(re,oe){var le=G.apply(U,Y);function ue(fe){asyncGeneratorStep$1(le,re,oe,ue,he,"next",fe)}function he(fe){asyncGeneratorStep$1(le,re,oe,ue,he,"throw",fe)}ue(void 0)})}}function _slicedToArray(G,U){return _arrayWithHoles(G)||_iterableToArrayLimit(G,U)||_unsupportedIterableToArray(G,U)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(G,U){if(G){if(typeof G=="string")return _arrayLikeToArray(G,U);var Y=Object.prototype.toString.call(G).slice(8,-1);if(Y==="Object"&&G.constructor&&(Y=G.constructor.name),Y==="Map"||Y==="Set")return Array.from(G);if(Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y))return _arrayLikeToArray(G,U)}}function _arrayLikeToArray(G,U){(U==null||U>G.length)&&(U=G.length);for(var Y=0,re=new Array(U);Y<U;Y++)re[Y]=G[Y];return re}function _iterableToArrayLimit(G,U){var Y=G==null?null:typeof Symbol<"u"&&G[Symbol.iterator]||G["@@iterator"];if(Y!=null){var re,oe,le,ue,he=[],fe=!0,ve=!1;try{if(le=(Y=Y.call(G)).next,U===0){if(Object(Y)!==Y)return;fe=!1}else for(;!(fe=(re=le.call(Y)).done)&&(he.push(re.value),he.length!==U);fe=!0);}catch($e){ve=!0,oe=$e}finally{try{if(!fe&&Y.return!=null&&(ue=Y.return(),Object(ue)!==ue))return}finally{if(ve)throw oe}}return he}}function _arrayWithHoles(G){if(Array.isArray(G))return G}function _typeof$7(G){"@babel/helpers - typeof";return _typeof$7=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},_typeof$7(G)}function ownKeys$1(G,U){var Y=Object.keys(G);if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(G);U&&(re=re.filter(function(oe){return Object.getOwnPropertyDescriptor(G,oe).enumerable})),Y.push.apply(Y,re)}return Y}function _objectSpread$1(G){for(var U=1;U<arguments.length;U++){var Y=arguments[U]!=null?arguments[U]:{};U%2?ownKeys$1(Object(Y),!0).forEach(function(re){_defineProperty$1(G,re,Y[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(Y)):ownKeys$1(Object(Y)).forEach(function(re){Object.defineProperty(G,re,Object.getOwnPropertyDescriptor(Y,re))})}return G}function _defineProperty$1(G,U,Y){return U=_toPropertyKey$7(U),U in G?Object.defineProperty(G,U,{value:Y,enumerable:!0,configurable:!0,writable:!0}):G[U]=Y,G}function _classCallCheck$7(G,U){if(!(G instanceof U))throw new TypeError("Cannot call a class as a function")}function _defineProperties$7(G,U){for(var Y=0;Y<U.length;Y++){var re=U[Y];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(G,_toPropertyKey$7(re.key),re)}}function _createClass$7(G,U,Y){return U&&_defineProperties$7(G.prototype,U),Y&&_defineProperties$7(G,Y),Object.defineProperty(G,"prototype",{writable:!1}),G}function _toPropertyKey$7(G){var U=_toPrimitive$7(G,"string");return _typeof$7(U)==="symbol"?U:String(U)}function _toPrimitive$7(G,U){if(_typeof$7(G)!=="object"||G===null)return G;var Y=G[Symbol.toPrimitive];if(Y!==void 0){var re=Y.call(G,U||"default");if(_typeof$7(re)!=="object")return re;throw new TypeError("@@toPrimitive must return a primitive value.")}return(U==="string"?String:Number)(G)}var defaultOptions$2={endpoint:null,uploadUrl:null,metadata:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:defaultOnShouldRetry,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,parallelUploadBoundaries:null,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null},BaseUpload=function(){function G(U,Y){_classCallCheck$7(this,G),"resume"in Y&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=Y,this.options.chunkSize=Number(this.options.chunkSize),this._urlStorage=this.options.urlStorage,this.file=U,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}return _createClass$7(G,[{key:"findPreviousUploads",value:function(){var Y=this;return this.options.fingerprint(this.file,this.options).then(function(re){return Y._urlStorage.findUploadsByFingerprint(re)})}},{key:"resumeFromPreviousUpload",value:function(Y){this.url=Y.uploadUrl||null,this._parallelUploadUrls=Y.parallelUploadUrls||null,this._urlStorageKey=Y.urlStorageKey}},{key:"start",value:function(){var Y=this,re=this.file;if(!re){this._emitError(new Error("tus: no file or stream to upload provided"));return}if(!this.options.endpoint&&!this.options.uploadUrl&&!this.url){this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));return}var oe=this.options.retryDelays;if(oe!=null&&Object.prototype.toString.call(oe)!=="[object Array]"){this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"));return}if(this.options.parallelUploads>1)for(var le=0,ue=["uploadUrl","uploadSize","uploadLengthDeferred"];le<ue.length;le++){var he=ue[le];if(this.options[he]){this._emitError(new Error("tus: cannot use the ".concat(he," option when parallelUploads is enabled")));return}}if(this.options.parallelUploadBoundaries){if(this.options.parallelUploads<=1){this._emitError(new Error("tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled"));return}if(this.options.parallelUploads!==this.options.parallelUploadBoundaries.length){this._emitError(new Error("tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`"));return}}this.options.fingerprint(re,this.options).then(function(fe){return Y._fingerprint=fe,Y._source?Y._source:Y.options.fileReader.openFile(re,Y.options.chunkSize)}).then(function(fe){if(Y._source=fe,Y.options.uploadLengthDeferred)Y._size=null;else if(Y.options.uploadSize!=null){if(Y._size=Number(Y.options.uploadSize),Number.isNaN(Y._size)){Y._emitError(new Error("tus: cannot convert `uploadSize` option into a number"));return}}else if(Y._size=Y._source.size,Y._size==null){Y._emitError(new Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));return}Y.options.parallelUploads>1||Y._parallelUploadUrls!=null?Y._startParallelUpload():Y._startSingleUpload()}).catch(function(fe){Y._emitError(fe)})}},{key:"_startParallelUpload",value:function(){var Y,re=this,oe=this._size,le=0;this._parallelUploads=[];var ue=this._parallelUploadUrls!=null?this._parallelUploadUrls.length:this.options.parallelUploads,he=(Y=this.options.parallelUploadBoundaries)!==null&&Y!==void 0?Y:splitSizeIntoParts(this._source.size,ue);this._parallelUploadUrls&&he.forEach(function($e,_e){$e.uploadUrl=re._parallelUploadUrls[_e]||null}),this._parallelUploadUrls=new Array(he.length);var fe=he.map(function($e,_e){var Fe=0;return re._source.slice($e.start,$e.end).then(function(Ee){var Se=Ee.value;return new Promise(function(Ae,Te){var Re=_objectSpread$1(_objectSpread$1({},re.options),{},{uploadUrl:$e.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,parallelUploadBoundaries:null,metadata:{},headers:_objectSpread$1(_objectSpread$1({},re.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:Ae,onError:Te,onProgress:function(Me){le=le-Fe+Me,Fe=Me,re._emitProgress(le,oe)},onUploadUrlAvailable:function(){re._parallelUploadUrls[_e]=Ue.url,re._parallelUploadUrls.filter(function(Me){return!!Me}).length===he.length&&re._saveUploadInUrlStorage()}}),Ue=new G(Se,Re);Ue.start(),re._parallelUploads.push(Ue)})})}),ve;Promise.all(fe).then(function(){ve=re._openRequest("POST",re.options.endpoint),ve.setHeader("Upload-Concat","final;".concat(re._parallelUploadUrls.join(" ")));var $e=encodeMetadata(re.options.metadata);return $e!==""&&ve.setHeader("Upload-Metadata",$e),re._sendRequest(ve,null)}).then(function($e){if(!inStatusCategory($e.getStatus(),200)){re._emitHttpError(ve,$e,"tus: unexpected response while creating upload");return}var _e=$e.getHeader("Location");if(_e==null){re._emitHttpError(ve,$e,"tus: invalid or missing Location header");return}re.url=resolveUrl(re.options.endpoint,_e),"Created upload at ".concat(re.url),re._emitSuccess()}).catch(function($e){re._emitError($e)})}},{key:"_startSingleUpload",value:function(){if(this._aborted=!1,this.url!=null){"Resuming upload from previous URL: ".concat(this.url),this._resumeUpload();return}if(this.options.uploadUrl!=null){"Resuming upload from provided URL: ".concat(this.options.uploadUrl),this.url=this.options.uploadUrl,this._resumeUpload();return}this._createUpload()}},{key:"abort",value:function(Y){var re=this;return this._parallelUploads!=null&&this._parallelUploads.forEach(function(oe){oe.abort(Y)}),this._req!==null&&this._req.abort(),this._aborted=!0,this._retryTimeout!=null&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),!Y||this.url==null?Promise.resolve():G.terminate(this.url,this.options).then(function(){return re._removeFromUrlStorage()})}},{key:"_emitHttpError",value:function(Y,re,oe,le){this._emitError(new DetailedError(oe,le,Y,re))}},{key:"_emitError",value:function(Y){var re=this;if(!this._aborted){if(this.options.retryDelays!=null){var oe=this._offset!=null&&this._offset>this._offsetBeforeRetry;if(oe&&(this._retryAttempt=0),shouldRetry(Y,this._retryAttempt,this.options)){var le=this.options.retryDelays[this._retryAttempt++];this._offsetBeforeRetry=this._offset,this._retryTimeout=setTimeout(function(){re.start()},le);return}}if(typeof this.options.onError=="function")this.options.onError(Y);else throw Y}}},{key:"_emitSuccess",value:function(){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),typeof this.options.onSuccess=="function"&&this.options.onSuccess()}},{key:"_emitProgress",value:function(Y,re){typeof this.options.onProgress=="function"&&this.options.onProgress(Y,re)}},{key:"_emitChunkComplete",value:function(Y,re,oe){typeof this.options.onChunkComplete=="function"&&this.options.onChunkComplete(Y,re,oe)}},{key:"_createUpload",value:function(){var Y=this;if(!this.options.endpoint){this._emitError(new Error("tus: unable to create upload because no endpoint is provided"));return}var re=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?re.setHeader("Upload-Defer-Length",1):re.setHeader("Upload-Length",this._size);var oe=encodeMetadata(this.options.metadata);oe!==""&&re.setHeader("Upload-Metadata",oe);var le;this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,le=this._addChunkToRequest(re)):le=this._sendRequest(re,null),le.then(function(ue){if(!inStatusCategory(ue.getStatus(),200)){Y._emitHttpError(re,ue,"tus: unexpected response while creating upload");return}var he=ue.getHeader("Location");if(he==null){Y._emitHttpError(re,ue,"tus: invalid or missing Location header");return}if(Y.url=resolveUrl(Y.options.endpoint,he),"Created upload at ".concat(Y.url),typeof Y.options.onUploadUrlAvailable=="function"&&Y.options.onUploadUrlAvailable(),Y._size===0){Y._emitSuccess(),Y._source.close();return}Y._saveUploadInUrlStorage().then(function(){Y.options.uploadDataDuringCreation?Y._handleUploadResponse(re,ue):(Y._offset=0,Y._performUpload())})}).catch(function(ue){Y._emitHttpError(re,null,"tus: failed to create upload",ue)})}},{key:"_resumeUpload",value:function(){var Y=this,re=this._openRequest("HEAD",this.url),oe=this._sendRequest(re,null);oe.then(function(le){var ue=le.getStatus();if(!inStatusCategory(ue,200)){if(ue===423){Y._emitHttpError(re,le,"tus: upload is currently locked; retry later");return}if(inStatusCategory(ue,400)&&Y._removeFromUrlStorage(),!Y.options.endpoint){Y._emitHttpError(re,le,"tus: unable to resume upload (new upload cannot be created without an endpoint)");return}Y.url=null,Y._createUpload();return}var he=parseInt(le.getHeader("Upload-Offset"),10);if(Number.isNaN(he)){Y._emitHttpError(re,le,"tus: invalid or missing offset value");return}var fe=parseInt(le.getHeader("Upload-Length"),10);if(Number.isNaN(fe)&&!Y.options.uploadLengthDeferred){Y._emitHttpError(re,le,"tus: invalid or missing length value");return}typeof Y.options.onUploadUrlAvailable=="function"&&Y.options.onUploadUrlAvailable(),Y._saveUploadInUrlStorage().then(function(){if(he===fe){Y._emitProgress(fe,fe),Y._emitSuccess();return}Y._offset=he,Y._performUpload()})}).catch(function(le){Y._emitHttpError(re,null,"tus: failed to resume upload",le)})}},{key:"_performUpload",value:function(){var Y=this;if(!this._aborted){var re;this.options.overridePatchMethod?(re=this._openRequest("POST",this.url),re.setHeader("X-HTTP-Method-Override","PATCH")):re=this._openRequest("PATCH",this.url),re.setHeader("Upload-Offset",this._offset);var oe=this._addChunkToRequest(re);oe.then(function(le){if(!inStatusCategory(le.getStatus(),200)){Y._emitHttpError(re,le,"tus: unexpected response while uploading chunk");return}Y._handleUploadResponse(re,le)}).catch(function(le){Y._aborted||Y._emitHttpError(re,null,"tus: failed to upload chunk at offset ".concat(Y._offset),le)})}}},{key:"_addChunkToRequest",value:function(Y){var re=this,oe=this._offset,le=this._offset+this.options.chunkSize;return Y.setProgressHandler(function(ue){re._emitProgress(oe+ue,re._size)}),Y.setHeader("Content-Type","application/offset+octet-stream"),(le===1/0||le>this._size)&&!this.options.uploadLengthDeferred&&(le=this._size),this._source.slice(oe,le).then(function(ue){var he=ue.value,fe=ue.done,ve=he&&he.size?he.size:0;re.options.uploadLengthDeferred&&fe&&(re._size=re._offset+ve,Y.setHeader("Upload-Length",re._size));var $e=re._offset+ve;return!re.options.uploadLengthDeferred&&fe&&$e!==re._size?Promise.reject(new Error("upload was configured with a size of ".concat(re._size," bytes, but the source is done after ").concat($e," bytes"))):he===null?re._sendRequest(Y):(re._emitProgress(re._offset,re._size),re._sendRequest(Y,he))})}},{key:"_handleUploadResponse",value:function(Y,re){var oe=parseInt(re.getHeader("Upload-Offset"),10);if(Number.isNaN(oe)){this._emitHttpError(Y,re,"tus: invalid or missing offset value");return}if(this._emitProgress(oe,this._size),this._emitChunkComplete(oe-this._offset,oe,this._size),this._offset=oe,oe===this._size){this._emitSuccess(),this._source.close();return}this._performUpload()}},{key:"_openRequest",value:function(Y,re){var oe=openRequest(Y,re,this.options);return this._req=oe,oe}},{key:"_removeFromUrlStorage",value:function(){var Y=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch(function(re){Y._emitError(re)}),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var Y=this;if(!this.options.storeFingerprintForResuming||!this._fingerprint||this._urlStorageKey!==null)return Promise.resolve();var re={size:this._size,metadata:this.options.metadata,creationTime:new Date().toString()};return this._parallelUploads?re.parallelUploadUrls=this._parallelUploadUrls:re.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,re).then(function(oe){Y._urlStorageKey=oe})}},{key:"_sendRequest",value:function(Y){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return sendRequest(Y,re,this.options)}}],[{key:"terminate",value:function(Y){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},oe=openRequest("DELETE",Y,re);return sendRequest(oe,null,re).then(function(le){if(le.getStatus()!==204)throw new DetailedError("tus: unexpected response while terminating upload",null,oe,le)}).catch(function(le){if(le instanceof DetailedError||(le=new DetailedError("tus: failed to terminate upload",le,oe,null)),!shouldRetry(le,0,re))throw le;var ue=re.retryDelays[0],he=re.retryDelays.slice(1),fe=_objectSpread$1(_objectSpread$1({},re),{},{retryDelays:he});return new Promise(function(ve){return setTimeout(ve,ue)}).then(function(){return G.terminate(Y,fe)})})}}]),G}();function encodeMetadata(G){return Object.entries(G).map(function(U){var Y=_slicedToArray(U,2),re=Y[0],oe=Y[1];return"".concat(re," ").concat(gBase64.encode(String(oe)))}).join(",")}function inStatusCategory(G,U){return G>=U&&G<U+100}function openRequest(G,U,Y){var re=Y.httpStack.createRequest(G,U);re.setHeader("Tus-Resumable","1.0.0");var oe=Y.headers||{};if(Object.entries(oe).forEach(function(ue){var he=_slicedToArray(ue,2),fe=he[0],ve=he[1];re.setHeader(fe,ve)}),Y.addRequestId){var le=uuid();re.setHeader("X-Request-ID",le)}return re}function sendRequest(G,U,Y){return _sendRequest2.apply(this,arguments)}function _sendRequest2(){return _sendRequest2=_asyncToGenerator$1(_regeneratorRuntime$1().mark(function G(U,Y,re){var oe;return _regeneratorRuntime$1().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(typeof re.onBeforeRequest!="function"){ue.next=3;break}return ue.next=3,re.onBeforeRequest(U);case 3:return ue.next=5,U.send(Y);case 5:if(oe=ue.sent,typeof re.onAfterResponse!="function"){ue.next=9;break}return ue.next=9,re.onAfterResponse(U,oe);case 9:return ue.abrupt("return",oe);case 10:case"end":return ue.stop()}},G)})),_sendRequest2.apply(this,arguments)}function isOnline(){var G=!0;return typeof window<"u"&&"navigator"in window&&window.navigator.onLine===!1&&(G=!1),G}function shouldRetry(G,U,Y){return Y.retryDelays==null||U>=Y.retryDelays.length||G.originalRequest==null?!1:Y&&typeof Y.onShouldRetry=="function"?Y.onShouldRetry(G,U,Y):defaultOnShouldRetry(G)}function defaultOnShouldRetry(G){var U=G.originalResponse?G.originalResponse.getStatus():0;return(!inStatusCategory(U,400)||U===409||U===423)&&isOnline()}function resolveUrl(G,U){return new URL$1(U,G).toString()}function splitSizeIntoParts(G,U){for(var Y=Math.floor(G/U),re=[],oe=0;oe<U;oe++)re.push({start:Y*oe,end:Y*(oe+1)});return re[U-1].end=G,re}BaseUpload.defaultOptions=defaultOptions$2;function _typeof$6(G){"@babel/helpers - typeof";return _typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},_typeof$6(G)}function _classCallCheck$6(G,U){if(!(G instanceof U))throw new TypeError("Cannot call a class as a function")}function _defineProperties$6(G,U){for(var Y=0;Y<U.length;Y++){var re=U[Y];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(G,_toPropertyKey$6(re.key),re)}}function _createClass$6(G,U,Y){return U&&_defineProperties$6(G.prototype,U),Y&&_defineProperties$6(G,Y),Object.defineProperty(G,"prototype",{writable:!1}),G}function _toPropertyKey$6(G){var U=_toPrimitive$6(G,"string");return _typeof$6(U)==="symbol"?U:String(U)}function _toPrimitive$6(G,U){if(_typeof$6(G)!=="object"||G===null)return G;var Y=G[Symbol.toPrimitive];if(Y!==void 0){var re=Y.call(G,U||"default");if(_typeof$6(re)!=="object")return re;throw new TypeError("@@toPrimitive must return a primitive value.")}return(U==="string"?String:Number)(G)}var NoopUrlStorage=function(){function G(){_classCallCheck$6(this,G)}return _createClass$6(G,[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(Y){return Promise.resolve([])}},{key:"removeUpload",value:function(Y){return Promise.resolve()}},{key:"addUpload",value:function(Y,re){return Promise.resolve(null)}}]),G}();function _typeof$5(G){"@babel/helpers - typeof";return _typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},_typeof$5(G)}function _classCallCheck$5(G,U){if(!(G instanceof U))throw new TypeError("Cannot call a class as a function")}function _defineProperties$5(G,U){for(var Y=0;Y<U.length;Y++){var re=U[Y];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(G,_toPropertyKey$5(re.key),re)}}function _createClass$5(G,U,Y){return U&&_defineProperties$5(G.prototype,U),Y&&_defineProperties$5(G,Y),Object.defineProperty(G,"prototype",{writable:!1}),G}function _toPropertyKey$5(G){var U=_toPrimitive$5(G,"string");return _typeof$5(U)==="symbol"?U:String(U)}function _toPrimitive$5(G,U){if(_typeof$5(G)!=="object"||G===null)return G;var Y=G[Symbol.toPrimitive];if(Y!==void 0){var re=Y.call(G,U||"default");if(_typeof$5(re)!=="object")return re;throw new TypeError("@@toPrimitive must return a primitive value.")}return(U==="string"?String:Number)(G)}var hasStorage=!1;try{hasStorage="localStorage"in window;var key="tusSupport",originalValue=localStorage.getItem(key);localStorage.setItem(key,originalValue),originalValue===null&&localStorage.removeItem(key)}catch(G){if(G.code===G.SECURITY_ERR||G.code===G.QUOTA_EXCEEDED_ERR)hasStorage=!1;else throw G}var canStoreURLs=hasStorage,WebStorageUrlStorage=function(){function G(){_classCallCheck$5(this,G)}return _createClass$5(G,[{key:"findAllUploads",value:function(){var Y=this._findEntries("tus::");return Promise.resolve(Y)}},{key:"findUploadsByFingerprint",value:function(Y){var re=this._findEntries("tus::".concat(Y,"::"));return Promise.resolve(re)}},{key:"removeUpload",value:function(Y){return localStorage.removeItem(Y),Promise.resolve()}},{key:"addUpload",value:function(Y,re){var oe=Math.round(Math.random()*1e12),le="tus::".concat(Y,"::").concat(oe);return localStorage.setItem(le,JSON.stringify(re)),Promise.resolve(le)}},{key:"_findEntries",value:function(Y){for(var re=[],oe=0;oe<localStorage.length;oe++){var le=localStorage.key(oe);if(le.indexOf(Y)===0)try{var ue=JSON.parse(localStorage.getItem(le));ue.urlStorageKey=le,re.push(ue)}catch{}}return re}}]),G}();function _typeof$4(G){"@babel/helpers - typeof";return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},_typeof$4(G)}function _classCallCheck$4(G,U){if(!(G instanceof U))throw new TypeError("Cannot call a class as a function")}function _defineProperties$4(G,U){for(var Y=0;Y<U.length;Y++){var re=U[Y];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(G,_toPropertyKey$4(re.key),re)}}function _createClass$4(G,U,Y){return U&&_defineProperties$4(G.prototype,U),Y&&_defineProperties$4(G,Y),Object.defineProperty(G,"prototype",{writable:!1}),G}function _toPropertyKey$4(G){var U=_toPrimitive$4(G,"string");return _typeof$4(U)==="symbol"?U:String(U)}function _toPrimitive$4(G,U){if(_typeof$4(G)!=="object"||G===null)return G;var Y=G[Symbol.toPrimitive];if(Y!==void 0){var re=Y.call(G,U||"default");if(_typeof$4(re)!=="object")return re;throw new TypeError("@@toPrimitive must return a primitive value.")}return(U==="string"?String:Number)(G)}var XHRHttpStack=function(){function G(){_classCallCheck$4(this,G)}return _createClass$4(G,[{key:"createRequest",value:function(Y,re){return new Request$1(Y,re)}},{key:"getName",value:function(){return"XHRHttpStack"}}]),G}(),Request$1=function(){function G(U,Y){_classCallCheck$4(this,G),this._xhr=new XMLHttpRequest,this._xhr.open(U,Y,!0),this._method=U,this._url=Y,this._headers={}}return _createClass$4(G,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(Y,re){this._xhr.setRequestHeader(Y,re),this._headers[Y]=re}},{key:"getHeader",value:function(Y){return this._headers[Y]}},{key:"setProgressHandler",value:function(Y){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(re){re.lengthComputable&&Y(re.loaded)})}},{key:"send",value:function(){var Y=this,re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return new Promise(function(oe,le){Y._xhr.onload=function(){oe(new Response$1(Y._xhr))},Y._xhr.onerror=function(ue){le(ue)},Y._xhr.send(re)})}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),G}(),Response$1=function(){function G(U){_classCallCheck$4(this,G),this._xhr=U}return _createClass$4(G,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(Y){return this._xhr.getResponseHeader(Y)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),G}(),isReactNative$1=function(){return typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative"};function uriToBlob(G){return new Promise(function(U,Y){var re=new XMLHttpRequest;re.responseType="blob",re.onload=function(){var oe=re.response;U(oe)},re.onerror=function(oe){Y(oe)},re.open("GET",G),re.send()})}var isCordova$1=function(){return typeof window<"u"&&(typeof window.PhoneGap<"u"||typeof window.Cordova<"u"||typeof window.cordova<"u")};function readAsByteArray(G){return new Promise(function(U,Y){var re=new FileReader;re.onload=function(){var oe=new Uint8Array(re.result);U({value:oe})},re.onerror=function(oe){Y(oe)},re.readAsArrayBuffer(G)})}function _typeof$3(G){"@babel/helpers - typeof";return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},_typeof$3(G)}function _classCallCheck$3(G,U){if(!(G instanceof U))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(G,U){for(var Y=0;Y<U.length;Y++){var re=U[Y];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(G,_toPropertyKey$3(re.key),re)}}function _createClass$3(G,U,Y){return U&&_defineProperties$3(G.prototype,U),Y&&_defineProperties$3(G,Y),Object.defineProperty(G,"prototype",{writable:!1}),G}function _toPropertyKey$3(G){var U=_toPrimitive$3(G,"string");return _typeof$3(U)==="symbol"?U:String(U)}function _toPrimitive$3(G,U){if(_typeof$3(G)!=="object"||G===null)return G;var Y=G[Symbol.toPrimitive];if(Y!==void 0){var re=Y.call(G,U||"default");if(_typeof$3(re)!=="object")return re;throw new TypeError("@@toPrimitive must return a primitive value.")}return(U==="string"?String:Number)(G)}var FileSource=function(){function G(U){_classCallCheck$3(this,G),this._file=U,this.size=U.size}return _createClass$3(G,[{key:"slice",value:function(Y,re){if(isCordova$1())return readAsByteArray(this._file.slice(Y,re));var oe=this._file.slice(Y,re),le=re>=this.size;return Promise.resolve({value:oe,done:le})}},{key:"close",value:function(){}}]),G}();function _typeof$2(G){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},_typeof$2(G)}function _classCallCheck$2(G,U){if(!(G instanceof U))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(G,U){for(var Y=0;Y<U.length;Y++){var re=U[Y];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(G,_toPropertyKey$2(re.key),re)}}function _createClass$2(G,U,Y){return U&&_defineProperties$2(G.prototype,U),Y&&_defineProperties$2(G,Y),Object.defineProperty(G,"prototype",{writable:!1}),G}function _toPropertyKey$2(G){var U=_toPrimitive$2(G,"string");return _typeof$2(U)==="symbol"?U:String(U)}function _toPrimitive$2(G,U){if(_typeof$2(G)!=="object"||G===null)return G;var Y=G[Symbol.toPrimitive];if(Y!==void 0){var re=Y.call(G,U||"default");if(_typeof$2(re)!=="object")return re;throw new TypeError("@@toPrimitive must return a primitive value.")}return(U==="string"?String:Number)(G)}function len(G){return G===void 0?0:G.size!==void 0?G.size:G.length}function concat(G,U){if(G.concat)return G.concat(U);if(G instanceof Blob)return new Blob([G,U],{type:G.type});if(G.set){var Y=new G.constructor(G.length+U.length);return Y.set(G),Y.set(U,G.length),Y}throw new Error("Unknown data type")}var StreamSource=function(){function G(U){_classCallCheck$2(this,G),this._buffer=void 0,this._bufferOffset=0,this._reader=U,this._done=!1}return _createClass$2(G,[{key:"slice",value:function(Y,re){return Y<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(Y,re)}},{key:"_readUntilEnoughDataOrDone",value:function(Y,re){var oe=this,le=re<=this._bufferOffset+len(this._buffer);if(this._done||le){var ue=this._getDataFromBuffer(Y,re),he=ue==null?this._done:!1;return Promise.resolve({value:ue,done:he})}return this._reader.read().then(function(fe){var ve=fe.value,$e=fe.done;return $e?oe._done=!0:oe._buffer===void 0?oe._buffer=ve:oe._buffer=concat(oe._buffer,ve),oe._readUntilEnoughDataOrDone(Y,re)})}},{key:"_getDataFromBuffer",value:function(Y,re){Y>this._bufferOffset&&(this._buffer=this._buffer.slice(Y-this._bufferOffset),this._bufferOffset=Y);var oe=len(this._buffer)===0;return this._done&&oe?null:this._buffer.slice(0,re-Y)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}]),G}();function _typeof$1(G){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},_typeof$1(G)}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return U};var G,U={},Y=Object.prototype,re=Y.hasOwnProperty,oe=Object.defineProperty||function(Ce,Pe,xe){Ce[Pe]=xe.value},le=typeof Symbol=="function"?Symbol:{},ue=le.iterator||"@@iterator",he=le.asyncIterator||"@@asyncIterator",fe=le.toStringTag||"@@toStringTag";function ve(Ce,Pe,xe){return Object.defineProperty(Ce,Pe,{value:xe,enumerable:!0,configurable:!0,writable:!0}),Ce[Pe]}try{ve({},"")}catch{ve=function(xe,Be,Ie){return xe[Be]=Ie}}function $e(Ce,Pe,xe,Be){var Ie=Pe&&Pe.prototype instanceof Re?Pe:Re,Ne=Object.create(Ie.prototype),qe=new Ze(Be||[]);return oe(Ne,"_invoke",{value:Qe(Ce,xe,qe)}),Ne}function _e(Ce,Pe,xe){try{return{type:"normal",arg:Ce.call(Pe,xe)}}catch(Be){return{type:"throw",arg:Be}}}U.wrap=$e;var Fe="suspendedStart",Ee="suspendedYield",Se="executing",Ae="completed",Te={};function Re(){}function Ue(){}function Le(){}var Me={};ve(Me,ue,function(){return this});var De=Object.getPrototypeOf,je=De&&De(De(Ye([])));je&&je!==Y&&re.call(je,ue)&&(Me=je);var He=Le.prototype=Re.prototype=Object.create(Me);function Ve(Ce){["next","throw","return"].forEach(function(Pe){ve(Ce,Pe,function(xe){return this._invoke(Pe,xe)})})}function ze(Ce,Pe){function xe(Ie,Ne,qe,Ke){var We=_e(Ce[Ie],Ce,Ne);if(We.type!=="throw"){var Je=We.arg,Xe=Je.value;return Xe&&_typeof$1(Xe)=="object"&&re.call(Xe,"__await")?Pe.resolve(Xe.__await).then(function(Ge){xe("next",Ge,qe,Ke)},function(Ge){xe("throw",Ge,qe,Ke)}):Pe.resolve(Xe).then(function(Ge){Je.value=Ge,qe(Je)},function(Ge){return xe("throw",Ge,qe,Ke)})}Ke(We.arg)}var Be;oe(this,"_invoke",{value:function(Ne,qe){function Ke(){return new Pe(function(We,Je){xe(Ne,qe,We,Je)})}return Be=Be?Be.then(Ke,Ke):Ke()}})}function Qe(Ce,Pe,xe){var Be=Fe;return function(Ie,Ne){if(Be===Se)throw new Error("Generator is already running");if(Be===Ae){if(Ie==="throw")throw Ne;return{value:G,done:!0}}for(xe.method=Ie,xe.arg=Ne;;){var qe=xe.delegate;if(qe){var Ke=tt(qe,xe);if(Ke){if(Ke===Te)continue;return Ke}}if(xe.method==="next")xe.sent=xe._sent=xe.arg;else if(xe.method==="throw"){if(Be===Fe)throw Be=Ae,xe.arg;xe.dispatchException(xe.arg)}else xe.method==="return"&&xe.abrupt("return",xe.arg);Be=Se;var We=_e(Ce,Pe,xe);if(We.type==="normal"){if(Be=xe.done?Ae:Ee,We.arg===Te)continue;return{value:We.arg,done:xe.done}}We.type==="throw"&&(Be=Ae,xe.method="throw",xe.arg=We.arg)}}}function tt(Ce,Pe){var xe=Pe.method,Be=Ce.iterator[xe];if(Be===G)return Pe.delegate=null,xe==="throw"&&Ce.iterator.return&&(Pe.method="return",Pe.arg=G,tt(Ce,Pe),Pe.method==="throw")||xe!=="return"&&(Pe.method="throw",Pe.arg=new TypeError("The iterator does not provide a '"+xe+"' method")),Te;var Ie=_e(Be,Ce.iterator,Pe.arg);if(Ie.type==="throw")return Pe.method="throw",Pe.arg=Ie.arg,Pe.delegate=null,Te;var Ne=Ie.arg;return Ne?Ne.done?(Pe[Ce.resultName]=Ne.value,Pe.next=Ce.nextLoc,Pe.method!=="return"&&(Pe.method="next",Pe.arg=G),Pe.delegate=null,Te):Ne:(Pe.method="throw",Pe.arg=new TypeError("iterator result is not an object"),Pe.delegate=null,Te)}function rt(Ce){var Pe={tryLoc:Ce[0]};1 in Ce&&(Pe.catchLoc=Ce[1]),2 in Ce&&(Pe.finallyLoc=Ce[2],Pe.afterLoc=Ce[3]),this.tryEntries.push(Pe)}function et(Ce){var Pe=Ce.completion||{};Pe.type="normal",delete Pe.arg,Ce.completion=Pe}function Ze(Ce){this.tryEntries=[{tryLoc:"root"}],Ce.forEach(rt,this),this.reset(!0)}function Ye(Ce){if(Ce||Ce===""){var Pe=Ce[ue];if(Pe)return Pe.call(Ce);if(typeof Ce.next=="function")return Ce;if(!isNaN(Ce.length)){var xe=-1,Be=function Ie(){for(;++xe<Ce.length;)if(re.call(Ce,xe))return Ie.value=Ce[xe],Ie.done=!1,Ie;return Ie.value=G,Ie.done=!0,Ie};return Be.next=Be}}throw new TypeError(_typeof$1(Ce)+" is not iterable")}return Ue.prototype=Le,oe(He,"constructor",{value:Le,configurable:!0}),oe(Le,"constructor",{value:Ue,configurable:!0}),Ue.displayName=ve(Le,fe,"GeneratorFunction"),U.isGeneratorFunction=function(Ce){var Pe=typeof Ce=="function"&&Ce.constructor;return!!Pe&&(Pe===Ue||(Pe.displayName||Pe.name)==="GeneratorFunction")},U.mark=function(Ce){return Object.setPrototypeOf?Object.setPrototypeOf(Ce,Le):(Ce.__proto__=Le,ve(Ce,fe,"GeneratorFunction")),Ce.prototype=Object.create(He),Ce},U.awrap=function(Ce){return{__await:Ce}},Ve(ze.prototype),ve(ze.prototype,he,function(){return this}),U.AsyncIterator=ze,U.async=function(Ce,Pe,xe,Be,Ie){Ie===void 0&&(Ie=Promise);var Ne=new ze($e(Ce,Pe,xe,Be),Ie);return U.isGeneratorFunction(Pe)?Ne:Ne.next().then(function(qe){return qe.done?qe.value:Ne.next()})},Ve(He),ve(He,fe,"Generator"),ve(He,ue,function(){return this}),ve(He,"toString",function(){return"[object Generator]"}),U.keys=function(Ce){var Pe=Object(Ce),xe=[];for(var Be in Pe)xe.push(Be);return xe.reverse(),function Ie(){for(;xe.length;){var Ne=xe.pop();if(Ne in Pe)return Ie.value=Ne,Ie.done=!1,Ie}return Ie.done=!0,Ie}},U.values=Ye,Ze.prototype={constructor:Ze,reset:function(Pe){if(this.prev=0,this.next=0,this.sent=this._sent=G,this.done=!1,this.delegate=null,this.method="next",this.arg=G,this.tryEntries.forEach(et),!Pe)for(var xe in this)xe.charAt(0)==="t"&&re.call(this,xe)&&!isNaN(+xe.slice(1))&&(this[xe]=G)},stop:function(){this.done=!0;var Pe=this.tryEntries[0].completion;if(Pe.type==="throw")throw Pe.arg;return this.rval},dispatchException:function(Pe){if(this.done)throw Pe;var xe=this;function Be(Je,Xe){return qe.type="throw",qe.arg=Pe,xe.next=Je,Xe&&(xe.method="next",xe.arg=G),!!Xe}for(var Ie=this.tryEntries.length-1;Ie>=0;--Ie){var Ne=this.tryEntries[Ie],qe=Ne.completion;if(Ne.tryLoc==="root")return Be("end");if(Ne.tryLoc<=this.prev){var Ke=re.call(Ne,"catchLoc"),We=re.call(Ne,"finallyLoc");if(Ke&&We){if(this.prev<Ne.catchLoc)return Be(Ne.catchLoc,!0);if(this.prev<Ne.finallyLoc)return Be(Ne.finallyLoc)}else if(Ke){if(this.prev<Ne.catchLoc)return Be(Ne.catchLoc,!0)}else{if(!We)throw new Error("try statement without catch or finally");if(this.prev<Ne.finallyLoc)return Be(Ne.finallyLoc)}}}},abrupt:function(Pe,xe){for(var Be=this.tryEntries.length-1;Be>=0;--Be){var Ie=this.tryEntries[Be];if(Ie.tryLoc<=this.prev&&re.call(Ie,"finallyLoc")&&this.prev<Ie.finallyLoc){var Ne=Ie;break}}Ne&&(Pe==="break"||Pe==="continue")&&Ne.tryLoc<=xe&&xe<=Ne.finallyLoc&&(Ne=null);var qe=Ne?Ne.completion:{};return qe.type=Pe,qe.arg=xe,Ne?(this.method="next",this.next=Ne.finallyLoc,Te):this.complete(qe)},complete:function(Pe,xe){if(Pe.type==="throw")throw Pe.arg;return Pe.type==="break"||Pe.type==="continue"?this.next=Pe.arg:Pe.type==="return"?(this.rval=this.arg=Pe.arg,this.method="return",this.next="end"):Pe.type==="normal"&&xe&&(this.next=xe),Te},finish:function(Pe){for(var xe=this.tryEntries.length-1;xe>=0;--xe){var Be=this.tryEntries[xe];if(Be.finallyLoc===Pe)return this.complete(Be.completion,Be.afterLoc),et(Be),Te}},catch:function(Pe){for(var xe=this.tryEntries.length-1;xe>=0;--xe){var Be=this.tryEntries[xe];if(Be.tryLoc===Pe){var Ie=Be.completion;if(Ie.type==="throw"){var Ne=Ie.arg;et(Be)}return Ne}}throw new Error("illegal catch attempt")},delegateYield:function(Pe,xe,Be){return this.delegate={iterator:Ye(Pe),resultName:xe,nextLoc:Be},this.method==="next"&&(this.arg=G),Te}},U}function asyncGeneratorStep(G,U,Y,re,oe,le,ue){try{var he=G[le](ue),fe=he.value}catch(ve){Y(ve);return}he.done?U(fe):Promise.resolve(fe).then(re,oe)}function _asyncToGenerator(G){return function(){var U=this,Y=arguments;return new Promise(function(re,oe){var le=G.apply(U,Y);function ue(fe){asyncGeneratorStep(le,re,oe,ue,he,"next",fe)}function he(fe){asyncGeneratorStep(le,re,oe,ue,he,"throw",fe)}ue(void 0)})}}function _classCallCheck$1(G,U){if(!(G instanceof U))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(G,U){for(var Y=0;Y<U.length;Y++){var re=U[Y];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(G,_toPropertyKey$1(re.key),re)}}function _createClass$1(G,U,Y){return U&&_defineProperties$1(G.prototype,U),Y&&_defineProperties$1(G,Y),Object.defineProperty(G,"prototype",{writable:!1}),G}function _toPropertyKey$1(G){var U=_toPrimitive$1(G,"string");return _typeof$1(U)==="symbol"?U:String(U)}function _toPrimitive$1(G,U){if(_typeof$1(G)!=="object"||G===null)return G;var Y=G[Symbol.toPrimitive];if(Y!==void 0){var re=Y.call(G,U||"default");if(_typeof$1(re)!=="object")return re;throw new TypeError("@@toPrimitive must return a primitive value.")}return(U==="string"?String:Number)(G)}var FileReader$1=function(){function G(){_classCallCheck$1(this,G)}return _createClass$1(G,[{key:"openFile",value:function(){var U=_asyncToGenerator(_regeneratorRuntime().mark(function re(oe,le){var ue;return _regeneratorRuntime().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(!(isReactNative$1()&&oe&&typeof oe.uri<"u")){fe.next=11;break}return fe.prev=1,fe.next=4,uriToBlob(oe.uri);case 4:return ue=fe.sent,fe.abrupt("return",new FileSource(ue));case 8:throw fe.prev=8,fe.t0=fe.catch(1),new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(fe.t0));case 11:if(!(typeof oe.slice=="function"&&typeof oe.size<"u")){fe.next=13;break}return fe.abrupt("return",Promise.resolve(new FileSource(oe)));case 13:if(typeof oe.read!="function"){fe.next=18;break}if(le=Number(le),Number.isFinite(le)){fe.next=17;break}return fe.abrupt("return",Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option")));case 17:return fe.abrupt("return",Promise.resolve(new StreamSource(oe,le)));case 18:return fe.abrupt("return",Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment")));case 19:case"end":return fe.stop()}},re,null,[[1,8]])}));function Y(re,oe){return U.apply(this,arguments)}return Y}()}]),G}();function fingerprint(G,U){return isReactNative$1()?Promise.resolve(reactNativeFingerprint(G,U)):Promise.resolve(["tus-br",G.name,G.type,G.size,G.lastModified,U.endpoint].join("-"))}function reactNativeFingerprint(G,U){var Y=G.exif?hashCode(JSON.stringify(G.exif)):"noexif";return["tus-rn",G.name||"noname",G.size||"nosize",Y,U.endpoint].join("/")}function hashCode(G){var U=0;if(G.length===0)return U;for(var Y=0;Y<G.length;Y++){var re=G.charCodeAt(Y);U=(U<<5)-U+re,U&=U}return U}function _typeof(G){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},_typeof(G)}function _classCallCheck(G,U){if(!(G instanceof U))throw new TypeError("Cannot call a class as a function")}function _defineProperties(G,U){for(var Y=0;Y<U.length;Y++){var re=U[Y];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(G,_toPropertyKey(re.key),re)}}function _createClass(G,U,Y){return U&&_defineProperties(G.prototype,U),Y&&_defineProperties(G,Y),Object.defineProperty(G,"prototype",{writable:!1}),G}function _inherits(G,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function");G.prototype=Object.create(U&&U.prototype,{constructor:{value:G,writable:!0,configurable:!0}}),Object.defineProperty(G,"prototype",{writable:!1}),U&&_setPrototypeOf(G,U)}function _setPrototypeOf(G,U){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(re,oe){return re.__proto__=oe,re},_setPrototypeOf(G,U)}function _createSuper(G){var U=_isNativeReflectConstruct();return function(){var re=_getPrototypeOf(G),oe;if(U){var le=_getPrototypeOf(this).constructor;oe=Reflect.construct(re,arguments,le)}else oe=re.apply(this,arguments);return _possibleConstructorReturn(this,oe)}}function _possibleConstructorReturn(G,U){if(U&&(_typeof(U)==="object"||typeof U=="function"))return U;if(U!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(G)}function _assertThisInitialized(G){if(G===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf(G){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Y){return Y.__proto__||Object.getPrototypeOf(Y)},_getPrototypeOf(G)}function ownKeys(G,U){var Y=Object.keys(G);if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(G);U&&(re=re.filter(function(oe){return Object.getOwnPropertyDescriptor(G,oe).enumerable})),Y.push.apply(Y,re)}return Y}function _objectSpread(G){for(var U=1;U<arguments.length;U++){var Y=arguments[U]!=null?arguments[U]:{};U%2?ownKeys(Object(Y),!0).forEach(function(re){_defineProperty(G,re,Y[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(Y)):ownKeys(Object(Y)).forEach(function(re){Object.defineProperty(G,re,Object.getOwnPropertyDescriptor(Y,re))})}return G}function _defineProperty(G,U,Y){return U=_toPropertyKey(U),U in G?Object.defineProperty(G,U,{value:Y,enumerable:!0,configurable:!0,writable:!0}):G[U]=Y,G}function _toPropertyKey(G){var U=_toPrimitive(G,"string");return _typeof(U)==="symbol"?U:String(U)}function _toPrimitive(G,U){if(_typeof(G)!=="object"||G===null)return G;var Y=G[Symbol.toPrimitive];if(Y!==void 0){var re=Y.call(G,U||"default");if(_typeof(re)!=="object")return re;throw new TypeError("@@toPrimitive must return a primitive value.")}return(U==="string"?String:Number)(G)}var defaultOptions$1=_objectSpread(_objectSpread({},BaseUpload.defaultOptions),{},{httpStack:new XHRHttpStack,fileReader:new FileReader$1,urlStorage:canStoreURLs?new WebStorageUrlStorage:new NoopUrlStorage,fingerprint}),Upload=function(G){_inherits(Y,G);var U=_createSuper(Y);function Y(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return _classCallCheck(this,Y),oe=_objectSpread(_objectSpread({},defaultOptions$1),oe),U.call(this,re,oe)}return _createClass(Y,null,[{key:"terminate",value:function(oe){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return le=_objectSpread(_objectSpread({},defaultOptions$1),le),BaseUpload.terminate(oe,le)}}]),Y}(BaseUpload);function _classPrivateFieldLooseBase$2(G,U){if(!Object.prototype.hasOwnProperty.call(G,U))throw new TypeError("attempted to use private field on non-instance");return G}var id$2=0;function _classPrivateFieldLooseKey$2(G){return"__private_"+id$2+++"_"+G}var _uppy=_classPrivateFieldLooseKey$2("uppy"),_events=_classPrivateFieldLooseKey$2("events");class EventManager{constructor(U){Object.defineProperty(this,_uppy,{writable:!0,value:void 0}),Object.defineProperty(this,_events,{writable:!0,value:[]}),_classPrivateFieldLooseBase$2(this,_uppy)[_uppy]=U}on(U,Y){return _classPrivateFieldLooseBase$2(this,_events)[_events].push([U,Y]),_classPrivateFieldLooseBase$2(this,_uppy)[_uppy].on(U,Y)}remove(){for(const[U,Y]of _classPrivateFieldLooseBase$2(this,_events)[_events].splice(0))_classPrivateFieldLooseBase$2(this,_uppy)[_uppy].off(U,Y)}onFilePause(U,Y){this.on("upload-pause",(re,oe)=>{U===re&&Y(oe)})}onFileRemove(U,Y){this.on("file-removed",re=>{U===re.id&&Y(re.id)})}onPause(U,Y){this.on("upload-pause",(re,oe)=>{U===re&&Y(oe)})}onRetry(U,Y){this.on("upload-retry",re=>{U===re&&Y()})}onRetryAll(U,Y){this.on("retry-all",()=>{_classPrivateFieldLooseBase$2(this,_uppy)[_uppy].getFile(U)&&Y()})}onPauseAll(U,Y){this.on("pause-all",()=>{_classPrivateFieldLooseBase$2(this,_uppy)[_uppy].getFile(U)&&Y()})}onCancelAll(U,Y){var re=this;this.on("cancel-all",function(){_classPrivateFieldLooseBase$2(re,_uppy)[_uppy].getFile(U)&&Y(...arguments)})}onResumeAll(U,Y){this.on("resume-all",()=>{_classPrivateFieldLooseBase$2(this,_uppy)[_uppy].getFile(U)&&Y()})}}class NetworkError extends Error{constructor(U,Y){Y===void 0&&(Y=null),super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall."),this.cause=U,this.isNetworkError=!0,this.request=Y}}function isNetworkError(G){return G?G.readyState!==0&&G.readyState!==4||G.status===0:!1}function _classPrivateFieldLooseBase$1(G,U){if(!Object.prototype.hasOwnProperty.call(G,U))throw new TypeError("attempted to use private field on non-instance");return G}var id$1=0;function _classPrivateFieldLooseKey$1(G){return"__private_"+id$1+++"_"+G}function createCancelError(G){return new Error("Cancelled",{cause:G})}function abortOn(G){if(G!=null){var U;const Y=()=>this.abort(G.reason);G.addEventListener("abort",Y,{once:!0});const re=()=>{G.removeEventListener("abort",Y)};(U=this.then)==null||U.call(this,re,re)}return this}var _activeRequests=_classPrivateFieldLooseKey$1("activeRequests"),_queuedHandlers=_classPrivateFieldLooseKey$1("queuedHandlers"),_paused=_classPrivateFieldLooseKey$1("paused"),_pauseTimer=_classPrivateFieldLooseKey$1("pauseTimer"),_downLimit=_classPrivateFieldLooseKey$1("downLimit"),_upperLimit=_classPrivateFieldLooseKey$1("upperLimit"),_rateLimitingTimer=_classPrivateFieldLooseKey$1("rateLimitingTimer"),_call=_classPrivateFieldLooseKey$1("call"),_queueNext=_classPrivateFieldLooseKey$1("queueNext"),_next=_classPrivateFieldLooseKey$1("next"),_queue=_classPrivateFieldLooseKey$1("queue"),_dequeue=_classPrivateFieldLooseKey$1("dequeue"),_resume=_classPrivateFieldLooseKey$1("resume"),_increaseLimit=_classPrivateFieldLooseKey$1("increaseLimit");class RateLimitedQueue{constructor(U){Object.defineProperty(this,_dequeue,{value:_dequeue2}),Object.defineProperty(this,_queue,{value:_queue2}),Object.defineProperty(this,_next,{value:_next2}),Object.defineProperty(this,_queueNext,{value:_queueNext2}),Object.defineProperty(this,_call,{value:_call2}),Object.defineProperty(this,_activeRequests,{writable:!0,value:0}),Object.defineProperty(this,_queuedHandlers,{writable:!0,value:[]}),Object.defineProperty(this,_paused,{writable:!0,value:!1}),Object.defineProperty(this,_pauseTimer,{writable:!0,value:void 0}),Object.defineProperty(this,_downLimit,{writable:!0,value:1}),Object.defineProperty(this,_upperLimit,{writable:!0,value:void 0}),Object.defineProperty(this,_rateLimitingTimer,{writable:!0,value:void 0}),Object.defineProperty(this,_resume,{writable:!0,value:()=>this.resume()}),Object.defineProperty(this,_increaseLimit,{writable:!0,value:()=>{if(_classPrivateFieldLooseBase$1(this,_paused)[_paused]){_classPrivateFieldLooseBase$1(this,_rateLimitingTimer)[_rateLimitingTimer]=setTimeout(_classPrivateFieldLooseBase$1(this,_increaseLimit)[_increaseLimit],0);return}_classPrivateFieldLooseBase$1(this,_downLimit)[_downLimit]=this.limit,this.limit=Math.ceil((_classPrivateFieldLooseBase$1(this,_upperLimit)[_upperLimit]+_classPrivateFieldLooseBase$1(this,_downLimit)[_downLimit])/2);for(let Y=_classPrivateFieldLooseBase$1(this,_downLimit)[_downLimit];Y<=this.limit;Y++)_classPrivateFieldLooseBase$1(this,_queueNext)[_queueNext]();_classPrivateFieldLooseBase$1(this,_upperLimit)[_upperLimit]-_classPrivateFieldLooseBase$1(this,_downLimit)[_downLimit]>3?_classPrivateFieldLooseBase$1(this,_rateLimitingTimer)[_rateLimitingTimer]=setTimeout(_classPrivateFieldLooseBase$1(this,_increaseLimit)[_increaseLimit],2e3):_classPrivateFieldLooseBase$1(this,_downLimit)[_downLimit]=Math.floor(_classPrivateFieldLooseBase$1(this,_downLimit)[_downLimit]/2)}}),typeof U!="number"||U===0?this.limit=1/0:this.limit=U}run(U,Y){return!_classPrivateFieldLooseBase$1(this,_paused)[_paused]&&_classPrivateFieldLooseBase$1(this,_activeRequests)[_activeRequests]<this.limit?_classPrivateFieldLooseBase$1(this,_call)[_call](U):_classPrivateFieldLooseBase$1(this,_queue)[_queue](U,Y)}wrapSyncFunction(U,Y){var re=this;return function(){for(var oe=arguments.length,le=new Array(oe),ue=0;ue<oe;ue++)le[ue]=arguments[ue];const he=re.run(()=>(U(...le),queueMicrotask(()=>he.done()),()=>{}),Y);return{abortOn,abort(){he.abort()}}}}wrapPromiseFunction(U,Y){var re=this;return function(){for(var oe=arguments.length,le=new Array(oe),ue=0;ue<oe;ue++)le[ue]=arguments[ue];let he;const fe=new Promise((ve,$e)=>{he=re.run(()=>{let _e,Fe;try{Fe=Promise.resolve(U(...le))}catch(Ee){Fe=Promise.reject(Ee)}return Fe.then(Ee=>{_e?$e(_e):(he.done(),ve(Ee))},Ee=>{_e?$e(_e):(he.done(),$e(Ee))}),Ee=>{_e=createCancelError(Ee)}},Y)});return fe.abort=ve=>{he.abort(ve)},fe.abortOn=abortOn,fe}}resume(){_classPrivateFieldLooseBase$1(this,_paused)[_paused]=!1,clearTimeout(_classPrivateFieldLooseBase$1(this,_pauseTimer)[_pauseTimer]);for(let U=0;U<this.limit;U++)_classPrivateFieldLooseBase$1(this,_queueNext)[_queueNext]()}pause(U){U===void 0&&(U=null),_classPrivateFieldLooseBase$1(this,_paused)[_paused]=!0,clearTimeout(_classPrivateFieldLooseBase$1(this,_pauseTimer)[_pauseTimer]),U!=null&&(_classPrivateFieldLooseBase$1(this,_pauseTimer)[_pauseTimer]=setTimeout(_classPrivateFieldLooseBase$1(this,_resume)[_resume],U))}rateLimit(U){clearTimeout(_classPrivateFieldLooseBase$1(this,_rateLimitingTimer)[_rateLimitingTimer]),this.pause(U),this.limit>1&&Number.isFinite(this.limit)&&(_classPrivateFieldLooseBase$1(this,_upperLimit)[_upperLimit]=this.limit-1,this.limit=_classPrivateFieldLooseBase$1(this,_downLimit)[_downLimit],_classPrivateFieldLooseBase$1(this,_rateLimitingTimer)[_rateLimitingTimer]=setTimeout(_classPrivateFieldLooseBase$1(this,_increaseLimit)[_increaseLimit],U))}get isPaused(){return _classPrivateFieldLooseBase$1(this,_paused)[_paused]}}function _call2(G){_classPrivateFieldLooseBase$1(this,_activeRequests)[_activeRequests]+=1;let U=!1,Y;try{Y=G()}catch(re){throw _classPrivateFieldLooseBase$1(this,_activeRequests)[_activeRequests]-=1,re}return{abort:re=>{U||(U=!0,_classPrivateFieldLooseBase$1(this,_activeRequests)[_activeRequests]-=1,Y==null||Y(re),_classPrivateFieldLooseBase$1(this,_queueNext)[_queueNext]())},done:()=>{U||(U=!0,_classPrivateFieldLooseBase$1(this,_activeRequests)[_activeRequests]-=1,_classPrivateFieldLooseBase$1(this,_queueNext)[_queueNext]())}}}function _queueNext2(){queueMicrotask(()=>_classPrivateFieldLooseBase$1(this,_next)[_next]())}function _next2(){if(_classPrivateFieldLooseBase$1(this,_paused)[_paused]||_classPrivateFieldLooseBase$1(this,_activeRequests)[_activeRequests]>=this.limit||_classPrivateFieldLooseBase$1(this,_queuedHandlers)[_queuedHandlers].length===0)return;const G=_classPrivateFieldLooseBase$1(this,_queuedHandlers)[_queuedHandlers].shift();if(G==null)throw new Error("Invariant violation: next is null");const U=_classPrivateFieldLooseBase$1(this,_call)[_call](G.fn);G.abort=U.abort,G.done=U.done}function _queue2(G,U){const Y={fn:G,priority:(U==null?void 0:U.priority)||0,abort:()=>{_classPrivateFieldLooseBase$1(this,_dequeue)[_dequeue](Y)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},re=_classPrivateFieldLooseBase$1(this,_queuedHandlers)[_queuedHandlers].findIndex(oe=>Y.priority>oe.priority);return re===-1?_classPrivateFieldLooseBase$1(this,_queuedHandlers)[_queuedHandlers].push(Y):_classPrivateFieldLooseBase$1(this,_queuedHandlers)[_queuedHandlers].splice(re,0,Y),Y}function _dequeue2(G){const U=_classPrivateFieldLooseBase$1(this,_queuedHandlers)[_queuedHandlers].indexOf(G);U!==-1&&_classPrivateFieldLooseBase$1(this,_queuedHandlers)[_queuedHandlers].splice(U,1)}function has(G,U){return Object.prototype.hasOwnProperty.call(G,U)}function filterNonFailedFiles(G){const U=Y=>"error"in Y&&!!Y.error;return G.filter(Y=>!U(Y))}function filterFilesToEmitUploadStarted(G){return G.filter(U=>{var Y;return!((Y=U.progress)!=null&&Y.uploadStarted)||!U.isRestored})}function isCordova(){return typeof window<"u"&&(typeof window.PhoneGap<"u"||typeof window.Cordova<"u"||typeof window.cordova<"u")}function isReactNative(){return typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative"}function getFingerprint(G){return(U,Y)=>{if(isCordova()||isReactNative())return defaultOptions$1.fingerprint(U,Y);const re=["tus",G.id,Y.endpoint].join("-");return Promise.resolve(re)}}function _classPrivateFieldLooseBase(G,U){if(!Object.prototype.hasOwnProperty.call(G,U))throw new TypeError("attempted to use private field on non-instance");return G}var id=0;function _classPrivateFieldLooseKey(G){return"__private_"+id+++"_"+G}const packageJson={version:"3.5.5"},tusDefaultOptions={endpoint:"",uploadUrl:null,metadata:{},uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,overridePatchMethod:!1,headers:{},addRequestId:!1,chunkSize:1/0,retryDelays:[100,1e3,3e3,5e3],parallelUploads:1,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1},defaultOptions={limit:20,retryDelays:tusDefaultOptions.retryDelays,withCredentials:!1};var _retryDelayIterator=_classPrivateFieldLooseKey("retryDelayIterator"),_uploadLocalFile=_classPrivateFieldLooseKey("uploadLocalFile"),_getCompanionClientArgs=_classPrivateFieldLooseKey("getCompanionClientArgs"),_uploadFiles=_classPrivateFieldLooseKey("uploadFiles"),_handleUpload=_classPrivateFieldLooseKey("handleUpload");class Tus extends BasePlugin{constructor(U,Y){var re,oe;if(super(U,{...defaultOptions,...Y}),Object.defineProperty(this,_uploadFiles,{value:_uploadFiles2}),Object.defineProperty(this,_getCompanionClientArgs,{value:_getCompanionClientArgs2}),Object.defineProperty(this,_uploadLocalFile,{value:_uploadLocalFile2}),Object.defineProperty(this,_retryDelayIterator,{writable:!0,value:void 0}),Object.defineProperty(this,_handleUpload,{writable:!0,value:async le=>{if(le.length===0){this.uppy.log("[Tus] No files to upload");return}this.opts.limit===0&&this.uppy.log("[Tus] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/tus/#limit-0","warning"),this.uppy.log("[Tus] Uploading...");const ue=this.uppy.getFilesByIds(le);await _classPrivateFieldLooseBase(this,_uploadFiles)[_uploadFiles](ue)}}),this.type="uploader",this.id=this.opts.id||"Tus",(Y==null?void 0:Y.allowedMetaFields)===void 0&&"metaFields"in this.opts)throw new Error("The `metaFields` option has been renamed to `allowedMetaFields`.");if("autoRetry"in Y)throw new Error("The `autoRetry` option was deprecated and has been removed.");this.requests=(re=this.opts.rateLimitedQueue)!=null?re:new RateLimitedQueue(this.opts.limit),_classPrivateFieldLooseBase(this,_retryDelayIterator)[_retryDelayIterator]=(oe=this.opts.retryDelays)==null?void 0:oe.values(),this.uploaders=Object.create(null),this.uploaderEvents=Object.create(null),this.handleResetProgress=this.handleResetProgress.bind(this)}handleResetProgress(){const U={...this.uppy.getState().files};Object.keys(U).forEach(Y=>{var re;if((re=U[Y])!=null&&(re=re.tus)!=null&&re.uploadUrl){const oe={...U[Y].tus};delete oe.uploadUrl,U[Y]={...U[Y],tus:oe}}}),this.uppy.setState({files:U})}resetUploaderReferences(U,Y){const re=this.uploaders[U];re&&(re.abort(),Y!=null&&Y.abort&&re.abort(!0),this.uploaders[U]=null),this.uploaderEvents[U]&&(this.uploaderEvents[U].remove(),this.uploaderEvents[U]=null)}onReceiveUploadUrl(U,Y){const re=this.uppy.getFile(U.id);re&&(!re.tus||re.tus.uploadUrl!==Y)&&(this.uppy.log("[Tus] Storing upload url"),this.uppy.setFileState(re.id,{tus:{...re.tus,uploadUrl:Y}}))}install(){this.uppy.setState({capabilities:{...this.uppy.getState().capabilities,resumableUploads:!0}}),this.uppy.addUploader(_classPrivateFieldLooseBase(this,_handleUpload)[_handleUpload]),this.uppy.on("reset-progress",this.handleResetProgress)}uninstall(){this.uppy.setState({capabilities:{...this.uppy.getState().capabilities,resumableUploads:!1}}),this.uppy.removeUploader(_classPrivateFieldLooseBase(this,_handleUpload)[_handleUpload])}}function _uploadLocalFile2(G){var U=this;return this.resetUploaderReferences(G.id),new Promise((Y,re)=>{let oe,le,ue;const he={...this.opts,...G.tus||{}};typeof he.headers=="function"&&(he.headers=he.headers(G));const{onShouldRetry:fe,onBeforeRequest:ve,...$e}=he,_e={...tusDefaultOptions,...$e};_e.fingerprint=getFingerprint(G),_e.onBeforeRequest=async Re=>{const Ue=Re.getUnderlyingObject();Ue.withCredentials=!!he.withCredentials;let Le;if(typeof ve=="function"&&(Le=ve(Re,G)),has(oe,"shouldBeRequeued")){if(!oe.shouldBeRequeued)return Promise.reject();let Me;const De=new Promise(je=>{Me=je});oe=this.requests.run(()=>(G.isPaused&&oe.abort(),Me(),()=>{})),await Promise.all([De,Le]);return}return Le},_e.onError=Re=>{var Ue;this.uppy.log(Re);const Le=Re.originalRequest!=null?Re.originalRequest.getUnderlyingObject():null;isNetworkError(Le)&&(Re=new NetworkError(Re,Le)),this.resetUploaderReferences(G.id),(Ue=oe)==null||Ue.abort(),this.uppy.emit("upload-error",G,Re),typeof he.onError=="function"&&he.onError(Re),re(Re)},_e.onProgress=(Re,Ue)=>{this.onReceiveUploadUrl(G,ue.url),typeof he.onProgress=="function"&&he.onProgress(Re,Ue),this.uppy.emit("upload-progress",this.uppy.getFile(G.id),{uploader:this,bytesUploaded:Re,bytesTotal:Ue})},_e.onSuccess=()=>{var Re;const Ue={uploadURL:(Re=ue.url)!=null?Re:void 0,status:200,body:{}};if(this.resetUploaderReferences(G.id),oe.done(),this.uppy.emit("upload-success",this.uppy.getFile(G.id),Ue),ue.url){const{name:Le}=ue.file;this.uppy.log(`Download ${Le} from ${ue.url}`)}typeof he.onSuccess=="function"&&he.onSuccess(),Y(ue)};const Fe=Re=>{var Ue;const Le=Re==null||(Ue=Re.originalResponse)==null?void 0:Ue.getStatus();if(Le===429){if(!this.requests.isPaused){var Me;const De=(Me=_classPrivateFieldLooseBase(this,_retryDelayIterator)[_retryDelayIterator])==null?void 0:Me.next();if(De==null||De.done)return!1;this.requests.rateLimit(De.value)}}else{if(Le!=null&&Le>400&&Le<500&&Le!==409&&Le!==423)return!1;typeof navigator<"u"&&navigator.onLine===!1&&(this.requests.isPaused||(this.requests.pause(),window.addEventListener("online",()=>{this.requests.resume()},{once:!0})))}return oe.abort(),oe={shouldBeRequeued:!0,abort(){this.shouldBeRequeued=!1},done(){throw new Error("Cannot mark a queued request as done: this indicates a bug")},fn(){throw new Error("Cannot run a queued request: this indicates a bug")}},!0};fe!=null?_e.onShouldRetry=(Re,Ue)=>fe(Re,Ue,he,Fe):_e.onShouldRetry=Fe;const Ee=(Re,Ue,Le)=>{has(Re,Ue)&&!has(Re,Le)&&(Re[Le]=Re[Ue])},Se={};(Array.isArray(he.allowedMetaFields)?he.allowedMetaFields:Object.keys(G.meta)).forEach(Re=>{Se[Re]=String(G.meta[Re])}),Ee(Se,"type","filetype"),Ee(Se,"name","filename"),_e.metadata=Se,ue=new Upload(G.data,_e),this.uploaders[G.id]=ue;const Te=new EventManager(this.uppy);this.uploaderEvents[G.id]=Te,le=()=>(G.isPaused||ue.start(),()=>{}),ue.findPreviousUploads().then(Re=>{const Ue=Re[0];Ue&&(this.uppy.log(`[Tus] Resuming upload of ${G.id} started at ${Ue.creationTime}`),ue.resumeFromPreviousUpload(Ue))}),oe=this.requests.run(le),Te.onFileRemove(G.id,Re=>{oe.abort(),this.resetUploaderReferences(G.id,{abort:!!ue.url}),Y(`upload ${Re} was removed`)}),Te.onPause(G.id,Re=>{oe.abort(),Re?ue.abort():oe=this.requests.run(le)}),Te.onPauseAll(G.id,()=>{oe.abort(),ue.abort()}),Te.onCancelAll(G.id,function(Re){let{reason:Ue}=Re===void 0?{}:Re;Ue==="user"&&(oe.abort(),U.resetUploaderReferences(G.id,{abort:!!ue.url})),Y(`upload ${G.id} was canceled`)}),Te.onResumeAll(G.id,()=>{oe.abort(),G.error&&ue.abort(),oe=this.requests.run(le)})}).catch(Y=>{throw this.uppy.emit("upload-error",G,Y),Y})}function _getCompanionClientArgs2(G){var U;const Y={...this.opts};return G.tus&&Object.assign(Y,G.tus),typeof Y.headers=="function"&&(Y.headers=Y.headers(G)),{...(U=G.remote)==null?void 0:U.body,endpoint:Y.endpoint,uploadUrl:Y.uploadUrl,protocol:"tus",size:G.data.size,headers:Y.headers,metadata:G.meta}}async function _uploadFiles2(G){const U=filterNonFailedFiles(G),Y=filterFilesToEmitUploadStarted(U);this.uppy.emit("upload-start",Y),await Promise.allSettled(U.map(re=>{if(re.isRemote){const oe=()=>this.requests,le=new AbortController,ue=fe=>{fe.id===re.id&&le.abort()};this.uppy.on("file-removed",ue);const he=this.uppy.getRequestClientForFile(re).uploadRemoteFile(re,_classPrivateFieldLooseBase(this,_getCompanionClientArgs)[_getCompanionClientArgs](re),{signal:le.signal,getQueue:oe});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",ue)},{priority:-1})(),he}return _classPrivateFieldLooseBase(this,_uploadLocalFile)[_uploadLocalFile](re)}))}Tus.VERSION=packageJson.version;var sha256={exports:{}};/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.9.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(module){(function(){var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=commonjsGlobal:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&!0&&module.exports,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(G){return Object.prototype.toString.call(G)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(G){return typeof G=="object"&&G.buffer&&G.buffer.constructor===ArrayBuffer});var createOutputMethod=function(G,U){return function(Y){return new Sha256(U,!0).update(Y)[G]()}},createMethod=function(G){var U=createOutputMethod("hex",G);NODE_JS&&(U=nodeWrap(U,G)),U.create=function(){return new Sha256(G)},U.update=function(oe){return U.create().update(oe)};for(var Y=0;Y<OUTPUT_TYPES.length;++Y){var re=OUTPUT_TYPES[Y];U[re]=createOutputMethod(re,G)}return U},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(G){if(typeof G=="string")return crypto.createHash(algorithm).update(G,"utf8").digest("hex");if(G==null)throw new Error(ERROR);return G.constructor===ArrayBuffer&&(G=new Uint8Array(G)),Array.isArray(G)||ArrayBuffer.isView(G)||G.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(G)).digest("hex"):method(G)};return nodeMethod},createHmacOutputMethod=function(G,U){return function(Y,re){return new HmacSha256(Y,U,!0).update(re)[G]()}},createHmacMethod=function(G){var U=createHmacOutputMethod("hex",G);U.create=function(oe){return new HmacSha256(oe,G)},U.update=function(oe,le){return U.create(oe).update(le)};for(var Y=0;Y<OUTPUT_TYPES.length;++Y){var re=OUTPUT_TYPES[Y];U[re]=createHmacOutputMethod(re,G)}return U};function Sha256(G,U){U?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],G?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=G}Sha256.prototype.update=function(G){if(!this.finalized){var U,Y=typeof G;if(Y!=="string"){if(Y==="object"){if(G===null)throw new Error(ERROR);if(ARRAY_BUFFER&&G.constructor===ArrayBuffer)G=new Uint8Array(G);else if(!Array.isArray(G)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(G)))throw new Error(ERROR)}else throw new Error(ERROR);U=!0}for(var re,oe=0,le,ue=G.length,he=this.blocks;oe<ue;){if(this.hashed&&(this.hashed=!1,he[0]=this.block,he[16]=he[1]=he[2]=he[3]=he[4]=he[5]=he[6]=he[7]=he[8]=he[9]=he[10]=he[11]=he[12]=he[13]=he[14]=he[15]=0),U)for(le=this.start;oe<ue&&le<64;++oe)he[le>>2]|=G[oe]<<SHIFT[le++&3];else for(le=this.start;oe<ue&&le<64;++oe)re=G.charCodeAt(oe),re<128?he[le>>2]|=re<<SHIFT[le++&3]:re<2048?(he[le>>2]|=(192|re>>6)<<SHIFT[le++&3],he[le>>2]|=(128|re&63)<<SHIFT[le++&3]):re<55296||re>=57344?(he[le>>2]|=(224|re>>12)<<SHIFT[le++&3],he[le>>2]|=(128|re>>6&63)<<SHIFT[le++&3],he[le>>2]|=(128|re&63)<<SHIFT[le++&3]):(re=65536+((re&1023)<<10|G.charCodeAt(++oe)&1023),he[le>>2]|=(240|re>>18)<<SHIFT[le++&3],he[le>>2]|=(128|re>>12&63)<<SHIFT[le++&3],he[le>>2]|=(128|re>>6&63)<<SHIFT[le++&3],he[le>>2]|=(128|re&63)<<SHIFT[le++&3]);this.lastByteIndex=le,this.bytes+=le-this.start,le>=64?(this.block=he[16],this.start=le-64,this.hash(),this.hashed=!0):this.start=le}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var G=this.blocks,U=this.lastByteIndex;G[16]=this.block,G[U>>2]|=EXTRA[U&3],this.block=G[16],U>=56&&(this.hashed||this.hash(),G[0]=this.block,G[16]=G[1]=G[2]=G[3]=G[4]=G[5]=G[6]=G[7]=G[8]=G[9]=G[10]=G[11]=G[12]=G[13]=G[14]=G[15]=0),G[14]=this.hBytes<<3|this.bytes>>>29,G[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var G=this.h0,U=this.h1,Y=this.h2,re=this.h3,oe=this.h4,le=this.h5,ue=this.h6,he=this.h7,fe=this.blocks,ve,$e,_e,Fe,Ee,Se,Ae,Te,Re,Ue,Le;for(ve=16;ve<64;++ve)Ee=fe[ve-15],$e=(Ee>>>7|Ee<<25)^(Ee>>>18|Ee<<14)^Ee>>>3,Ee=fe[ve-2],_e=(Ee>>>17|Ee<<15)^(Ee>>>19|Ee<<13)^Ee>>>10,fe[ve]=fe[ve-16]+$e+fe[ve-7]+_e<<0;for(Le=U&Y,ve=0;ve<64;ve+=4)this.first?(this.is224?(Te=300032,Ee=fe[0]-1413257819,he=Ee-150054599<<0,re=Ee+24177077<<0):(Te=704751109,Ee=fe[0]-210244248,he=Ee-1521486534<<0,re=Ee+143694565<<0),this.first=!1):($e=(G>>>2|G<<30)^(G>>>13|G<<19)^(G>>>22|G<<10),_e=(oe>>>6|oe<<26)^(oe>>>11|oe<<21)^(oe>>>25|oe<<7),Te=G&U,Fe=Te^G&Y^Le,Ae=oe&le^~oe&ue,Ee=he+_e+Ae+K[ve]+fe[ve],Se=$e+Fe,he=re+Ee<<0,re=Ee+Se<<0),$e=(re>>>2|re<<30)^(re>>>13|re<<19)^(re>>>22|re<<10),_e=(he>>>6|he<<26)^(he>>>11|he<<21)^(he>>>25|he<<7),Re=re&G,Fe=Re^re&U^Te,Ae=he&oe^~he&le,Ee=ue+_e+Ae+K[ve+1]+fe[ve+1],Se=$e+Fe,ue=Y+Ee<<0,Y=Ee+Se<<0,$e=(Y>>>2|Y<<30)^(Y>>>13|Y<<19)^(Y>>>22|Y<<10),_e=(ue>>>6|ue<<26)^(ue>>>11|ue<<21)^(ue>>>25|ue<<7),Ue=Y&re,Fe=Ue^Y&G^Re,Ae=ue&he^~ue&oe,Ee=le+_e+Ae+K[ve+2]+fe[ve+2],Se=$e+Fe,le=U+Ee<<0,U=Ee+Se<<0,$e=(U>>>2|U<<30)^(U>>>13|U<<19)^(U>>>22|U<<10),_e=(le>>>6|le<<26)^(le>>>11|le<<21)^(le>>>25|le<<7),Le=U&Y,Fe=Le^U&re^Ue,Ae=le&ue^~le&he,Ee=oe+_e+Ae+K[ve+3]+fe[ve+3],Se=$e+Fe,oe=G+Ee<<0,G=Ee+Se<<0;this.h0=this.h0+G<<0,this.h1=this.h1+U<<0,this.h2=this.h2+Y<<0,this.h3=this.h3+re<<0,this.h4=this.h4+oe<<0,this.h5=this.h5+le<<0,this.h6=this.h6+ue<<0,this.h7=this.h7+he<<0},Sha256.prototype.hex=function(){this.finalize();var G=this.h0,U=this.h1,Y=this.h2,re=this.h3,oe=this.h4,le=this.h5,ue=this.h6,he=this.h7,fe=HEX_CHARS[G>>28&15]+HEX_CHARS[G>>24&15]+HEX_CHARS[G>>20&15]+HEX_CHARS[G>>16&15]+HEX_CHARS[G>>12&15]+HEX_CHARS[G>>8&15]+HEX_CHARS[G>>4&15]+HEX_CHARS[G&15]+HEX_CHARS[U>>28&15]+HEX_CHARS[U>>24&15]+HEX_CHARS[U>>20&15]+HEX_CHARS[U>>16&15]+HEX_CHARS[U>>12&15]+HEX_CHARS[U>>8&15]+HEX_CHARS[U>>4&15]+HEX_CHARS[U&15]+HEX_CHARS[Y>>28&15]+HEX_CHARS[Y>>24&15]+HEX_CHARS[Y>>20&15]+HEX_CHARS[Y>>16&15]+HEX_CHARS[Y>>12&15]+HEX_CHARS[Y>>8&15]+HEX_CHARS[Y>>4&15]+HEX_CHARS[Y&15]+HEX_CHARS[re>>28&15]+HEX_CHARS[re>>24&15]+HEX_CHARS[re>>20&15]+HEX_CHARS[re>>16&15]+HEX_CHARS[re>>12&15]+HEX_CHARS[re>>8&15]+HEX_CHARS[re>>4&15]+HEX_CHARS[re&15]+HEX_CHARS[oe>>28&15]+HEX_CHARS[oe>>24&15]+HEX_CHARS[oe>>20&15]+HEX_CHARS[oe>>16&15]+HEX_CHARS[oe>>12&15]+HEX_CHARS[oe>>8&15]+HEX_CHARS[oe>>4&15]+HEX_CHARS[oe&15]+HEX_CHARS[le>>28&15]+HEX_CHARS[le>>24&15]+HEX_CHARS[le>>20&15]+HEX_CHARS[le>>16&15]+HEX_CHARS[le>>12&15]+HEX_CHARS[le>>8&15]+HEX_CHARS[le>>4&15]+HEX_CHARS[le&15]+HEX_CHARS[ue>>28&15]+HEX_CHARS[ue>>24&15]+HEX_CHARS[ue>>20&15]+HEX_CHARS[ue>>16&15]+HEX_CHARS[ue>>12&15]+HEX_CHARS[ue>>8&15]+HEX_CHARS[ue>>4&15]+HEX_CHARS[ue&15];return this.is224||(fe+=HEX_CHARS[he>>28&15]+HEX_CHARS[he>>24&15]+HEX_CHARS[he>>20&15]+HEX_CHARS[he>>16&15]+HEX_CHARS[he>>12&15]+HEX_CHARS[he>>8&15]+HEX_CHARS[he>>4&15]+HEX_CHARS[he&15]),fe},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var G=this.h0,U=this.h1,Y=this.h2,re=this.h3,oe=this.h4,le=this.h5,ue=this.h6,he=this.h7,fe=[G>>24&255,G>>16&255,G>>8&255,G&255,U>>24&255,U>>16&255,U>>8&255,U&255,Y>>24&255,Y>>16&255,Y>>8&255,Y&255,re>>24&255,re>>16&255,re>>8&255,re&255,oe>>24&255,oe>>16&255,oe>>8&255,oe&255,le>>24&255,le>>16&255,le>>8&255,le&255,ue>>24&255,ue>>16&255,ue>>8&255,ue&255];return this.is224||fe.push(he>>24&255,he>>16&255,he>>8&255,he&255),fe},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var G=new ArrayBuffer(this.is224?28:32),U=new DataView(G);return U.setUint32(0,this.h0),U.setUint32(4,this.h1),U.setUint32(8,this.h2),U.setUint32(12,this.h3),U.setUint32(16,this.h4),U.setUint32(20,this.h5),U.setUint32(24,this.h6),this.is224||U.setUint32(28,this.h7),G};function HmacSha256(G,U,Y){var re,oe=typeof G;if(oe==="string"){var le=[],ue=G.length,he=0,fe;for(re=0;re<ue;++re)fe=G.charCodeAt(re),fe<128?le[he++]=fe:fe<2048?(le[he++]=192|fe>>6,le[he++]=128|fe&63):fe<55296||fe>=57344?(le[he++]=224|fe>>12,le[he++]=128|fe>>6&63,le[he++]=128|fe&63):(fe=65536+((fe&1023)<<10|G.charCodeAt(++re)&1023),le[he++]=240|fe>>18,le[he++]=128|fe>>12&63,le[he++]=128|fe>>6&63,le[he++]=128|fe&63);G=le}else if(oe==="object"){if(G===null)throw new Error(ERROR);if(ARRAY_BUFFER&&G.constructor===ArrayBuffer)G=new Uint8Array(G);else if(!Array.isArray(G)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(G)))throw new Error(ERROR)}else throw new Error(ERROR);G.length>64&&(G=new Sha256(U,!0).update(G).array());var ve=[],$e=[];for(re=0;re<64;++re){var _e=G[re]||0;ve[re]=92^_e,$e[re]=54^_e}Sha256.call(this,U,Y),this.update($e),this.oKeyPad=ve,this.inner=!0,this.sharedMemory=Y}HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var G=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(G),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224)})()})(sha256);var sha256Exports=sha256.exports;class UppyBunnyCreator extends UIPlugin$1{constructor(Y,re){super(Y,re);st(this,"prepareUpload",async Y=>{const re=Y.map(le=>{const ue=this.uppy.getFile(le);return this.create(ue).then(he=>{this.uppy.setFileMeta(le,{bunnyId:he})}).catch(he=>{this.uppy.log(he,"warning")})}),oe=()=>{Y.forEach(le=>{const ue=this.uppy.getFile(le);this.uppy.emit("preprocess-complete",ue)})};return await Promise.all(re),oe()});this.id=this.opts.id||"UppyBunnyCreator",this.type="modifier"}create(Y){let re={method:"POST",url:"https://video.bunnycdn.com/library/"+this.opts.library+"/videos",headers:{accept:"application/json","content-type":"application/*+json",AccessKey:this.opts.access},data:'{"title": "'+Y.meta.name+'", "thumbnailTime": "'+this.getMsFromTime(Y.meta.thumbTime)+'"}'};return axios$1.request(re).then(oe=>oe.data.guid).catch(oe=>console.error(oe))}install(){this.uppy.addPreProcessor(this.prepareUpload)}uninstall(){this.uppy.removePreProcessor(this.prepareUpload)}getMsFromTime(Y){if(typeof Y>"u"||Y==null||Y=="")return 0;if(!this.validateTime(Y))throw this.uppy.info("Falsches Zeitformat für die Thumbnailerstellung.","error",3e3),new Error("Wrong timestamp format for thumbnail creation.");let re=Y.split(":");return(+re[0]*60*60+ +re[1]*60+ +re[2])*1e3}validateTime(Y){if(!/^(?:[01]\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(Y))return!1;const[oe,le,ue]=Y.split(":").map(Number);return!(oe<0||oe>23||le<0||le>59||ue<0||ue>59)}}const _sfc_main$2={components:{PlusIcon},inject:["bunnyApiKey","bunnyHostname","bunnyLibrary"],data(){return{expirationTime:0,uploader:null}},methods:{getExpirationTime(){const G=new Date;return G.setDate(G.getDate()+1),G.getTime()},getAuthorizationSignature(G){const U=this.bunnyLibrary+this.bunnyApiKey+this.expirationTime+G;return sha256Exports.sha256(U)},initializeUppy(){this.expirationTime=this.getExpirationTime(),this.uploader=new Uppy$1().use(Dashboard,{inline:!1,trigger:"#bunny-upload",width:"auto",proudlyDisplayPoweredByUppy:!1,closeModalOnClickOutside:!0,closeAfterFinish:!0,metaFields:[{id:"name",name:__("Name"),placeholder:__("Filename")},{id:"thumbTime",name:__("Timestamp"),placeholder:__("hh:mm:ss e.g. 00:01:04 for minute 1, second 4")},{id:"bunnyId",name:__("Bunny ID"),render:({value:G},U)=>U("input",{type:"text",class:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input bg-gray-300",value:G,placeholder:__("Bunny ID"),disabled:!0},[])}]}).use(UppyBunnyCreator,{access:this.bunnyApiKey,library:this.bunnyLibrary}).use(Tus,{endpoint:"https://video.bunnycdn.com/tusupload",retryDelays:[0,30,50,3e3,5e3,1e4,6e4],onBeforeRequest:(G,U)=>{const Y=this.uploader.getFile(U.id).meta;if(Y.bunnyId)G.setHeader("AuthorizationSignature",this.getAuthorizationSignature(Y.bunnyId)),G.setHeader("AuthorizationExpire",this.expirationTime),G.setHeader("VideoId",Y.bunnyId),G.setHeader("LibraryId",this.bunnyLibrary);else throw""}}),this.uploader.on("complete",G=>{if(G.successful.length>0){const U=G.successful.length===1?__("1 video uploaded successfully."):__(":count videos successfully uploaded.",{count:G.successful.length});console.log(U)}G.failed.length>0&&console.log("Failed files: ",G.failed),emitter.emit("load")})}},created(){emitter.on("upload",()=>document.getElementById("bunny-upload").click())},mounted(){this.initializeUppy()}};var _sfc_render$2=function G(){var U=this,Y=U._self._c;return Y("button",{staticClass:"btn-primary",attrs:{id:"bunny-upload"}},[Y("PlusIcon",{staticClass:"h-6 w-6"}),U._v(" "+U._s(U.__("Upload Video"))+" ")],1)},_sfc_staticRenderFns$2=[],__component__$2=normalizeComponent(_sfc_main$2,_sfc_render$2,_sfc_staticRenderFns$2,!1,null,null,null,null);const Uploader=__component__$2.exports,_sfc_main$1={};var _sfc_render$1=function G(){var U=this,Y=U._self._c;return Y("div",{staticClass:"container w-100 lg:w-4/5 mx-auto"},[Y("div",{staticClass:"flex flex-col items-center justify-center gap-2"},[Y("h1",{staticClass:"mb-2"},[U._v(U._s(U.__("Bunny Account Required")))]),Y("p",{staticClass:"text-sm"},[U._v(U._s(U.__("To use this addon, you'll need a Bunny.net account. Make sure to add your credentials to the .env file.")))]),Y("p",{staticClass:"text-sm"},[U._v(U._s(U.__("If you don't have one yet, you can sign up using our affiliate link.")))]),Y("a",{staticClass:"btn-primary my-2",attrs:{href:"https://bunny.net?ref=uhvsqhaw0n",target:"_blank"}},[U._v(" "+U._s(U.__("Sign Up Now"))+" ")]),Y("p",{staticClass:"text-sm"},[U._v(U._s(U.__("By doing so, you'll be supporting the development of this addon at no extra cost to you.")))]),Y("p",{staticClass:"text-sm"},[Y("b",[U._v(U._s(U.__("Thank you for your support!")))])])])])},_sfc_staticRenderFns$1=[],__component__$1=normalizeComponent(_sfc_main$1,_sfc_render$1,_sfc_staticRenderFns$1,!1,null,null,null,null);const Affiliate=__component__$1.exports,_sfc_main={components:{Affiliate,SpinnerIcon,Uploader,VideoBrowser},props:{title:String,access:String,hostname:String,library:Number,routeEmbed:String,routeView:String},data(){return console.log(this.access),{}},provide(){return{bunnyApiKey:this.access,bunnyHostname:this.hostname,bunnyLibrary:this.library,routeEmbed:this.routeEmbed,routeView:this.routeView}}};var _sfc_render=function G(){var U=this,Y=U._self._c;return Y("div",{staticClass:"flex-grow"},[U.access&&U.hostname&&U.library?[Y("div",{staticClass:"flex gap-2 justify-between"},[Y("h1",{staticClass:"flex-grow mb-4"},[U._v(U._s(U.title))]),Y("Uploader")],1),Y("VideoBrowser")]:[Y("Affiliate")]],2)},_sfc_staticRenderFns=[],__component__=normalizeComponent(_sfc_main,_sfc_render,_sfc_staticRenderFns,!1,null,null,null,null);const Overview=__component__.exports;Statamic.booting(()=>{Statamic.$components.register("bunny-overview",Overview),Statamic.$components.register("bunny-fieldtype",Field)});
